'use strict';const a1_0x4efdd4=a1_0x41cd;function a1_0x41cd(_0x14ed3f,_0x274fe2){const _0x17dbf2=a1_0x17db();return a1_0x41cd=function(_0x41cd93,_0x317dca){_0x41cd93=_0x41cd93-0xcf;let _0x5e6d45=_0x17dbf2[_0x41cd93];return _0x5e6d45;},a1_0x41cd(_0x14ed3f,_0x274fe2);}(function(_0x1ed635,_0x39458a){const _0x3bdb9d=a1_0x41cd,_0x1b9457=_0x1ed635();while(!![]){try{const _0xc3ae97=parseInt(_0x3bdb9d(0x100))/0x1*(parseInt(_0x3bdb9d(0xee))/0x2)+parseInt(_0x3bdb9d(0xd8))/0x3+parseInt(_0x3bdb9d(0xf6))/0x4+-parseInt(_0x3bdb9d(0x106))/0x5+parseInt(_0x3bdb9d(0xfd))/0x6+parseInt(_0x3bdb9d(0x116))/0x7+-parseInt(_0x3bdb9d(0xe2))/0x8*(parseInt(_0x3bdb9d(0xf2))/0x9);if(_0xc3ae97===_0x39458a)break;else _0x1b9457['push'](_0x1b9457['shift']());}catch(_0xd8f96a){_0x1b9457['push'](_0x1b9457['shift']());}}}(a1_0x17db,0x4342a));var __awaiter=this&&this[a1_0x4efdd4(0x113)]||function(_0x5e42c1,_0x3e3b2f,_0x135bdb,_0x5744ae){function _0x218e3f(_0x5773ec){return _0x5773ec instanceof _0x135bdb?_0x5773ec:new _0x135bdb(function(_0x49e36b){_0x49e36b(_0x5773ec);});}return new(_0x135bdb||(_0x135bdb=Promise))(function(_0x2e2a2b,_0x54a98c){const _0x539cb1=a1_0x41cd;function _0x2bf7bf(_0x45dcbd){const _0x29329e=a1_0x41cd;try{_0x288e4d(_0x5744ae[_0x29329e(0x101)](_0x45dcbd));}catch(_0x2ceaf2){_0x54a98c(_0x2ceaf2);}}function _0x1220a9(_0x4fabd5){const _0x3f28e6=a1_0x41cd;try{_0x288e4d(_0x5744ae[_0x3f28e6(0xe3)](_0x4fabd5));}catch(_0x25eb75){_0x54a98c(_0x25eb75);}}function _0x288e4d(_0x25528d){const _0x33523f=a1_0x41cd;_0x25528d[_0x33523f(0x10f)]?_0x2e2a2b(_0x25528d[_0x33523f(0xe1)]):_0x218e3f(_0x25528d[_0x33523f(0xe1)])[_0x33523f(0xd7)](_0x2bf7bf,_0x1220a9);}_0x288e4d((_0x5744ae=_0x5744ae[_0x539cb1(0x10c)](_0x5e42c1,_0x3e3b2f||[]))[_0x539cb1(0x101)]());});},__importDefault=this&&this['__importDefault']||function(_0x3e2e6c){const _0x54c2e9=a1_0x4efdd4;return _0x3e2e6c&&_0x3e2e6c[_0x54c2e9(0x10b)]?_0x3e2e6c:{'default':_0x3e2e6c};};Object[a1_0x4efdd4(0x11a)](exports,a1_0x4efdd4(0x10b),{'value':!![]});const ws_1=__importDefault(require('ws'));function a1_0x17db(){const _0x8c822=['readUInt8','The\x20websocket\x20is\x20already\x20connected','off','1837430wKZgKT','checkHeartbeat','slice','closing','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','__esModule','apply','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','reconnectTimeout','done','CONNECTING','handshakeData','heartbeatTimeout','__awaiter','encode','call','2579997rRbBxR','socket','readyState','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','defineProperty','handlers','ping','removeEventListener','handle','url','CLOSING','open','error','then','966657nSAUov','requestId','toString','heartbeatInterval','utf-8','handshake','send','emit','status','value','14080ZYVUvu','throw','waiting','default','alloc','parse','decode','removeAllListeners','isArray','raise','concat','includes','18828VwuTfb','disconnect','connecting','length','2970PsCwXG','pendingRequests','handshakeStatus','findIndex','1229432NoRHzK','from','close','message','push','completed','sent-info','563040dotmmM','connect','addEventListener','14mjTHhY','next','OPEN'];a1_0x17db=function(){return _0x8c822;};return a1_0x17db();}class WebsocketClient{constructor(){const _0x22fb89=a1_0x4efdd4;this['heartbeatInterval']=0x5*0x3e8+0x1f4,this[_0x22fb89(0x10e)]=null,this[_0x22fb89(0xf4)]=_0x22fb89(0xe4),this[_0x22fb89(0xd9)]=0x1,this[_0x22fb89(0xf3)]={},this['handlers']={},this[_0x22fb89(0x107)]=()=>{const _0x533e5a=_0x22fb89;if(this[_0x533e5a(0x112)]!=undefined)clearTimeout(this[_0x533e5a(0x112)]);this[_0x533e5a(0x112)]=setTimeout(()=>{const _0x59b9c6=_0x533e5a;var _0x273f2c;if(this[_0x59b9c6(0x117)]!=undefined&&this[_0x59b9c6(0x117)][_0x59b9c6(0x118)]!==ws_1[_0x59b9c6(0xe5)][_0x59b9c6(0x102)])return;(_0x273f2c=this[_0x59b9c6(0x117)])===null||_0x273f2c===void 0x0?void 0x0:_0x273f2c[_0x59b9c6(0xf8)]();},this[_0x533e5a(0xdb)]);};}[a1_0x4efdd4(0xfe)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x14d835,allowReject:_0x1a8a90,handshakeData:_0x365816,reconnectTimeout:_0x484b21}={}){return new Promise((_0x286241,_0x4c80d8)=>{const _0x544633=a1_0x41cd;if(this[_0x544633(0x117)]!=undefined&&this[_0x544633(0x117)]['readyState']===ws_1[_0x544633(0xe5)][_0x544633(0x102)]){if(_0x1a8a90!==!![])_0x4c80d8(new Error(_0x544633(0x104)));else _0x286241();}this[_0x544633(0x117)]!=undefined&&(this[_0x544633(0x117)][_0x544633(0xe9)](),this['socket']['off'](_0x544633(0xd0),this['checkHeartbeat']),this['handshakeStatus']=_0x544633(0xe4));if(this[_0x544633(0xd3)]==undefined&&_0x14d835==undefined)_0x4c80d8(new Error('No\x20url\x20specified'));this[_0x544633(0xd3)]=_0x14d835||this['url'];if(_0x484b21!==undefined)this[_0x544633(0x10e)]=_0x484b21;if(_0x365816!==undefined)this[_0x544633(0x111)]=_0x365816;this[_0x544633(0x117)]=new ws_1[(_0x544633(0xe5))](this[_0x544633(0xd3)]),this[_0x544633(0x117)][_0x544633(0xff)]('open',this[_0x544633(0x107)]),this['socket'][_0x544633(0xff)](_0x544633(0xf9),this[_0x544633(0x107)]),this[_0x544633(0x117)]['on'](_0x544633(0xd0),_0x457fb5=>{const _0xd0eb10=_0x544633;var _0xfd58c3;(_0xfd58c3=this[_0xd0eb10(0x117)])===null||_0xfd58c3===void 0x0?void 0x0:_0xfd58c3['pong'](_0x457fb5),this['checkHeartbeat']();}),this[_0x544633(0x117)][_0x544633(0xff)]('close',()=>{const _0x4d9bb5=_0x544633;if(this[_0x4d9bb5(0x112)]!=undefined)clearTimeout(this[_0x4d9bb5(0x112)]);});if(this['reconnectTimeout']!=undefined)this[_0x544633(0x117)][_0x544633(0xff)]('close',()=>{const _0x13c4b1=_0x544633;setTimeout(()=>this[_0x13c4b1(0xfe)](),this[_0x13c4b1(0x10e)]);});this[_0x544633(0x117)][_0x544633(0xff)](_0x544633(0xf9),_0x1eddc4=>this[_0x544633(0xd2)](_0x1eddc4)),this[_0x544633(0x117)][_0x544633(0xff)](_0x544633(0xd5),_0x23d360=>this[_0x544633(0xeb)]('open',_0x23d360)),this['socket'][_0x544633(0xff)]('error',_0x55ef1b=>this[_0x544633(0xeb)](_0x544633(0xd6),_0x55ef1b)),this[_0x544633(0x117)][_0x544633(0xff)](_0x544633(0xf8),_0x1ef3d6=>this[_0x544633(0xeb)]('close',_0x1ef3d6));const _0x581651=()=>{_0x286241(),_0x3d7f20();},_0xffd62d=_0x42b6d0=>{_0x1a8a90?_0x4c80d8(_0x42b6d0):_0x286241(),_0x3d7f20();};this[_0x544633(0x117)][_0x544633(0xff)]('open',_0x581651,{'once':!![]}),this['socket'][_0x544633(0xff)](_0x544633(0xd6),_0xffd62d,{'once':!![]});const _0x3d7f20=()=>{const _0x46c9fa=_0x544633;var _0x5eb642,_0xd8eecc;(_0x5eb642=this[_0x46c9fa(0x117)])===null||_0x5eb642===void 0x0?void 0x0:_0x5eb642[_0x46c9fa(0xd1)]('open',_0x581651),(_0xd8eecc=this[_0x46c9fa(0x117)])===null||_0xd8eecc===void 0x0?void 0x0:_0xd8eecc['removeEventListener'](_0x46c9fa(0xd6),_0xffd62d);};});});}[a1_0x4efdd4(0xef)](_0x4285ec,_0xdcf15b){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x3b646f,_0xbe0868)=>{const _0x4cda6d=a1_0x41cd;if(this[_0x4cda6d(0x117)]==undefined||this['socket']['readyState']===ws_1[_0x4cda6d(0xe5)][_0x4cda6d(0xd4)]||this[_0x4cda6d(0x117)][_0x4cda6d(0x118)]===ws_1[_0x4cda6d(0xe5)]['CLOSED'])return _0xbe0868(new Error(_0x4cda6d(0x10a)));this['socket'][_0x4cda6d(0xf8)](_0x4285ec,_0xdcf15b);const _0x4fbd0e=()=>{_0x3b646f(),_0x5d56eb();},_0x1aca4f=_0x3b3a93=>{_0xbe0868(_0x3b3a93),_0x5d56eb();};this[_0x4cda6d(0x117)]['addEventListener']('close',_0x4fbd0e,{'once':!![]}),this[_0x4cda6d(0x117)][_0x4cda6d(0xff)]('error',_0x1aca4f,{'once':!![]});const _0x5d56eb=()=>{const _0x1abbab=_0x4cda6d;var _0x418100,_0x6e1c60;(_0x418100=this[_0x1abbab(0x117)])===null||_0x418100===void 0x0?void 0x0:_0x418100[_0x1abbab(0xd1)](_0x1abbab(0xf8),_0x4fbd0e),(_0x6e1c60=this[_0x1abbab(0x117)])===null||_0x6e1c60===void 0x0?void 0x0:_0x6e1c60[_0x1abbab(0xd1)](_0x1abbab(0xd6),_0x1aca4f);};});});}get[a1_0x4efdd4(0xe0)](){const _0x1ab5ad=a1_0x4efdd4;var _0xdb03ca;switch((_0xdb03ca=this['socket'])===null||_0xdb03ca===void 0x0?void 0x0:_0xdb03ca[_0x1ab5ad(0x118)]){case ws_1[_0x1ab5ad(0xe5)][_0x1ab5ad(0x110)]:return _0x1ab5ad(0xf0);case ws_1[_0x1ab5ad(0xe5)]['OPEN']:return this[_0x1ab5ad(0xf4)]==='completed'?_0x1ab5ad(0xd5):_0x1ab5ad(0xdd);case ws_1[_0x1ab5ad(0xe5)][_0x1ab5ad(0xd4)]:return _0x1ab5ad(0x109);case ws_1[_0x1ab5ad(0xe5)]['CLOSED']:default:return'closed';}}[a1_0x4efdd4(0xdf)](_0xa172c8,_0x33cce4,_0x4910bd,_0x1f397d=0x5*0x3e8){const _0x3d5df8=a1_0x4efdd4;if(this['socket']==undefined||this[_0x3d5df8(0xe0)]!==_0x3d5df8(0xd5))throw new Error('The\x20websocket\x20is\x20not\x20connected');if([_0x3d5df8(0xdd),_0x3d5df8(0xd5),_0x3d5df8(0xd6),'close']['includes'](_0xa172c8))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close');const _0x48b259=_0x4910bd==undefined?0x0:this['requestId'],_0x476a11=Buffer[_0x3d5df8(0xf7)](_0xa172c8,_0x3d5df8(0xdc));if(_0x476a11['length']>0xff)throw new Error(_0x3d5df8(0x119));if(_0x4910bd!=undefined){this[_0x3d5df8(0xd9)]=(this['requestId']+0x1)%0x80||0x1;const _0x48bb85=setTimeout(()=>{const _0x3e3b75=_0x3d5df8;delete this[_0x3e3b75(0xf3)][_0x48b259],_0x4910bd(new Error('Timeout'));},_0x1f397d);this[_0x3d5df8(0xf3)][_0x48b259]=_0x35681d=>{if(!(_0x35681d instanceof Error))clearTimeout(_0x48bb85);_0x4910bd(_0x35681d);};}const _0x1933fc=Buffer[_0x3d5df8(0xec)]([Buffer[_0x3d5df8(0xf7)]([_0x48b259|0x80,_0x476a11[_0x3d5df8(0xf1)]]),_0x476a11,this[_0x3d5df8(0x114)](_0x33cce4)]);this['socket'][_0x3d5df8(0xde)](_0x1933fc);}[a1_0x4efdd4(0xd2)]({data:_0x373261}){const _0x8310c1=a1_0x4efdd4;var _0x197706,_0xaeaca0,_0x3cb209;let _0x5212d6=Buffer[_0x8310c1(0xe6)](0x0);if(_0x373261 instanceof Buffer)_0x5212d6=_0x373261;if(typeof _0x373261==='string')_0x5212d6=Buffer['from'](_0x373261,'utf-8');if(_0x373261 instanceof ArrayBuffer)_0x5212d6=Buffer['from'](_0x373261);if(Array[_0x8310c1(0xea)](_0x373261))_0x5212d6=Buffer[_0x8310c1(0xec)](_0x373261);if(this['handshakeStatus']==='waiting'){const {pingInterval:_0x4c0b10}=this[_0x8310c1(0xe8)](_0x5212d6);this['heartbeatInterval']=_0x4c0b10+0x1f4;const _0x503760=this['encode'](this[_0x8310c1(0x111)]===undefined?null:this[_0x8310c1(0x111)]);(_0x197706=this['socket'])===null||_0x197706===void 0x0?void 0x0:_0x197706[_0x8310c1(0xde)](_0x503760),this[_0x8310c1(0xf4)]=_0x8310c1(0xfc);return;}else{if(this['handshakeStatus']===_0x8310c1(0xfc)){this[_0x8310c1(0xf4)]=_0x8310c1(0xfb);return;}}const _0x1e561=_0x5212d6[_0x8310c1(0x103)](0x0),_0x5e758e=_0x1e561&0x7f,_0x5e331d=(_0x1e561&0x80)!==0x0;if(_0x5e331d){const _0x4e7098=_0x5212d6[_0x8310c1(0x103)](0x1),_0x200060=_0x5212d6[_0x8310c1(0x108)](0x2,0x2+_0x4e7098)[_0x8310c1(0xda)](_0x8310c1(0xdc));if(['handshake',_0x8310c1(0xd5),_0x8310c1(0xd6),_0x8310c1(0xf8)][_0x8310c1(0xed)](_0x200060))return;const _0x412133=this[_0x8310c1(0xe8)](_0x5212d6[_0x8310c1(0x108)](0x2+_0x4e7098)),_0x2e99a2=(_0xaeaca0=this['handlers'][_0x200060])!==null&&_0xaeaca0!==void 0x0?_0xaeaca0:[];let _0x91fd77=![];for(const _0xc87092 of _0x2e99a2){const _0x168405=_0xc87092[_0x8310c1(0x115)](undefined,_0x412133);if(!_0x91fd77&&_0x168405!==undefined&&_0x5e758e!==0x0){_0x91fd77=!![];const _0x57ee88=Buffer[_0x8310c1(0xec)]([Buffer[_0x8310c1(0xf7)]([_0x5e758e&0x7f]),this[_0x8310c1(0x114)](_0x168405)]);(_0x3cb209=this[_0x8310c1(0x117)])===null||_0x3cb209===void 0x0?void 0x0:_0x3cb209[_0x8310c1(0xde)](_0x57ee88);}}if(!_0x91fd77&&_0x5e758e!==0x0){}return;}const _0x53f963=this['pendingRequests'][_0x5e758e];if(_0x53f963==undefined)return;const _0x4dbc48=this[_0x8310c1(0xe8)](_0x5212d6['slice'](0x1));_0x53f963(_0x4dbc48);}['encode'](_0x4cfe58){const _0x329738=a1_0x4efdd4;return Buffer[_0x329738(0xf7)](JSON['stringify'](_0x4cfe58),'utf-8');}[a1_0x4efdd4(0xe8)](_0x2a5c88){const _0x46e20c=a1_0x4efdd4;return JSON[_0x46e20c(0xe7)](_0x2a5c88[_0x46e20c(0xda)]('utf-8'));}['on'](_0x509006,_0x2b0d25){const _0x455ce9=a1_0x4efdd4;if(this[_0x455ce9(0xcf)][_0x509006]==undefined)this['handlers'][_0x509006]=[];this[_0x455ce9(0xcf)][_0x509006][_0x455ce9(0xfa)](_0x2b0d25);}[a1_0x4efdd4(0x105)](_0x23b5ee,_0x1a9bd5){const _0x2696b0=a1_0x4efdd4;if(_0x1a9bd5==undefined){delete this['handlers'][_0x23b5ee];return;}const _0x42cd18=this[_0x2696b0(0xcf)][_0x23b5ee],_0x1986d5=(_0x42cd18!==null&&_0x42cd18!==void 0x0?_0x42cd18:[])[_0x2696b0(0xf5)](_0xcec1af=>_0xcec1af===_0x1a9bd5);if(_0x1986d5===-0x1)throw new Error(_0x2696b0(0x10d)+_0x23b5ee+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x42cd18['splice'](_0x1986d5,0x1);}[a1_0x4efdd4(0xeb)](_0x5701fb,_0x4c7470){var _0x52b313;const _0x2b5cd8=(_0x52b313=this['handlers'][_0x5701fb])!==null&&_0x52b313!==void 0x0?_0x52b313:[];for(const _0x1acee2 of _0x2b5cd8)_0x1acee2(_0x4c7470);}}exports[a1_0x4efdd4(0xe5)]=WebsocketClient;