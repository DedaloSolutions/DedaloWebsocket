'use strict';const a0_0x49299c=a0_0x382f;(function(_0x3027ea,_0x282a7a){const _0x558f4f=a0_0x382f,_0x2fc11c=_0x3027ea();while(!![]){try{const _0x2d7e89=parseInt(_0x558f4f(0x12f))/0x1*(-parseInt(_0x558f4f(0x15b))/0x2)+-parseInt(_0x558f4f(0x148))/0x3+-parseInt(_0x558f4f(0x10b))/0x4*(-parseInt(_0x558f4f(0x143))/0x5)+-parseInt(_0x558f4f(0x12e))/0x6+-parseInt(_0x558f4f(0x150))/0x7*(parseInt(_0x558f4f(0x154))/0x8)+parseInt(_0x558f4f(0x15e))/0x9+parseInt(_0x558f4f(0x149))/0xa;if(_0x2d7e89===_0x282a7a)break;else _0x2fc11c['push'](_0x2fc11c['shift']());}catch(_0x319e4a){_0x2fc11c['push'](_0x2fc11c['shift']());}}}(a0_0x5c18,0x66d04));function a0_0x382f(_0x198ea9,_0x589f5f){const _0x5c188a=a0_0x5c18();return a0_0x382f=function(_0x382f68,_0x6cfdd7){_0x382f68=_0x382f68-0x10a;let _0x5a1e18=_0x5c188a[_0x382f68];return _0x5a1e18;},a0_0x382f(_0x198ea9,_0x589f5f);}var __awaiter=this&&this[a0_0x49299c(0x142)]||function(_0x2c1527,_0x51bb4b,_0x3f32a4,_0x1d66e2){function _0x4bfadf(_0xaf8a26){return _0xaf8a26 instanceof _0x3f32a4?_0xaf8a26:new _0x3f32a4(function(_0x41121a){_0x41121a(_0xaf8a26);});}return new(_0x3f32a4||(_0x3f32a4=Promise))(function(_0x43fed8,_0x397d81){const _0x51ced5=a0_0x382f;function _0x323d51(_0x2a3edf){const _0x2feee0=a0_0x382f;try{_0x552d20(_0x1d66e2[_0x2feee0(0x111)](_0x2a3edf));}catch(_0x19fcdd){_0x397d81(_0x19fcdd);}}function _0x317983(_0x367308){try{_0x552d20(_0x1d66e2['throw'](_0x367308));}catch(_0x47d64a){_0x397d81(_0x47d64a);}}function _0x552d20(_0x4f2e22){const _0x505470=a0_0x382f;_0x4f2e22[_0x505470(0x11e)]?_0x43fed8(_0x4f2e22['value']):_0x4bfadf(_0x4f2e22[_0x505470(0x15d)])[_0x505470(0x15c)](_0x323d51,_0x317983);}_0x552d20((_0x1d66e2=_0x1d66e2[_0x51ced5(0x157)](_0x2c1527,_0x51bb4b||[]))[_0x51ced5(0x111)]());});},__importDefault=this&&this[a0_0x49299c(0x15f)]||function(_0x371a6f){const _0x4705af=a0_0x49299c;return _0x371a6f&&_0x371a6f[_0x4705af(0x13e)]?_0x371a6f:{'default':_0x371a6f};};Object[a0_0x49299c(0x13f)](exports,a0_0x49299c(0x13e),{'value':!![]});const crypto_1=__importDefault(require(a0_0x49299c(0x152)));class WebsocketClientServer{constructor(_0x3999fd){const _0x5abc70=a0_0x49299c;this['socket']=_0x3999fd,this['status']=_0x5abc70(0x135),this[_0x5abc70(0x131)]=0x5*0x3e8,this[_0x5abc70(0x140)]=0x2*0x3e8,this[_0x5abc70(0x151)]={},this[_0x5abc70(0x14e)]=0x1,this['pendingRequests']={},this['locals']={},this[_0x5abc70(0x11d)]={},this['socket']['on']('data',_0x34212a=>this[_0x5abc70(0x130)](_0x34212a)),this['socket']['on'](_0x5abc70(0x14f),_0x156ecb=>this[_0x5abc70(0x161)]('error',_0x156ecb)),this[_0x5abc70(0x160)]['on'](_0x5abc70(0x147),()=>{}),this[_0x5abc70(0x12d)]();const _0x4c5a7c=this[_0x5abc70(0x159)]({'pingInterval':this[_0x5abc70(0x131)]});this[_0x5abc70(0x13a)](_0x5abc70(0x113),_0x4c5a7c);}[a0_0x49299c(0x125)](){return __awaiter(this,arguments,void 0x0,function*(_0x5a6812=0x3e8,_0x287be4='',_0x31bbfb=0x1388){return new Promise((_0x363874,_0x33f079)=>{const _0x55d23b=a0_0x382f,_0x9f78a1=Buffer['from'](_0x287be4,_0x55d23b(0x153)),_0x3cdd67=Buffer[_0x55d23b(0x156)](0x2+_0x9f78a1[_0x55d23b(0x10e)]);_0x3cdd67[_0x55d23b(0x122)](_0x5a6812,0x0),_0x9f78a1[_0x55d23b(0x144)](_0x3cdd67,0x2);const _0x44c77f=_0x3cdd67[_0x55d23b(0x10e)],_0x48737a=_0x44c77f<0x7e?_0x44c77f:_0x44c77f<0x10000?0x7e:0x7f,_0xc628c4=_0x48737a===0x7e?Buffer[_0x55d23b(0x134)]([0x88,0x7e,_0x44c77f>>0x8&0xff,_0x44c77f&0xff]):_0x48737a===0x7f?Buffer[_0x55d23b(0x134)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x44c77f>>0x8&0xff,_0x44c77f&0xff]):Buffer[_0x55d23b(0x134)]([0x88,_0x44c77f]),_0x42e65b=Buffer[_0x55d23b(0x118)]([_0xc628c4,_0x3cdd67]);this[_0x55d23b(0x160)][_0x55d23b(0x165)](_0x42e65b),this[_0x55d23b(0x164)]=_0x55d23b(0x139);if(_0x31bbfb===null)this['status']=_0x55d23b(0x14d),this[_0x55d23b(0x160)][_0x55d23b(0x116)](),this[_0x55d23b(0x161)](_0x55d23b(0x147),{'code':_0x5a6812,'reason':_0x287be4}),_0x363874();else{let _0x2b5f7b=!![];this[_0x55d23b(0x160)][_0x55d23b(0x162)](_0x55d23b(0x12a),_0x4e4067=>{const _0x525a7d=_0x55d23b;if(!_0x2b5f7b)return;_0x4e4067[0x0]===0x88?(this[_0x525a7d(0x164)]='closed',this['socket']['end'](),this[_0x525a7d(0x161)]('close',{'code':_0x5a6812,'reason':_0x287be4}),_0x363874()):_0x33f079(new Error(_0x525a7d(0x10f)));}),setTimeout(()=>{const _0x513f23=_0x55d23b;_0x2b5f7b=![],_0x33f079(new Error('Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.')),this[_0x513f23(0x160)]['end']();},_0x31bbfb);}});});}[a0_0x49299c(0x13a)](_0x6785db,_0x50c755){const _0x5b1bfa=a0_0x49299c;let _0x128427,_0x4f9ab6;switch(_0x6785db){case _0x5b1bfa(0x168):_0x128427=Buffer[_0x5b1bfa(0x134)](_0x50c755,_0x5b1bfa(0x153)),_0x4f9ab6=0x1;break;case _0x5b1bfa(0x113):_0x128427=_0x50c755,_0x4f9ab6=0x2;break;case _0x5b1bfa(0x11c):_0x128427=_0x50c755,_0x4f9ab6=0x9;break;case _0x5b1bfa(0x110):_0x128427=_0x50c755,_0x4f9ab6=0xa;break;}const _0x482aa9=[];if(_0x128427[_0x5b1bfa(0x10e)]<0x7e)_0x482aa9['push'](_0x128427[_0x5b1bfa(0x10e)]);else{if(_0x128427['length']<0x10000)_0x482aa9[_0x5b1bfa(0x163)](0x7e,_0x128427[_0x5b1bfa(0x10e)]>>0x8&0xff,_0x128427['length']&0xff);else{_0x482aa9[_0x5b1bfa(0x163)](0x7f);for(let _0x422cd5=0x7;_0x422cd5>=0x0;_0x422cd5--)_0x482aa9['push'](_0x128427[_0x5b1bfa(0x10e)]>>_0x422cd5*0x8&0xff);}}const _0x6df397=Buffer[_0x5b1bfa(0x118)]([Buffer[_0x5b1bfa(0x134)]([0x80|_0x4f9ab6,..._0x482aa9]),_0x128427]);this[_0x5b1bfa(0x160)][_0x5b1bfa(0x165)](_0x6df397);}[a0_0x49299c(0x120)](_0xaa8086,_0x432e77,_0x5c3043,_0x3f9dd5=0x32*0x3e8){const _0x2ce288=a0_0x49299c;if(this[_0x2ce288(0x160)]==undefined||this[_0x2ce288(0x164)]!==_0x2ce288(0x10c))throw new Error(_0x2ce288(0x117));if([_0x2ce288(0x135),_0x2ce288(0x10c),_0x2ce288(0x14f),_0x2ce288(0x147)][_0x2ce288(0x136)](_0xaa8086))throw new Error(_0x2ce288(0x15a));const _0x17b4a5=_0x5c3043==undefined?0x0:this[_0x2ce288(0x14e)],_0x3474a2=Buffer[_0x2ce288(0x134)](_0xaa8086,_0x2ce288(0x153));if(_0x3474a2[_0x2ce288(0x10e)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0x5c3043!=undefined){this['requestId']=(this[_0x2ce288(0x14e)]+0x1)%0x80||0x1;const _0x422658=setTimeout(()=>{const _0x4d6d14=_0x2ce288;delete this['pendingRequests'][_0x17b4a5],_0x5c3043(new Error(_0x4d6d14(0x158)));},_0x3f9dd5);this[_0x2ce288(0x155)][_0x17b4a5]=_0x147ad3=>{if(!(_0x147ad3 instanceof Error))clearTimeout(_0x422658);_0x5c3043(_0x147ad3);};}const _0x24e887=Buffer[_0x2ce288(0x118)]([Buffer[_0x2ce288(0x134)]([_0x17b4a5|0x80,_0x3474a2['length']]),_0x3474a2,this['encode'](_0x432e77)]);this[_0x2ce288(0x13a)](_0x2ce288(0x113),_0x24e887);}[a0_0x49299c(0x130)](_0x572457){const _0x13add7=a0_0x49299c;var _0x24e67c;const _0xbc8f81=_0x572457[0x0],_0x446833=(_0xbc8f81&0x80)!==0x0,_0x2c3f80=_0xbc8f81&0xf,_0x19575e=_0x572457[0x1],_0x15ea85=(_0x19575e&0x80)!==0x0;let _0x43536c=_0x19575e&0x7f,_0x2143f0=0x2;if(_0x43536c===0x7e)_0x43536c=_0x572457[_0x13add7(0x133)](_0x2143f0),_0x2143f0+=0x2;else _0x43536c===0x7f&&(_0x43536c=Number(_0x572457['readBigUInt64BE'](_0x2143f0)),_0x2143f0+=0x8);const _0x5c7383=_0x15ea85?_0x572457['slice'](_0x2143f0,_0x2143f0+0x4):Buffer[_0x13add7(0x156)](0x0);if(_0x15ea85)_0x2143f0+=0x4;let _0xdac059=_0x572457['slice'](_0x2143f0,_0x2143f0+_0x43536c);if(_0x15ea85){const _0x1952bd=Buffer[_0x13add7(0x156)](_0xdac059[_0x13add7(0x10e)]);for(let _0x33f435=0x0;_0x33f435<_0xdac059[_0x13add7(0x10e)];_0x33f435++)_0x1952bd[_0x33f435]=_0xdac059[_0x33f435]^_0x5c7383[_0x33f435%0x4];_0xdac059=_0x1952bd;}switch(_0x2c3f80){case 0x1:this[_0x13add7(0x161)](_0x13add7(0x14f),new Error('Received\x20non-standard\x20text\x20message:\x20'+_0xdac059[_0x13add7(0x14b)](_0x13add7(0x153))));break;case 0x2:{if(this['status']===_0x13add7(0x135)){const _0x436d4b=this[_0x13add7(0x127)](_0xdac059);this[_0x13add7(0x161)](_0x13add7(0x135),_0x436d4b),this[_0x13add7(0x164)]=_0x13add7(0x10c),this[_0x13add7(0x13a)](_0x13add7(0x113),Buffer['alloc'](0x0));return;}const _0x576f4d=_0xdac059[_0x13add7(0x126)](0x0),_0x247e52=_0x576f4d&0x7f,_0xdac05b=(_0x576f4d&0x80)!==0x0;if(_0xdac05b){const _0x31973f=_0xdac059[_0x13add7(0x126)](0x1),_0x2c4a8c=_0xdac059['slice'](0x2,0x2+_0x31973f)[_0x13add7(0x14b)](_0x13add7(0x153));if([_0x13add7(0x135),_0x13add7(0x10c),_0x13add7(0x14f),_0x13add7(0x147)]['includes'](_0x2c4a8c)){this[_0x13add7(0x161)](_0x13add7(0x14f),new Error('Received\x20a\x20request\x20with\x20eventName\x20'+_0x2c4a8c+_0x13add7(0x114)));return;}const _0xaadb15=this[_0x13add7(0x127)](_0xdac059[_0x13add7(0x141)](0x2+_0x31973f)),_0xfb919=(_0x24e67c=this[_0x13add7(0x11d)][_0x2c4a8c])!==null&&_0x24e67c!==void 0x0?_0x24e67c:[];let _0x442c54=![];for(const _0x4d115f of _0xfb919){const _0x5eec66=_0x4d115f[_0x13add7(0x10a)](undefined,_0xaadb15);if(!_0x442c54&&_0x5eec66!==undefined&&_0x247e52!==0x0){_0x442c54=!![];const _0x294f51=Buffer[_0x13add7(0x118)]([Buffer[_0x13add7(0x134)]([_0x247e52&0x7f]),this[_0x13add7(0x159)](_0x5eec66)]);this[_0x13add7(0x13a)](_0x13add7(0x113),_0x294f51);}}if(!_0x442c54&&_0x247e52!==0x0)this['raise'](_0x13add7(0x14f),new Error(_0x13add7(0x167)+_0x2c4a8c+_0x13add7(0x11b)));return;}const _0x346fed=this[_0x13add7(0x155)][_0x247e52];if(_0x346fed==undefined){this[_0x13add7(0x161)]('error',new Error(_0x13add7(0x123)+_0x247e52+_0x13add7(0x112)));return;}const _0x5831bf=this['decode'](_0xdac059[_0x13add7(0x141)](0x1));_0x346fed[_0x13add7(0x10a)](undefined,_0x5831bf);break;}case 0x9:this[_0x13add7(0x13a)](_0x13add7(0x110),_0xdac059);break;case 0xa:const _0x32ea0f=_0xdac059[_0x13add7(0x14b)](_0x13add7(0x153)),_0x7386f7=this[_0x13add7(0x151)][_0x32ea0f];if(_0x7386f7==undefined){this[_0x13add7(0x161)](_0x13add7(0x14f),new Error(_0x13add7(0x13d)));return;}_0x7386f7();break;case 0x8:if(this['status']===_0x13add7(0x139))return;let _0x2deb47=0x3e8,_0x6a88e9='';_0xdac059[_0x13add7(0x10e)]>=0x2&&(_0x2deb47=_0xdac059[_0x13add7(0x133)](0x0),_0x6a88e9=_0xdac059[_0x13add7(0x141)](0x2)['toString']('utf-8'));this[_0x13add7(0x125)](_0x2deb47,_0x6a88e9,null);break;default:this['raise'](_0x13add7(0x14f),new Error(_0x13add7(0x121)+_0x2c3f80));}}[a0_0x49299c(0x159)](_0x2ebe55){const _0x413b0a=a0_0x49299c;return Buffer[_0x413b0a(0x134)](JSON[_0x413b0a(0x14c)](_0x2ebe55),_0x413b0a(0x153));}['decode'](_0x4e113b){const _0x253e76=a0_0x49299c;return JSON[_0x253e76(0x12b)](_0x4e113b['toString']('utf-8'));}['checkHeartbeat'](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x3e4c7d,_0x302c4b)=>{const _0x48a2c3=a0_0x382f,_0x3b1c33=crypto_1[_0x48a2c3(0x13c)][_0x48a2c3(0x138)](),_0x1ac15c=setTimeout(()=>{const _0x2e51ce=_0x48a2c3;delete this[_0x2e51ce(0x151)][_0x3b1c33],this[_0x2e51ce(0x125)](0x3e8,'',null),_0x3e4c7d(![]);},this[_0x48a2c3(0x140)]);this['pingRequests'][_0x3b1c33]=()=>{const _0x49b053=_0x48a2c3;delete this[_0x49b053(0x151)][_0x3b1c33],clearTimeout(_0x1ac15c),_0x3e4c7d(!![]),setTimeout(()=>{const _0x44cf65=_0x49b053;if(this[_0x44cf65(0x164)]!==_0x44cf65(0x10c))return;this['checkHeartbeat']();},this['pingInterval']);},this[_0x48a2c3(0x13a)](_0x48a2c3(0x11c),Buffer[_0x48a2c3(0x134)](_0x3b1c33));});});}['on'](_0x1a9f20,_0x2cc7e4){const _0x50b64d=a0_0x49299c;if(this[_0x50b64d(0x11d)][_0x1a9f20]==undefined)this['handlers'][_0x1a9f20]=[];this[_0x50b64d(0x11d)][_0x1a9f20][_0x50b64d(0x163)](_0x2cc7e4);}[a0_0x49299c(0x145)](_0x1695d0,_0x52aae7){const _0x3234dd=a0_0x49299c;if(_0x52aae7==undefined){this[_0x3234dd(0x11d)][_0x1695d0]=[];return;}const _0x243ed5=this['handlers'][_0x1695d0],_0x4dd353=(_0x243ed5!==null&&_0x243ed5!==void 0x0?_0x243ed5:[])['findIndex'](_0x20792d=>_0x20792d===_0x52aae7);if(_0x4dd353===-0x1)throw new Error(_0x3234dd(0x146)+_0x1695d0+_0x3234dd(0x129));_0x243ed5[_0x3234dd(0x128)](_0x4dd353,0x1);}[a0_0x49299c(0x161)](_0x2b50d3,_0x4846e1){const _0x4589c3=a0_0x49299c;var _0x39c7f8;const _0x47ca7e=(_0x39c7f8=this[_0x4589c3(0x11d)][_0x2b50d3])!==null&&_0x39c7f8!==void 0x0?_0x39c7f8:[];for(const _0x3afbfc of _0x47ca7e){_0x3afbfc(_0x4846e1);}}static['fromUpgradeRequest'](_0x5d0cbd,_0x1f8668){const _0x785c7b=a0_0x49299c,_0x1e1168=_0x5d0cbd['headers'][_0x785c7b(0x11f)];if(_0x1e1168==undefined)return _0x1f8668[_0x785c7b(0x119)](),null;const _0x47daac=crypto_1['default'][_0x785c7b(0x166)](_0x785c7b(0x11a));_0x47daac['update'](_0x1e1168+_0x785c7b(0x132));const _0x555895=_0x47daac[_0x785c7b(0x13b)](_0x785c7b(0x137)),_0x204e6f=[_0x785c7b(0x115),'Upgrade:\x20websocket',_0x785c7b(0x10d),_0x785c7b(0x124)+_0x555895];return _0x1f8668[_0x785c7b(0x165)](_0x204e6f[_0x785c7b(0x14a)]('\x0d\x0a')+_0x785c7b(0x12c)),new WebsocketClientServer(_0x1f8668);}}exports[a0_0x49299c(0x13c)]=WebsocketClientServer;function a0_0x5c18(){const _0x33226e=['raise','once','push','status','write','createHash','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','text','call','4FWAvcK','open','Connection:\x20Upgrade','length','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','pong','next','\x20but\x20no\x20pending\x20request\x20was\x20found','binary',';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?','HTTP/1.1\x20101\x20Switching\x20Protocols','end','The\x20websocket\x20is\x20not\x20connected','concat','destroy','sha1','\x20but\x20no\x20handler\x20return\x20a\x20result','ping','handlers','done','sec-websocket-key','emit','Received\x20message\x20with\x20unsupported\x20opcode:\x20','writeUInt16BE','Received\x20a\x20response\x20for\x20the\x20id\x20','Sec-WebSocket-Accept:\x20','disconnect','readUInt8','decode','splice','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','data','parse','\x0d\x0a\x0d\x0a','checkHeartbeat','210498SAoGRr','499649uTXhOy','handle','pingInterval','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','readUInt16BE','from','handshake','includes','base64','randomUUID','closing','send','digest','default','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','__esModule','defineProperty','pingTimeout','slice','__awaiter','3021115tUjLQb','copy','off','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','close','1767783ZRSltQ','9517790wtXgQT','join','toString','stringify','closed','requestId','error','338814NqQyAg','pingRequests','crypto','utf-8','72PyqvJS','pendingRequests','alloc','apply','Timeout','encode','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','2qLHSyK','then','value','3822597kZPYWv','__importDefault','socket'];a0_0x5c18=function(){return _0x33226e;};return a0_0x5c18();}