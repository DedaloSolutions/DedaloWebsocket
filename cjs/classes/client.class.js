'use strict';const a0_0x362410=a0_0x4c4a;function a0_0x2215(){const _0x1d0e5c=['stringify','from','slice','checkHeartbeat','raise','socket','heartbeatInterval','encode','716990tnDLPJ','The\x20websocket\x20is\x20already\x20connected','closed','utf-8','pendingRequests','concat','handshakeStatus','8CgDcOU','default','heartbeatTimeout','next','connect','length','1591554tvqoHX','isArray','readUInt8','reconnectTimeout','string','send','open','25wNdHgD','handle','OPEN','status','removeEventListener','ping','splice','readyState','toString','9147820auieHk','closing','emit','done','11083086ZgIWvZ','error','waiting','includes','No\x20url\x20specified','requestId','__importDefault','CLOSED','then','apply','completed','CLOSING','handlers','push','3wYLwwP','954243nqHKzx','Timeout','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','109628DIOLZH','off','handshakeData','__esModule','message','pong','url','value','18764548fkGFYQ','14KmwwoT','close','sent-info','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','parse','defineProperty','handshake','addEventListener','alloc','decode'];a0_0x2215=function(){return _0x1d0e5c;};return a0_0x2215();}function a0_0x4c4a(_0x4f4b22,_0x300cd8){const _0x2215bf=a0_0x2215();return a0_0x4c4a=function(_0x4c4ab3,_0x523ade){_0x4c4ab3=_0x4c4ab3-0xb6;let _0x15d1d5=_0x2215bf[_0x4c4ab3];return _0x15d1d5;},a0_0x4c4a(_0x4f4b22,_0x300cd8);}(function(_0x45072f,_0x2c58b8){const _0x5869fd=a0_0x4c4a,_0xcf1b12=_0x45072f();while(!![]){try{const _0x20b3c9=parseInt(_0x5869fd(0xc8))/0x1+-parseInt(_0x5869fd(0xe6))/0x2*(parseInt(_0x5869fd(0xc7))/0x3)+-parseInt(_0x5869fd(0xcb))/0x4*(-parseInt(_0x5869fd(0xfa))/0x5)+parseInt(_0x5869fd(0xf3))/0x6*(-parseInt(_0x5869fd(0xd4))/0x7)+-parseInt(_0x5869fd(0xed))/0x8*(-parseInt(_0x5869fd(0xb9))/0x9)+parseInt(_0x5869fd(0x103))/0xa+-parseInt(_0x5869fd(0xd3))/0xb;if(_0x20b3c9===_0x2c58b8)break;else _0xcf1b12['push'](_0xcf1b12['shift']());}catch(_0x1c3ed3){_0xcf1b12['push'](_0xcf1b12['shift']());}}}(a0_0x2215,0x9ce49));var __awaiter=this&&this['__awaiter']||function(_0x3f2483,_0x3925a7,_0x524c71,_0x5d69ba){function _0x227d61(_0x4f0343){return _0x4f0343 instanceof _0x524c71?_0x4f0343:new _0x524c71(function(_0x1fb9aa){_0x1fb9aa(_0x4f0343);});}return new(_0x524c71||(_0x524c71=Promise))(function(_0x5dd361,_0x144542){const _0xfa002e=a0_0x4c4a;function _0x57659b(_0x33178d){const _0x53bfbc=a0_0x4c4a;try{_0x508eb0(_0x5d69ba[_0x53bfbc(0xf0)](_0x33178d));}catch(_0x2b13be){_0x144542(_0x2b13be);}}function _0x39b646(_0x1174db){try{_0x508eb0(_0x5d69ba['throw'](_0x1174db));}catch(_0x5a5dda){_0x144542(_0x5a5dda);}}function _0x508eb0(_0xce9a8a){const _0x23b4f4=a0_0x4c4a;_0xce9a8a[_0x23b4f4(0xb8)]?_0x5dd361(_0xce9a8a['value']):_0x227d61(_0xce9a8a[_0x23b4f4(0xd2)])[_0x23b4f4(0xc1)](_0x57659b,_0x39b646);}_0x508eb0((_0x5d69ba=_0x5d69ba[_0xfa002e(0xc2)](_0x3f2483,_0x3925a7||[]))[_0xfa002e(0xf0)]());});},__importDefault=this&&this[a0_0x362410(0xbf)]||function(_0x21645c){const _0x1e9d5f=a0_0x362410;return _0x21645c&&_0x21645c[_0x1e9d5f(0xce)]?_0x21645c:{'default':_0x21645c};};Object[a0_0x362410(0xd9)](exports,'__esModule',{'value':!![]});const ws_1=__importDefault(require('ws'));class Client{constructor(){const _0x569e3a=a0_0x362410;this[_0x569e3a(0xe4)]=0x5*0x3e8+0x1f4,this['reconnectTimeout']=null,this['handshakeStatus']=_0x569e3a(0xbb),this[_0x569e3a(0xbe)]=0x1,this[_0x569e3a(0xea)]={},this[_0x569e3a(0xc5)]={},this[_0x569e3a(0xe1)]=()=>{const _0x535abe=_0x569e3a;if(this['heartbeatTimeout']!=undefined)clearTimeout(this[_0x535abe(0xef)]);this['heartbeatTimeout']=setTimeout(()=>{const _0x2d8cf9=_0x535abe;var _0x2d6198;if(this[_0x2d8cf9(0xe3)]!=undefined&&this[_0x2d8cf9(0xe3)][_0x2d8cf9(0x101)]!==ws_1[_0x2d8cf9(0xee)][_0x2d8cf9(0xfc)])return;(_0x2d6198=this[_0x2d8cf9(0xe3)])===null||_0x2d6198===void 0x0?void 0x0:_0x2d6198['close']();},this[_0x535abe(0xe4)]);};}[a0_0x362410(0xf1)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x55dc40,allowReject:_0xa8b7f4,handshakeData:_0x4a6a4a,reconnectTimeout:_0x5592a2}={}){return new Promise((_0x1da7df,_0x1fc09c)=>{const _0x1889eb=a0_0x4c4a;if(this[_0x1889eb(0xe3)]!=undefined&&this[_0x1889eb(0xe3)][_0x1889eb(0x101)]===ws_1[_0x1889eb(0xee)]['OPEN']){if(_0xa8b7f4!==!![])_0x1fc09c(new Error(_0x1889eb(0xe7)));else _0x1da7df();}this['socket']!=undefined&&(this['socket']['removeAllListeners'](),this[_0x1889eb(0xe3)]['off'](_0x1889eb(0xff),this[_0x1889eb(0xe1)]),this[_0x1889eb(0xec)]=_0x1889eb(0xbb));if(this['url']==undefined&&_0x55dc40==undefined)_0x1fc09c(new Error(_0x1889eb(0xbd)));this[_0x1889eb(0xd1)]=_0x55dc40||this[_0x1889eb(0xd1)];if(_0x5592a2!==undefined)this[_0x1889eb(0xf6)]=_0x5592a2;if(_0x4a6a4a!==undefined)this[_0x1889eb(0xcd)]=_0x4a6a4a;this[_0x1889eb(0xe3)]=new ws_1['default'](this[_0x1889eb(0xd1)]),this[_0x1889eb(0xe3)][_0x1889eb(0xdb)]('open',this['checkHeartbeat']),this[_0x1889eb(0xe3)][_0x1889eb(0xdb)]('message',this['checkHeartbeat']),this[_0x1889eb(0xe3)]['on'](_0x1889eb(0xff),_0x2d4a6b=>{const _0x413196=_0x1889eb;var _0x5634a3;(_0x5634a3=this[_0x413196(0xe3)])===null||_0x5634a3===void 0x0?void 0x0:_0x5634a3[_0x413196(0xd0)](_0x2d4a6b),this[_0x413196(0xe1)]();}),this[_0x1889eb(0xe3)]['addEventListener'](_0x1889eb(0xd5),()=>{const _0x4699af=_0x1889eb;if(this[_0x4699af(0xef)]!=undefined)clearTimeout(this[_0x4699af(0xef)]);});if(this[_0x1889eb(0xf6)]!=undefined)this['socket']['addEventListener']('close',()=>{const _0x9e46cf=_0x1889eb;setTimeout(()=>this[_0x9e46cf(0xf1)](),this[_0x9e46cf(0xf6)]);});this[_0x1889eb(0xe3)]['addEventListener'](_0x1889eb(0xcf),_0x3d501a=>this[_0x1889eb(0xfb)](_0x3d501a)),this['socket'][_0x1889eb(0xdb)]('open',_0x2e5f81=>this['raise'](_0x1889eb(0xf9),_0x2e5f81)),this[_0x1889eb(0xe3)][_0x1889eb(0xdb)](_0x1889eb(0xba),_0x3fabc7=>this[_0x1889eb(0xe2)](_0x1889eb(0xba),_0x3fabc7)),this['socket'][_0x1889eb(0xdb)](_0x1889eb(0xd5),_0x5bc168=>this[_0x1889eb(0xe2)](_0x1889eb(0xd5),_0x5bc168));const _0x2a768b=()=>{_0x1da7df(),_0x2c56b8();},_0x3b6a11=_0xac4210=>{_0xa8b7f4?_0x1fc09c(_0xac4210):_0x1da7df(),_0x2c56b8();};this['socket'][_0x1889eb(0xdb)](_0x1889eb(0xf9),_0x2a768b,{'once':!![]}),this[_0x1889eb(0xe3)][_0x1889eb(0xdb)]('error',_0x3b6a11,{'once':!![]});const _0x2c56b8=()=>{const _0x2bdf06=_0x1889eb;var _0x5d563e,_0x5bc17e;(_0x5d563e=this[_0x2bdf06(0xe3)])===null||_0x5d563e===void 0x0?void 0x0:_0x5d563e[_0x2bdf06(0xfe)]('open',_0x2a768b),(_0x5bc17e=this[_0x2bdf06(0xe3)])===null||_0x5bc17e===void 0x0?void 0x0:_0x5bc17e[_0x2bdf06(0xfe)]('error',_0x3b6a11);};});});}['disconnect'](_0x475d88,_0x43ef22){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x4ef82c,_0x3ce1d9)=>{const _0x26f044=a0_0x4c4a;if(this[_0x26f044(0xe3)]==undefined||this['socket'][_0x26f044(0x101)]===ws_1['default'][_0x26f044(0xc4)]||this[_0x26f044(0xe3)][_0x26f044(0x101)]===ws_1[_0x26f044(0xee)][_0x26f044(0xc0)])return _0x3ce1d9(new Error(_0x26f044(0xca)));this[_0x26f044(0xe3)][_0x26f044(0xd5)](_0x475d88,_0x43ef22);const _0x109ca7=()=>{_0x4ef82c(),_0x1ff3cf();},_0x41d7de=_0x3ddc7e=>{_0x3ce1d9(_0x3ddc7e),_0x1ff3cf();};this['socket'][_0x26f044(0xdb)](_0x26f044(0xd5),_0x109ca7,{'once':!![]}),this['socket'][_0x26f044(0xdb)](_0x26f044(0xba),_0x41d7de,{'once':!![]});const _0x1ff3cf=()=>{const _0x557a33=_0x26f044;var _0x37e6e2,_0x222483;(_0x37e6e2=this['socket'])===null||_0x37e6e2===void 0x0?void 0x0:_0x37e6e2[_0x557a33(0xfe)]('close',_0x109ca7),(_0x222483=this[_0x557a33(0xe3)])===null||_0x222483===void 0x0?void 0x0:_0x222483[_0x557a33(0xfe)]('error',_0x41d7de);};});});}get[a0_0x362410(0xfd)](){const _0x2ff6bb=a0_0x362410;var _0x9c484e;switch((_0x9c484e=this['socket'])===null||_0x9c484e===void 0x0?void 0x0:_0x9c484e['readyState']){case ws_1[_0x2ff6bb(0xee)]['CONNECTING']:return'connecting';case ws_1[_0x2ff6bb(0xee)]['OPEN']:return this['handshakeStatus']===_0x2ff6bb(0xc3)?_0x2ff6bb(0xf9):_0x2ff6bb(0xda);case ws_1[_0x2ff6bb(0xee)][_0x2ff6bb(0xc4)]:return _0x2ff6bb(0xb6);case ws_1['default'][_0x2ff6bb(0xc0)]:default:return _0x2ff6bb(0xe8);}}[a0_0x362410(0xb7)](_0x360f11,_0x41b2a9,_0xbb0ca2,_0x281a91=0x5*0x3e8){const _0x375fef=a0_0x362410;if(this[_0x375fef(0xe3)]==undefined||this['status']!=='open')throw new Error('The\x20websocket\x20is\x20not\x20connected');if([_0x375fef(0xda),'open',_0x375fef(0xba),_0x375fef(0xd5)][_0x375fef(0xbc)](_0x360f11))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close');const _0x371658=_0xbb0ca2==undefined?0x0:this[_0x375fef(0xbe)],_0x46d87a=Buffer[_0x375fef(0xdf)](_0x360f11,_0x375fef(0xe9));if(_0x46d87a[_0x375fef(0xf2)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0xbb0ca2!=undefined){this[_0x375fef(0xbe)]=(this[_0x375fef(0xbe)]+0x1)%0x80||0x1;const _0x41282d=setTimeout(()=>{const _0x271ee1=_0x375fef;delete this[_0x271ee1(0xea)][_0x371658],_0xbb0ca2(new Error(_0x271ee1(0xc9)));},_0x281a91);this[_0x375fef(0xea)][_0x371658]=_0x222573=>{if(!(_0x222573 instanceof Error))clearTimeout(_0x41282d);_0xbb0ca2(_0x222573);};}const _0x1b9dfc=Buffer[_0x375fef(0xeb)]([Buffer['from']([_0x371658|0x80,_0x46d87a[_0x375fef(0xf2)]]),_0x46d87a,this['encode'](_0x41b2a9)]);this[_0x375fef(0xe3)][_0x375fef(0xf8)](_0x1b9dfc);}[a0_0x362410(0xfb)]({data:_0x414813}){const _0x5baecb=a0_0x362410;var _0x14d1a2,_0x473dc9,_0x11d0bd;let _0x12a85a=Buffer[_0x5baecb(0xdc)](0x0);if(_0x414813 instanceof Buffer)_0x12a85a=_0x414813;if(typeof _0x414813===_0x5baecb(0xf7))_0x12a85a=Buffer['from'](_0x414813,_0x5baecb(0xe9));if(_0x414813 instanceof ArrayBuffer)_0x12a85a=Buffer[_0x5baecb(0xdf)](_0x414813);if(Array[_0x5baecb(0xf4)](_0x414813))_0x12a85a=Buffer[_0x5baecb(0xeb)](_0x414813);if(this[_0x5baecb(0xec)]==='waiting'){const {pingInterval:_0xa0c3d4}=this[_0x5baecb(0xdd)](_0x12a85a);this[_0x5baecb(0xe4)]=_0xa0c3d4+0x1f4;const _0x19f66d=this[_0x5baecb(0xe5)](this['handshakeData']===undefined?null:this[_0x5baecb(0xcd)]);(_0x14d1a2=this[_0x5baecb(0xe3)])===null||_0x14d1a2===void 0x0?void 0x0:_0x14d1a2[_0x5baecb(0xf8)](_0x19f66d),this[_0x5baecb(0xec)]='sent-info';return;}else{if(this[_0x5baecb(0xec)]===_0x5baecb(0xd6)){this['handshakeStatus']=_0x5baecb(0xc3);return;}}const _0x23b047=_0x12a85a[_0x5baecb(0xf5)](0x0),_0x4b9d0f=_0x23b047&0x7f,_0xd9829b=(_0x23b047&0x80)!==0x0;if(_0xd9829b){const _0x42477f=_0x12a85a[_0x5baecb(0xf5)](0x1),_0x1fc46b=_0x12a85a[_0x5baecb(0xe0)](0x2,0x2+_0x42477f)[_0x5baecb(0x102)](_0x5baecb(0xe9));if([_0x5baecb(0xda),_0x5baecb(0xf9),_0x5baecb(0xba),_0x5baecb(0xd5)][_0x5baecb(0xbc)](_0x1fc46b))return;const _0x811876=this[_0x5baecb(0xdd)](_0x12a85a[_0x5baecb(0xe0)](0x2+_0x42477f)),_0x1bca2a=(_0x473dc9=this[_0x5baecb(0xc5)][_0x1fc46b])!==null&&_0x473dc9!==void 0x0?_0x473dc9:[];let _0x39d7da=![];for(const _0x32a59e of _0x1bca2a){const _0x256723=_0x32a59e['call'](undefined,_0x811876);if(!_0x39d7da&&_0x256723!==undefined&&_0x4b9d0f!==0x0){_0x39d7da=!![];const _0x175448=Buffer[_0x5baecb(0xeb)]([Buffer[_0x5baecb(0xdf)]([_0x4b9d0f&0x7f]),this[_0x5baecb(0xe5)](_0x256723)]);(_0x11d0bd=this['socket'])===null||_0x11d0bd===void 0x0?void 0x0:_0x11d0bd[_0x5baecb(0xf8)](_0x175448);}}if(!_0x39d7da&&_0x4b9d0f!==0x0){}return;}const _0x3b7749=this[_0x5baecb(0xea)][_0x4b9d0f];if(_0x3b7749==undefined)return;const _0x1f78ef=this[_0x5baecb(0xdd)](_0x12a85a[_0x5baecb(0xe0)](0x1));_0x3b7749(_0x1f78ef);}['encode'](_0x3870f2){const _0x57b412=a0_0x362410;return Buffer[_0x57b412(0xdf)](JSON[_0x57b412(0xde)](_0x3870f2),_0x57b412(0xe9));}[a0_0x362410(0xdd)](_0x47534d){const _0x42f13c=a0_0x362410;return JSON[_0x42f13c(0xd8)](_0x47534d[_0x42f13c(0x102)](_0x42f13c(0xe9)));}['on'](_0x4b8f42,_0x1da60b){const _0x4d660d=a0_0x362410;if(this[_0x4d660d(0xc5)][_0x4b8f42]==undefined)this[_0x4d660d(0xc5)][_0x4b8f42]=[];this[_0x4d660d(0xc5)][_0x4b8f42][_0x4d660d(0xc6)](_0x1da60b);}[a0_0x362410(0xcc)](_0x54e043,_0x4d5264){const _0x4ba467=a0_0x362410;if(_0x4d5264==undefined){delete this[_0x4ba467(0xc5)][_0x54e043];return;}const _0x39f8f7=this['handlers'][_0x54e043],_0x47964c=(_0x39f8f7!==null&&_0x39f8f7!==void 0x0?_0x39f8f7:[])['findIndex'](_0x1852d8=>_0x1852d8===_0x4d5264);if(_0x47964c===-0x1)throw new Error(_0x4ba467(0xd7)+_0x54e043+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x39f8f7[_0x4ba467(0x100)](_0x47964c,0x1);}[a0_0x362410(0xe2)](_0x42cc68,_0x30f0d1){var _0x2993dd;const _0x1b7602=(_0x2993dd=this['handlers'][_0x42cc68])!==null&&_0x2993dd!==void 0x0?_0x2993dd:[];for(const _0x36c5ad of _0x1b7602)_0x36c5ad(_0x30f0d1);}}exports[a0_0x362410(0xee)]=Client;