'use strict';const a0_0x357ebb=a0_0x200c;(function(_0x5d0fe5,_0x4f632f){const _0x22ad1e=a0_0x200c,_0x42c778=_0x5d0fe5();while(!![]){try{const _0x4e50f9=parseInt(_0x22ad1e(0xbe))/0x1+-parseInt(_0x22ad1e(0xd7))/0x2*(parseInt(_0x22ad1e(0xe9))/0x3)+-parseInt(_0x22ad1e(0xcb))/0x4*(-parseInt(_0x22ad1e(0xe2))/0x5)+-parseInt(_0x22ad1e(0xe3))/0x6+parseInt(_0x22ad1e(0xed))/0x7*(-parseInt(_0x22ad1e(0xc9))/0x8)+-parseInt(_0x22ad1e(0xa1))/0x9*(-parseInt(_0x22ad1e(0xb7))/0xa)+-parseInt(_0x22ad1e(0xc4))/0xb*(parseInt(_0x22ad1e(0xe1))/0xc);if(_0x4e50f9===_0x4f632f)break;else _0x42c778['push'](_0x42c778['shift']());}catch(_0x4f23e9){_0x42c778['push'](_0x42c778['shift']());}}}(a0_0x3dfd,0x5185f));function a0_0x3dfd(){const _0x2284f8=['closing','handle','error','url','status','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','from','removeAllListeners','5283567TJAIwr','message','splice','off','pendingRequests','checkHeartbeat','waiting','parse','apply','throw','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close','handshakeData','pong','The\x20websocket\x20is\x20already\x20connected','heartbeatInterval','open','then','CLOSED','completed','requestId','handshake','close','10JdMmub','includes','__awaiter','default','addEventListener','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','slice','409169vwZyNu','stringify','encode','next','handlers','Timeout','44YXWmzo','__esModule','raise','value','sent-info','975704opgWnt','utf-8','11444epnPUw','decode','call','closed','heartbeatTimeout','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','emit','CONNECTING','ping','defineProperty','reconnectTimeout','CLOSING','2meDPoF','disconnect','__importDefault','OPEN','done','handshakeStatus','toString','removeEventListener','socket','connect','588228RvjrPb','535oMbzMo','1605336vPKsLB','concat','send','readyState','The\x20websocket\x20is\x20not\x20connected','alloc','782646toeTph','readUInt8','No\x20url\x20specified','length','14vlWKMw'];a0_0x3dfd=function(){return _0x2284f8;};return a0_0x3dfd();}var __awaiter=this&&this[a0_0x357ebb(0xb9)]||function(_0x5dd1b4,_0x4d9fb6,_0x48d57d,_0x114071){function _0x1e554f(_0x121bb8){return _0x121bb8 instanceof _0x48d57d?_0x121bb8:new _0x48d57d(function(_0x22de13){_0x22de13(_0x121bb8);});}return new(_0x48d57d||(_0x48d57d=Promise))(function(_0x28e6b2,_0x48d362){const _0x3470a8=a0_0x200c;function _0x17937f(_0x4314bc){try{_0x3774a2(_0x114071['next'](_0x4314bc));}catch(_0x29e3eb){_0x48d362(_0x29e3eb);}}function _0x1a04fc(_0x1678ec){const _0x34962a=a0_0x200c;try{_0x3774a2(_0x114071[_0x34962a(0xaa)](_0x1678ec));}catch(_0x2bba76){_0x48d362(_0x2bba76);}}function _0x3774a2(_0x20b40a){const _0x1a6803=a0_0x200c;_0x20b40a[_0x1a6803(0xdb)]?_0x28e6b2(_0x20b40a['value']):_0x1e554f(_0x20b40a[_0x1a6803(0xc7)])[_0x1a6803(0xb1)](_0x17937f,_0x1a04fc);}_0x3774a2((_0x114071=_0x114071[_0x3470a8(0xa9)](_0x5dd1b4,_0x4d9fb6||[]))[_0x3470a8(0xc1)]());});},__importDefault=this&&this[a0_0x357ebb(0xd9)]||function(_0x30462d){const _0x2ceba7=a0_0x357ebb;return _0x30462d&&_0x30462d[_0x2ceba7(0xc5)]?_0x30462d:{'default':_0x30462d};};Object[a0_0x357ebb(0xd4)](exports,a0_0x357ebb(0xc5),{'value':!![]});function a0_0x200c(_0x3a6116,_0x46e93e){const _0x3dfd30=a0_0x3dfd();return a0_0x200c=function(_0x200c05,_0x459956){_0x200c05=_0x200c05-0xa0;let _0xfbcd7b=_0x3dfd30[_0x200c05];return _0xfbcd7b;},a0_0x200c(_0x3a6116,_0x46e93e);}const ws_1=__importDefault(require('ws'));class Client{constructor(){const _0x500822=a0_0x357ebb;this[_0x500822(0xaf)]=0x5*0x3e8+0x1f4,this[_0x500822(0xd5)]=null,this[_0x500822(0xdc)]='waiting',this[_0x500822(0xb4)]=0x1,this['pendingRequests']={},this[_0x500822(0xc2)]={},this[_0x500822(0xa6)]=()=>{const _0x4e2364=_0x500822;if(this[_0x4e2364(0xcf)]!=undefined)clearTimeout(this[_0x4e2364(0xcf)]);this[_0x4e2364(0xcf)]=setTimeout(()=>{const _0x30da62=_0x4e2364;var _0x59c385;if(this['socket']!=undefined&&this[_0x30da62(0xdf)][_0x30da62(0xe6)]!==ws_1[_0x30da62(0xba)][_0x30da62(0xda)])return;(_0x59c385=this[_0x30da62(0xdf)])===null||_0x59c385===void 0x0?void 0x0:_0x59c385[_0x30da62(0xb6)]();},this[_0x4e2364(0xaf)]);};}[a0_0x357ebb(0xe0)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x13dc36,allowReject:_0x380158,handshakeData:_0x3ec325,reconnectTimeout:_0xf99b4d}={}){return new Promise((_0x2483cb,_0x1d99be)=>{const _0x15e625=a0_0x200c;if(this['socket']!=undefined&&this[_0x15e625(0xdf)][_0x15e625(0xe6)]===ws_1[_0x15e625(0xba)][_0x15e625(0xda)]){if(_0x380158!==!![])_0x1d99be(new Error(_0x15e625(0xae)));else _0x2483cb();}this[_0x15e625(0xdf)]!=undefined&&(this[_0x15e625(0xdf)][_0x15e625(0xa0)](),this[_0x15e625(0xdf)][_0x15e625(0xa4)](_0x15e625(0xd3),this[_0x15e625(0xa6)]),this[_0x15e625(0xdc)]=_0x15e625(0xa7));if(this[_0x15e625(0xf1)]==undefined&&_0x13dc36==undefined)_0x1d99be(new Error(_0x15e625(0xeb)));this[_0x15e625(0xf1)]=_0x13dc36||this[_0x15e625(0xf1)];if(_0xf99b4d!==undefined)this[_0x15e625(0xd5)]=_0xf99b4d;if(_0x3ec325!==undefined)this['handshakeData']=_0x3ec325;this[_0x15e625(0xdf)]=new ws_1[(_0x15e625(0xba))](this[_0x15e625(0xf1)]),this[_0x15e625(0xdf)][_0x15e625(0xbb)](_0x15e625(0xb0),this[_0x15e625(0xa6)]),this[_0x15e625(0xdf)][_0x15e625(0xbb)](_0x15e625(0xa2),this['checkHeartbeat']),this['socket']['on']('ping',_0xf26d87=>{const _0x483701=_0x15e625;var _0xe2d65d;(_0xe2d65d=this[_0x483701(0xdf)])===null||_0xe2d65d===void 0x0?void 0x0:_0xe2d65d[_0x483701(0xad)](_0xf26d87),this[_0x483701(0xa6)]();}),this['socket'][_0x15e625(0xbb)](_0x15e625(0xb6),()=>{const _0x4a29a5=_0x15e625;if(this[_0x4a29a5(0xcf)]!=undefined)clearTimeout(this[_0x4a29a5(0xcf)]);});if(this[_0x15e625(0xd5)]!=undefined)this['socket'][_0x15e625(0xbb)]('close',()=>{setTimeout(()=>this['connect'](),this['reconnectTimeout']);});this['socket'][_0x15e625(0xbb)](_0x15e625(0xa2),_0x1e1d77=>this['handle'](_0x1e1d77)),this[_0x15e625(0xdf)][_0x15e625(0xbb)](_0x15e625(0xb0),_0x310d61=>this[_0x15e625(0xc6)](_0x15e625(0xb0),_0x310d61)),this[_0x15e625(0xdf)][_0x15e625(0xbb)](_0x15e625(0xf0),_0x27d397=>this[_0x15e625(0xc6)](_0x15e625(0xf0),_0x27d397)),this[_0x15e625(0xdf)][_0x15e625(0xbb)](_0x15e625(0xb6),_0x469757=>this['raise'](_0x15e625(0xb6),_0x469757));const _0x296893=()=>{_0x2483cb(),_0x2a23d6();},_0x56dc85=_0x3f1d04=>{_0x380158?_0x1d99be(_0x3f1d04):_0x2483cb(),_0x2a23d6();};this[_0x15e625(0xdf)]['addEventListener'](_0x15e625(0xb0),_0x296893,{'once':!![]}),this[_0x15e625(0xdf)]['addEventListener'](_0x15e625(0xf0),_0x56dc85,{'once':!![]});const _0x2a23d6=()=>{const _0xb61eaa=_0x15e625;var _0x2af5e1,_0x79c41;(_0x2af5e1=this['socket'])===null||_0x2af5e1===void 0x0?void 0x0:_0x2af5e1['removeEventListener'](_0xb61eaa(0xb0),_0x296893),(_0x79c41=this['socket'])===null||_0x79c41===void 0x0?void 0x0:_0x79c41['removeEventListener'](_0xb61eaa(0xf0),_0x56dc85);};});});}[a0_0x357ebb(0xd8)](_0xbe0a54,_0xf7dfd7){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x2a2422,_0x59e49e)=>{const _0x3a856b=a0_0x200c;if(this['socket']==undefined||this[_0x3a856b(0xdf)][_0x3a856b(0xe6)]===ws_1[_0x3a856b(0xba)][_0x3a856b(0xd6)]||this['socket']['readyState']===ws_1[_0x3a856b(0xba)][_0x3a856b(0xb2)])return _0x59e49e(new Error(_0x3a856b(0xd0)));this[_0x3a856b(0xdf)][_0x3a856b(0xb6)](_0xbe0a54,_0xf7dfd7);const _0x14de30=()=>{_0x2a2422(),_0x224bf3();},_0x55eae2=_0x311aa5=>{_0x59e49e(_0x311aa5),_0x224bf3();};this[_0x3a856b(0xdf)][_0x3a856b(0xbb)](_0x3a856b(0xb6),_0x14de30,{'once':!![]}),this[_0x3a856b(0xdf)][_0x3a856b(0xbb)]('error',_0x55eae2,{'once':!![]});const _0x224bf3=()=>{const _0x2b352e=_0x3a856b;var _0x56f5c0,_0x7dbd11;(_0x56f5c0=this['socket'])===null||_0x56f5c0===void 0x0?void 0x0:_0x56f5c0[_0x2b352e(0xde)](_0x2b352e(0xb6),_0x14de30),(_0x7dbd11=this[_0x2b352e(0xdf)])===null||_0x7dbd11===void 0x0?void 0x0:_0x7dbd11['removeEventListener']('error',_0x55eae2);};});});}get['status'](){const _0x2f7e46=a0_0x357ebb;var _0x228f22;switch((_0x228f22=this[_0x2f7e46(0xdf)])===null||_0x228f22===void 0x0?void 0x0:_0x228f22[_0x2f7e46(0xe6)]){case ws_1[_0x2f7e46(0xba)][_0x2f7e46(0xd2)]:return'connecting';case ws_1['default'][_0x2f7e46(0xda)]:return this['handshakeStatus']===_0x2f7e46(0xb3)?'open':'handshake';case ws_1[_0x2f7e46(0xba)]['CLOSING']:return _0x2f7e46(0xee);case ws_1[_0x2f7e46(0xba)]['CLOSED']:default:return _0x2f7e46(0xce);}}[a0_0x357ebb(0xd1)](_0x26b96c,_0x57c238,_0x6b6575,_0x10adfc=0x5*0x3e8){const _0x21cfa3=a0_0x357ebb;if(this['socket']==undefined||this[_0x21cfa3(0xf2)]!==_0x21cfa3(0xb0))throw new Error(_0x21cfa3(0xe7));if([_0x21cfa3(0xb5),_0x21cfa3(0xb0),_0x21cfa3(0xf0),_0x21cfa3(0xb6)][_0x21cfa3(0xb8)](_0x26b96c))throw new Error(_0x21cfa3(0xab));const _0x1c413b=_0x6b6575==undefined?0x0:this[_0x21cfa3(0xb4)],_0x28c3f5=Buffer['from'](_0x26b96c,_0x21cfa3(0xca));if(_0x28c3f5[_0x21cfa3(0xec)]>0xff)throw new Error(_0x21cfa3(0xbc));if(_0x6b6575!=undefined){this[_0x21cfa3(0xb4)]=(this[_0x21cfa3(0xb4)]+0x1)%0x80||0x1;const _0x40d20d=setTimeout(()=>{const _0x4a46d8=_0x21cfa3;delete this[_0x4a46d8(0xa5)][_0x1c413b],_0x6b6575(new Error(_0x4a46d8(0xc3)));},_0x10adfc);this[_0x21cfa3(0xa5)][_0x1c413b]=_0x5340e9=>{if(!(_0x5340e9 instanceof Error))clearTimeout(_0x40d20d);_0x6b6575(_0x5340e9);};}const _0x8eba24=Buffer[_0x21cfa3(0xe4)]([Buffer[_0x21cfa3(0xf4)]([_0x1c413b|0x80,_0x28c3f5[_0x21cfa3(0xec)]]),_0x28c3f5,this['encode'](_0x57c238)]);this[_0x21cfa3(0xdf)][_0x21cfa3(0xe5)](_0x8eba24);}[a0_0x357ebb(0xef)]({data:_0x21a5a8}){const _0x2cbdde=a0_0x357ebb;var _0x66d14e,_0x3dd71c,_0x113331;let _0x408493=Buffer[_0x2cbdde(0xe8)](0x0);if(_0x21a5a8 instanceof Buffer)_0x408493=_0x21a5a8;if(typeof _0x21a5a8==='string')_0x408493=Buffer[_0x2cbdde(0xf4)](_0x21a5a8,'utf-8');if(_0x21a5a8 instanceof ArrayBuffer)_0x408493=Buffer[_0x2cbdde(0xf4)](_0x21a5a8);if(Array['isArray'](_0x21a5a8))_0x408493=Buffer['concat'](_0x21a5a8);if(this[_0x2cbdde(0xdc)]==='waiting'){const {pingInterval:_0x3caf2a}=this[_0x2cbdde(0xcc)](_0x408493);this['heartbeatInterval']=_0x3caf2a+0x1f4;const _0x4074de=this['encode'](this[_0x2cbdde(0xac)]===undefined?null:this['handshakeData']);(_0x66d14e=this[_0x2cbdde(0xdf)])===null||_0x66d14e===void 0x0?void 0x0:_0x66d14e[_0x2cbdde(0xe5)](_0x4074de),this[_0x2cbdde(0xdc)]=_0x2cbdde(0xc8);return;}else{if(this[_0x2cbdde(0xdc)]===_0x2cbdde(0xc8)){this[_0x2cbdde(0xdc)]=_0x2cbdde(0xb3);return;}}const _0x46e722=_0x408493[_0x2cbdde(0xea)](0x0),_0x3007cb=_0x46e722&0x7f,_0x365062=(_0x46e722&0x80)!==0x0;if(_0x365062){const _0x119a21=_0x408493[_0x2cbdde(0xea)](0x1),_0x347746=_0x408493[_0x2cbdde(0xbd)](0x2,0x2+_0x119a21)[_0x2cbdde(0xdd)]('utf-8');if([_0x2cbdde(0xb5),_0x2cbdde(0xb0),_0x2cbdde(0xf0),_0x2cbdde(0xb6)][_0x2cbdde(0xb8)](_0x347746))return;const _0x47d5b5=this[_0x2cbdde(0xcc)](_0x408493[_0x2cbdde(0xbd)](0x2+_0x119a21)),_0x52c074=(_0x3dd71c=this[_0x2cbdde(0xc2)][_0x347746])!==null&&_0x3dd71c!==void 0x0?_0x3dd71c:[];let _0xd1b05c=![];for(const _0x516544 of _0x52c074){const _0x1bec93=_0x516544[_0x2cbdde(0xcd)](undefined,_0x47d5b5);if(!_0xd1b05c&&_0x1bec93!==undefined&&_0x3007cb!==0x0){_0xd1b05c=!![];const _0x4eee7e=Buffer['concat']([Buffer[_0x2cbdde(0xf4)]([_0x3007cb&0x7f]),this[_0x2cbdde(0xc0)](_0x1bec93)]);(_0x113331=this['socket'])===null||_0x113331===void 0x0?void 0x0:_0x113331[_0x2cbdde(0xe5)](_0x4eee7e);}}if(!_0xd1b05c&&_0x3007cb!==0x0){}return;}const _0x530aa0=this[_0x2cbdde(0xa5)][_0x3007cb];if(_0x530aa0==undefined)return;const _0x1705cb=this[_0x2cbdde(0xcc)](_0x408493[_0x2cbdde(0xbd)](0x1));_0x530aa0(_0x1705cb);}['encode'](_0x4e34f5){const _0x1532d4=a0_0x357ebb;return Buffer['from'](JSON[_0x1532d4(0xbf)](_0x4e34f5),_0x1532d4(0xca));}[a0_0x357ebb(0xcc)](_0x11a907){const _0x566ca1=a0_0x357ebb;return JSON[_0x566ca1(0xa8)](_0x11a907[_0x566ca1(0xdd)](_0x566ca1(0xca)));}['on'](_0x4070fe,_0x1fd504){const _0x12032e=a0_0x357ebb;if(this[_0x12032e(0xc2)][_0x4070fe]==undefined)this[_0x12032e(0xc2)][_0x4070fe]=[];this[_0x12032e(0xc2)][_0x4070fe]['push'](_0x1fd504);}['off'](_0x3f586d,_0x132bc1){const _0x46a66a=a0_0x357ebb;if(_0x132bc1==undefined){delete this[_0x46a66a(0xc2)][_0x3f586d];return;}const _0x2c1274=this['handlers'][_0x3f586d],_0x1bbb6e=(_0x2c1274!==null&&_0x2c1274!==void 0x0?_0x2c1274:[])['findIndex'](_0x27b56f=>_0x27b56f===_0x132bc1);if(_0x1bbb6e===-0x1)throw new Error(_0x46a66a(0xf3)+_0x3f586d+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x2c1274[_0x46a66a(0xa3)](_0x1bbb6e,0x1);}[a0_0x357ebb(0xc6)](_0x2fc2fd,_0x57da54){const _0x459a40=a0_0x357ebb;var _0x51f1d5;const _0x5a58f0=(_0x51f1d5=this[_0x459a40(0xc2)][_0x2fc2fd])!==null&&_0x51f1d5!==void 0x0?_0x51f1d5:[];for(const _0x13e2db of _0x5a58f0)_0x13e2db(_0x57da54);}}exports['default']=Client;