'use strict';const a0_0x2ff0d6=a0_0x4aae;(function(_0x2b11de,_0x1a8534){const _0x46c386=a0_0x4aae,_0x42c9ed=_0x2b11de();while(!![]){try{const _0x36c7b1=-parseInt(_0x46c386(0x1c3))/0x1+-parseInt(_0x46c386(0x19f))/0x2+-parseInt(_0x46c386(0x19b))/0x3+parseInt(_0x46c386(0x187))/0x4+-parseInt(_0x46c386(0x1bb))/0x5*(parseInt(_0x46c386(0x1bd))/0x6)+parseInt(_0x46c386(0x17c))/0x7+-parseInt(_0x46c386(0x182))/0x8*(-parseInt(_0x46c386(0x1ac))/0x9);if(_0x36c7b1===_0x1a8534)break;else _0x42c9ed['push'](_0x42c9ed['shift']());}catch(_0x4f7abb){_0x42c9ed['push'](_0x42c9ed['shift']());}}}(a0_0x8235,0x6ac1f));var __awaiter=this&&this['__awaiter']||function(_0xadfcc0,_0x1b0aff,_0x5cf44d,_0xe068f5){function _0x3fdb10(_0x4055bd){return _0x4055bd instanceof _0x5cf44d?_0x4055bd:new _0x5cf44d(function(_0x5a603a){_0x5a603a(_0x4055bd);});}return new(_0x5cf44d||(_0x5cf44d=Promise))(function(_0x28943e,_0x5c21f9){const _0xdfbfad=a0_0x4aae;function _0xcdcf5c(_0x597700){const _0x4522ea=a0_0x4aae;try{_0x513fc0(_0xe068f5[_0x4522ea(0x1b6)](_0x597700));}catch(_0x19a59e){_0x5c21f9(_0x19a59e);}}function _0x3b0a69(_0x2abe0a){const _0x2cc00f=a0_0x4aae;try{_0x513fc0(_0xe068f5[_0x2cc00f(0x1b9)](_0x2abe0a));}catch(_0x1a70c7){_0x5c21f9(_0x1a70c7);}}function _0x513fc0(_0x547ab2){const _0x408eca=a0_0x4aae;_0x547ab2[_0x408eca(0x186)]?_0x28943e(_0x547ab2[_0x408eca(0x19d)]):_0x3fdb10(_0x547ab2[_0x408eca(0x19d)])[_0x408eca(0x19a)](_0xcdcf5c,_0x3b0a69);}_0x513fc0((_0xe068f5=_0xe068f5['apply'](_0xadfcc0,_0x1b0aff||[]))[_0xdfbfad(0x1b6)]());});},__importDefault=this&&this[a0_0x2ff0d6(0x195)]||function(_0x223c16){const _0x56edf8=a0_0x2ff0d6;return _0x223c16&&_0x223c16[_0x56edf8(0x1b5)]?_0x223c16:{'default':_0x223c16};};Object['defineProperty'](exports,a0_0x2ff0d6(0x1b5),{'value':!![]});const ws_1=__importDefault(require('ws'));function a0_0x4aae(_0x422509,_0x257de7){const _0x823566=a0_0x8235();return a0_0x4aae=function(_0x4aae53,_0x3792cd){_0x4aae53=_0x4aae53-0x17c;let _0xf9d103=_0x823566[_0x4aae53];return _0xf9d103;},a0_0x4aae(_0x422509,_0x257de7);}class Client{constructor(){const _0x35edcf=a0_0x2ff0d6;this[_0x35edcf(0x1c1)]=0x5*0x3e8+0x1f4,this[_0x35edcf(0x19c)]=null,this[_0x35edcf(0x18f)]='waiting',this[_0x35edcf(0x188)]=0x1,this['pendingRequests']={},this[_0x35edcf(0x17d)]={},this['checkHeartbeat']=()=>{const _0x3ed944=_0x35edcf;if(this['heartbeatTimeout']!=undefined)clearTimeout(this[_0x3ed944(0x1a5)]);this['heartbeatTimeout']=setTimeout(()=>{const _0x2ac501=_0x3ed944;var _0x5d93c9;if(this[_0x2ac501(0x1a4)]!=undefined&&this[_0x2ac501(0x1a4)][_0x2ac501(0x1a3)]!==ws_1[_0x2ac501(0x17e)][_0x2ac501(0x1a9)])return;(_0x5d93c9=this[_0x2ac501(0x1a4)])===null||_0x5d93c9===void 0x0?void 0x0:_0x5d93c9[_0x2ac501(0x180)]();},this[_0x3ed944(0x1c1)]);};}[a0_0x2ff0d6(0x1a2)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x3d72fc,allowReject:_0x361356,handshakeData:_0x37f2b7,reconnectTimeout:_0x42258b}={}){return new Promise((_0x5a249e,_0x324f39)=>{const _0x463f4e=a0_0x4aae;if(this[_0x463f4e(0x1a4)]!=undefined&&this['socket'][_0x463f4e(0x1a3)]===ws_1[_0x463f4e(0x17e)][_0x463f4e(0x1a9)]){if(_0x361356!==!![])_0x324f39(new Error(_0x463f4e(0x191)));else _0x5a249e();}this[_0x463f4e(0x1a4)]!=undefined&&(this[_0x463f4e(0x1a4)]['removeAllListeners'](),this[_0x463f4e(0x1a4)][_0x463f4e(0x184)](_0x463f4e(0x189),this[_0x463f4e(0x1c4)]),this[_0x463f4e(0x18f)]=_0x463f4e(0x1b2));if(this[_0x463f4e(0x18b)]==undefined&&_0x3d72fc==undefined)_0x324f39(new Error(_0x463f4e(0x1c2)));this[_0x463f4e(0x18b)]=_0x3d72fc||this['url'];if(_0x42258b!==undefined)this[_0x463f4e(0x19c)]=_0x42258b;if(_0x37f2b7!==undefined)this['handshakeData']=_0x37f2b7;this[_0x463f4e(0x1a4)]=new ws_1[(_0x463f4e(0x17e))](this[_0x463f4e(0x18b)]),this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)](_0x463f4e(0x199),this['checkHeartbeat']),this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)](_0x463f4e(0x197),this['checkHeartbeat']),this[_0x463f4e(0x1a4)]['on'](_0x463f4e(0x189),_0x2e7b1c=>{const _0x1f607f=_0x463f4e;var _0x34a96f;(_0x34a96f=this['socket'])===null||_0x34a96f===void 0x0?void 0x0:_0x34a96f[_0x1f607f(0x1b4)](_0x2e7b1c),this[_0x1f607f(0x1c4)]();}),this[_0x463f4e(0x1a4)]['addEventListener'](_0x463f4e(0x180),()=>{const _0x3ed89f=_0x463f4e;if(this[_0x3ed89f(0x1a5)]!=undefined)clearTimeout(this[_0x3ed89f(0x1a5)]);});if(this[_0x463f4e(0x19c)]!=undefined)this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)]('close',()=>{setTimeout(()=>this['connect'](),this['reconnectTimeout']);});this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)](_0x463f4e(0x197),_0x525432=>this[_0x463f4e(0x1be)](_0x525432)),this['socket'][_0x463f4e(0x1ba)](_0x463f4e(0x199),_0x29afbe=>this[_0x463f4e(0x1c5)]('open',_0x29afbe)),this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)](_0x463f4e(0x1b3),_0x4e7574=>this['raise']('error',_0x4e7574)),this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)](_0x463f4e(0x180),_0x4b6a14=>this[_0x463f4e(0x1c5)]('close',_0x4b6a14));const _0x35d53a=()=>{_0x5a249e(),_0x310fec();},_0x1eb05a=_0x3f8197=>{_0x361356?_0x324f39(_0x3f8197):_0x5a249e(),_0x310fec();};this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)](_0x463f4e(0x199),_0x35d53a,{'once':!![]}),this[_0x463f4e(0x1a4)][_0x463f4e(0x1ba)]('error',_0x1eb05a,{'once':!![]});const _0x310fec=()=>{const _0x1c1ec9=_0x463f4e;var _0x4df3bf,_0x1c79b5;(_0x4df3bf=this[_0x1c1ec9(0x1a4)])===null||_0x4df3bf===void 0x0?void 0x0:_0x4df3bf[_0x1c1ec9(0x1c0)](_0x1c1ec9(0x199),_0x35d53a),(_0x1c79b5=this[_0x1c1ec9(0x1a4)])===null||_0x1c79b5===void 0x0?void 0x0:_0x1c79b5[_0x1c1ec9(0x1c0)](_0x1c1ec9(0x1b3),_0x1eb05a);};});});}[a0_0x2ff0d6(0x1b8)](_0x2c0433,_0x5bea55){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x487a42,_0x40b5ad)=>{const _0x1ef032=a0_0x4aae;if(this[_0x1ef032(0x1a4)]==undefined||this['socket'][_0x1ef032(0x1a3)]===ws_1[_0x1ef032(0x17e)][_0x1ef032(0x196)]||this[_0x1ef032(0x1a4)]['readyState']===ws_1[_0x1ef032(0x17e)][_0x1ef032(0x1ae)])return _0x40b5ad(new Error('The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection'));this[_0x1ef032(0x1a4)][_0x1ef032(0x180)](_0x2c0433,_0x5bea55);const _0x362a55=()=>{_0x487a42(),_0x3e186e();},_0x2703b9=_0x2b1e60=>{_0x40b5ad(_0x2b1e60),_0x3e186e();};this[_0x1ef032(0x1a4)]['addEventListener'](_0x1ef032(0x180),_0x362a55,{'once':!![]}),this[_0x1ef032(0x1a4)][_0x1ef032(0x1ba)]('error',_0x2703b9,{'once':!![]});const _0x3e186e=()=>{const _0x46dfd5=_0x1ef032;var _0x4c77a5,_0x1720b8;(_0x4c77a5=this['socket'])===null||_0x4c77a5===void 0x0?void 0x0:_0x4c77a5[_0x46dfd5(0x1c0)](_0x46dfd5(0x180),_0x362a55),(_0x1720b8=this[_0x46dfd5(0x1a4)])===null||_0x1720b8===void 0x0?void 0x0:_0x1720b8[_0x46dfd5(0x1c0)](_0x46dfd5(0x1b3),_0x2703b9);};});});}get['status'](){const _0xf44cd2=a0_0x2ff0d6;var _0x184f24;switch((_0x184f24=this[_0xf44cd2(0x1a4)])===null||_0x184f24===void 0x0?void 0x0:_0x184f24[_0xf44cd2(0x1a3)]){case ws_1['default'][_0xf44cd2(0x181)]:return _0xf44cd2(0x18c);case ws_1[_0xf44cd2(0x17e)][_0xf44cd2(0x1a9)]:return this[_0xf44cd2(0x18f)]==='completed'?_0xf44cd2(0x199):_0xf44cd2(0x185);case ws_1['default']['CLOSING']:return'closing';case ws_1[_0xf44cd2(0x17e)][_0xf44cd2(0x1ae)]:default:return _0xf44cd2(0x17f);}}['emit'](_0x5b7df5,_0x301510,_0x480bee,_0x225ac9=0x5*0x3e8){const _0x982499=a0_0x2ff0d6;if(this[_0x982499(0x1a4)]==undefined||this[_0x982499(0x1b7)]!=='open')throw new Error(_0x982499(0x1bf));if([_0x982499(0x185),_0x982499(0x199),'error',_0x982499(0x180)]['includes'](_0x5b7df5))throw new Error(_0x982499(0x1b1));const _0x50288f=_0x480bee==undefined?0x0:this[_0x982499(0x188)],_0x18d5e6=Buffer['from'](_0x5b7df5,_0x982499(0x1ad));if(_0x18d5e6['length']>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0x480bee!=undefined){this['requestId']=(this[_0x982499(0x188)]+0x1)%0x80||0x1;const _0x1f9923=setTimeout(()=>{const _0x1f859b=_0x982499;delete this[_0x1f859b(0x194)][_0x50288f],_0x480bee(new Error(_0x1f859b(0x19e)));},_0x225ac9);this['pendingRequests'][_0x50288f]=_0x5d02f7=>{if(!(_0x5d02f7 instanceof Error))clearTimeout(_0x1f9923);_0x480bee(_0x5d02f7);};}const _0x52e5d6=Buffer[_0x982499(0x1a8)]([Buffer[_0x982499(0x192)]([_0x50288f|0x80,_0x18d5e6['length']]),_0x18d5e6,this[_0x982499(0x190)](_0x301510)]);this[_0x982499(0x1a4)]['send'](_0x52e5d6);}[a0_0x2ff0d6(0x1be)]({data:_0x1ddeed}){const _0x3aeb13=a0_0x2ff0d6;var _0x14ec9d,_0xc087d9,_0x4ba34d;let _0x2def6c=Buffer[_0x3aeb13(0x1ab)](0x0);if(_0x1ddeed instanceof Buffer)_0x2def6c=_0x1ddeed;if(typeof _0x1ddeed==='string')_0x2def6c=Buffer[_0x3aeb13(0x192)](_0x1ddeed,_0x3aeb13(0x1ad));if(_0x1ddeed instanceof ArrayBuffer)_0x2def6c=Buffer['from'](_0x1ddeed);if(Array['isArray'](_0x1ddeed))_0x2def6c=Buffer[_0x3aeb13(0x1a8)](_0x1ddeed);if(this[_0x3aeb13(0x18f)]===_0x3aeb13(0x1b2)){const {pingInterval:_0x320b29}=this['decode'](_0x2def6c);this[_0x3aeb13(0x1c1)]=_0x320b29+0x1f4;const _0x1c3fa1=this[_0x3aeb13(0x190)](this[_0x3aeb13(0x193)]===undefined?null:this[_0x3aeb13(0x193)]);(_0x14ec9d=this['socket'])===null||_0x14ec9d===void 0x0?void 0x0:_0x14ec9d[_0x3aeb13(0x1af)](_0x1c3fa1),this[_0x3aeb13(0x18f)]='sent-info';return;}else{if(this[_0x3aeb13(0x18f)]===_0x3aeb13(0x18d)){this[_0x3aeb13(0x18f)]='completed';return;}}const _0x444818=_0x2def6c[_0x3aeb13(0x198)](0x0),_0xcffdfd=_0x444818&0x7f,_0x234174=(_0x444818&0x80)!==0x0;if(_0x234174){const _0x69dd4f=_0x2def6c[_0x3aeb13(0x198)](0x1),_0x1d8b4d=_0x2def6c[_0x3aeb13(0x1a0)](0x2,0x2+_0x69dd4f)[_0x3aeb13(0x1b0)](_0x3aeb13(0x1ad));if([_0x3aeb13(0x185),_0x3aeb13(0x199),'error',_0x3aeb13(0x180)]['includes'](_0x1d8b4d))return;const _0x838508=this[_0x3aeb13(0x183)](_0x2def6c[_0x3aeb13(0x1a0)](0x2+_0x69dd4f)),_0x379fc2=(_0xc087d9=this[_0x3aeb13(0x17d)][_0x1d8b4d])!==null&&_0xc087d9!==void 0x0?_0xc087d9:[];let _0x220ca4=![];for(const _0x2e2f09 of _0x379fc2){const _0x416c33=_0x2e2f09[_0x3aeb13(0x1a7)](undefined,_0x838508);if(!_0x220ca4&&_0x416c33!==undefined&&_0xcffdfd!==0x0){_0x220ca4=!![];const _0x405472=Buffer[_0x3aeb13(0x1a8)]([Buffer['from']([_0xcffdfd&0x7f]),this[_0x3aeb13(0x190)](_0x416c33)]);(_0x4ba34d=this['socket'])===null||_0x4ba34d===void 0x0?void 0x0:_0x4ba34d[_0x3aeb13(0x1af)](_0x405472);}}if(!_0x220ca4&&_0xcffdfd!==0x0){}return;}const _0x35b297=this[_0x3aeb13(0x194)][_0xcffdfd];if(_0x35b297==undefined)return;const _0x37b423=this[_0x3aeb13(0x183)](_0x2def6c[_0x3aeb13(0x1a0)](0x1));_0x35b297(_0x37b423);}['encode'](_0x2cc42c){const _0x1d6e3b=a0_0x2ff0d6;return Buffer[_0x1d6e3b(0x192)](JSON[_0x1d6e3b(0x1a1)](_0x2cc42c),'utf-8');}['decode'](_0x95d5b8){const _0x41c153=a0_0x2ff0d6;return JSON[_0x41c153(0x18a)](_0x95d5b8[_0x41c153(0x1b0)](_0x41c153(0x1ad)));}['on'](_0x3c7d1b,_0x460cb8){const _0x596352=a0_0x2ff0d6;if(this[_0x596352(0x17d)][_0x3c7d1b]==undefined)this[_0x596352(0x17d)][_0x3c7d1b]=[];this[_0x596352(0x17d)][_0x3c7d1b][_0x596352(0x1a6)](_0x460cb8);}['off'](_0x5d00a5,_0x39ba0e){const _0x23e1c7=a0_0x2ff0d6;if(_0x39ba0e==undefined){delete this[_0x23e1c7(0x17d)][_0x5d00a5];return;}const _0xeb29de=this['handlers'][_0x5d00a5],_0x54d7f7=(_0xeb29de!==null&&_0xeb29de!==void 0x0?_0xeb29de:[])[_0x23e1c7(0x1bc)](_0x26456a=>_0x26456a===_0x39ba0e);if(_0x54d7f7===-0x1)throw new Error(_0x23e1c7(0x1aa)+_0x5d00a5+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0xeb29de[_0x23e1c7(0x18e)](_0x54d7f7,0x1);}['raise'](_0x22a892,_0x1a8379){const _0x478a5f=a0_0x2ff0d6;var _0x1e014e;const _0x40a4e0=(_0x1e014e=this[_0x478a5f(0x17d)][_0x22a892])!==null&&_0x1e014e!==void 0x0?_0x1e014e:[];for(const _0x4333e9 of _0x40a4e0)_0x4333e9(_0x1a8379);}}function a0_0x8235(){const _0x13162f=['closed','close','CONNECTING','8XKSZVq','decode','off','handshake','done','2746864XhjvUM','requestId','ping','parse','url','connecting','sent-info','splice','handshakeStatus','encode','The\x20websocket\x20is\x20already\x20connected','from','handshakeData','pendingRequests','__importDefault','CLOSING','message','readUInt8','open','then','2290803VrIAry','reconnectTimeout','value','Timeout','391562TCUliy','slice','stringify','connect','readyState','socket','heartbeatTimeout','push','call','concat','OPEN','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','alloc','12506607fOZUfj','utf-8','CLOSED','send','toString','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close','waiting','error','pong','__esModule','next','status','disconnect','throw','addEventListener','155TOvMuA','findIndex','87414NDetDq','handle','The\x20websocket\x20is\x20not\x20connected','removeEventListener','heartbeatInterval','No\x20url\x20specified','711175HcJyxG','checkHeartbeat','raise','3381952XwIBFg','handlers','default'];a0_0x8235=function(){return _0x13162f;};return a0_0x8235();}exports[a0_0x2ff0d6(0x17e)]=Client;