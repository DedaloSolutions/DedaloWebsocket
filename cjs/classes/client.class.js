'use strict';const a0_0x2a9d88=a0_0x2978;function a0_0x23dd(){const _0x1c26bb=['encode','utf-8','string','slice','closed','14sdCMLN','handle','2225544zbHgcp','reconnectTimeout','handlers','disconnect','handshake','throw','url','next','completed','waiting','The\x20websocket\x20is\x20already\x20connected','CLOSED','11ldfqjT','331386tZtPvI','error','parse','39483624JAvPvv','isArray','addEventListener','9ixBANA','checkHeartbeat','heartbeatTimeout','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','4926075NhClnR','length','includes','connecting','message','send','__esModule','Timeout','readUInt8','toString','OPEN','requestId','sent-info','handshakeStatus','The\x20websocket\x20is\x20not\x20connected','off','heartbeatInterval','apply','socket','default','__awaiter','10449vzugXo','2dprPIe','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','close','3229310tASmaj','ping','defineProperty','924323SWYJza','call','11224XPNjbC','connect','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','CLOSING','alloc','push','splice','readyState','done','removeEventListener','No\x20url\x20specified','from','value','handshakeData','status','concat','then','open','stringify','pendingRequests','removeAllListeners','decode','__importDefault','pong','raise'];a0_0x23dd=function(){return _0x1c26bb;};return a0_0x23dd();}function a0_0x2978(_0x37697d,_0x1b7512){const _0x23ddde=a0_0x23dd();return a0_0x2978=function(_0x2978ea,_0x2920f2){_0x2978ea=_0x2978ea-0x125;let _0x2bd398=_0x23ddde[_0x2978ea];return _0x2bd398;},a0_0x2978(_0x37697d,_0x1b7512);}(function(_0xa24662,_0x4796a7){const _0x599d23=a0_0x2978,_0x248169=_0xa24662();while(!![]){try{const _0xe38b19=parseInt(_0x599d23(0x154))/0x1*(-parseInt(_0x599d23(0x14e))/0x2)+-parseInt(_0x599d23(0x134))/0x3*(-parseInt(_0x599d23(0x176))/0x4)+-parseInt(_0x599d23(0x138))/0x5+parseInt(_0x599d23(0x12e))/0x6*(-parseInt(_0x599d23(0x174))/0x7)+parseInt(_0x599d23(0x156))/0x8*(-parseInt(_0x599d23(0x14d))/0x9)+-parseInt(_0x599d23(0x151))/0xa*(parseInt(_0x599d23(0x12d))/0xb)+parseInt(_0x599d23(0x131))/0xc;if(_0xe38b19===_0x4796a7)break;else _0x248169['push'](_0x248169['shift']());}catch(_0x77047f){_0x248169['push'](_0x248169['shift']());}}}(a0_0x23dd,0xf11fe));var __awaiter=this&&this[a0_0x2a9d88(0x14c)]||function(_0x2aead5,_0xec1eeb,_0x1bfe20,_0x5d689a){function _0x20c2fb(_0x13b044){return _0x13b044 instanceof _0x1bfe20?_0x13b044:new _0x1bfe20(function(_0x554b14){_0x554b14(_0x13b044);});}return new(_0x1bfe20||(_0x1bfe20=Promise))(function(_0x5d1059,_0x4e81f6){const _0x5d6687=a0_0x2978;function _0x3e2cad(_0x1d30d9){try{_0x3d3910(_0x5d689a['next'](_0x1d30d9));}catch(_0x349791){_0x4e81f6(_0x349791);}}function _0x1b5cd1(_0x34b163){const _0x129d7f=a0_0x2978;try{_0x3d3910(_0x5d689a[_0x129d7f(0x126)](_0x34b163));}catch(_0x1dc8f9){_0x4e81f6(_0x1dc8f9);}}function _0x3d3910(_0x29f5b6){const _0x2df2f6=a0_0x2978;_0x29f5b6[_0x2df2f6(0x15e)]?_0x5d1059(_0x29f5b6[_0x2df2f6(0x162)]):_0x20c2fb(_0x29f5b6[_0x2df2f6(0x162)])[_0x2df2f6(0x166)](_0x3e2cad,_0x1b5cd1);}_0x3d3910((_0x5d689a=_0x5d689a[_0x5d6687(0x149)](_0x2aead5,_0xec1eeb||[]))[_0x5d6687(0x128)]());});},__importDefault=this&&this[a0_0x2a9d88(0x16c)]||function(_0xf8836a){const _0x17543d=a0_0x2a9d88;return _0xf8836a&&_0xf8836a[_0x17543d(0x13e)]?_0xf8836a:{'default':_0xf8836a};};Object[a0_0x2a9d88(0x153)](exports,a0_0x2a9d88(0x13e),{'value':!![]});const ws_1=__importDefault(require('ws'));class Client{constructor(){const _0x1abf98=a0_0x2a9d88;this[_0x1abf98(0x148)]=0x5*0x3e8+0x1f4,this[_0x1abf98(0x177)]=null,this[_0x1abf98(0x145)]=_0x1abf98(0x12a),this[_0x1abf98(0x143)]=0x1,this[_0x1abf98(0x169)]={},this[_0x1abf98(0x178)]={},this['checkHeartbeat']=()=>{const _0x27f7ae=_0x1abf98;if(this[_0x27f7ae(0x136)]!=undefined)clearTimeout(this[_0x27f7ae(0x136)]);this[_0x27f7ae(0x136)]=setTimeout(()=>{const _0x38202a=_0x27f7ae;var _0x2c58fd;if(this['socket']!=undefined&&this['socket'][_0x38202a(0x15d)]!==ws_1[_0x38202a(0x14b)]['OPEN'])return;(_0x2c58fd=this[_0x38202a(0x14a)])===null||_0x2c58fd===void 0x0?void 0x0:_0x2c58fd[_0x38202a(0x150)]();},this[_0x27f7ae(0x148)]);};}[a0_0x2a9d88(0x157)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x1b5376,allowReject:_0x2b28b2,handshakeData:_0x4e8456,reconnectTimeout:_0x1da6c4}={}){return new Promise((_0x211426,_0x43c395)=>{const _0x129c54=a0_0x2978;if(this['socket']!=undefined&&this['socket'][_0x129c54(0x15d)]===ws_1[_0x129c54(0x14b)][_0x129c54(0x142)]){if(_0x2b28b2!==!![])_0x43c395(new Error(_0x129c54(0x12b)));else _0x211426();}this[_0x129c54(0x14a)]!=undefined&&(this[_0x129c54(0x14a)][_0x129c54(0x16a)](),this[_0x129c54(0x14a)][_0x129c54(0x147)](_0x129c54(0x152),this[_0x129c54(0x135)]),this['handshakeStatus']=_0x129c54(0x12a));if(this[_0x129c54(0x127)]==undefined&&_0x1b5376==undefined)_0x43c395(new Error(_0x129c54(0x160)));this[_0x129c54(0x127)]=_0x1b5376||this['url'];if(_0x1da6c4!==undefined)this[_0x129c54(0x177)]=_0x1da6c4;if(_0x4e8456!==undefined)this[_0x129c54(0x163)]=_0x4e8456;this[_0x129c54(0x14a)]=new ws_1[(_0x129c54(0x14b))](this[_0x129c54(0x127)]),this[_0x129c54(0x14a)][_0x129c54(0x133)](_0x129c54(0x167),this[_0x129c54(0x135)]),this['socket']['addEventListener'](_0x129c54(0x13c),this[_0x129c54(0x135)]),this['socket']['on'](_0x129c54(0x152),_0x4ea8fd=>{const _0x4968cb=_0x129c54;var _0x55db39;(_0x55db39=this[_0x4968cb(0x14a)])===null||_0x55db39===void 0x0?void 0x0:_0x55db39[_0x4968cb(0x16d)](_0x4ea8fd),this[_0x4968cb(0x135)]();}),this['socket'][_0x129c54(0x133)](_0x129c54(0x150),()=>{const _0x19ff75=_0x129c54;if(this[_0x19ff75(0x136)]!=undefined)clearTimeout(this[_0x19ff75(0x136)]);});if(this['reconnectTimeout']!=undefined)this[_0x129c54(0x14a)]['addEventListener']('close',()=>{const _0x335d82=_0x129c54;setTimeout(()=>this[_0x335d82(0x157)](),this[_0x335d82(0x177)]);});this[_0x129c54(0x14a)][_0x129c54(0x133)](_0x129c54(0x13c),_0x505afe=>this[_0x129c54(0x175)](_0x505afe)),this['socket'][_0x129c54(0x133)](_0x129c54(0x167),_0x470ddf=>this[_0x129c54(0x16e)](_0x129c54(0x167),_0x470ddf)),this[_0x129c54(0x14a)][_0x129c54(0x133)](_0x129c54(0x12f),_0x2da07f=>this[_0x129c54(0x16e)](_0x129c54(0x12f),_0x2da07f)),this[_0x129c54(0x14a)][_0x129c54(0x133)](_0x129c54(0x150),_0x10846f=>this['raise']('close',_0x10846f));const _0xb3dc13=()=>{_0x211426(),_0x29b1c0();},_0x951cb6=_0x5dfb9e=>{_0x2b28b2?_0x43c395(_0x5dfb9e):_0x211426(),_0x29b1c0();};this[_0x129c54(0x14a)]['addEventListener'](_0x129c54(0x167),_0xb3dc13,{'once':!![]}),this[_0x129c54(0x14a)][_0x129c54(0x133)](_0x129c54(0x12f),_0x951cb6,{'once':!![]});const _0x29b1c0=()=>{const _0x528d56=_0x129c54;var _0x5d3221,_0x22332b;(_0x5d3221=this['socket'])===null||_0x5d3221===void 0x0?void 0x0:_0x5d3221[_0x528d56(0x15f)]('open',_0xb3dc13),(_0x22332b=this[_0x528d56(0x14a)])===null||_0x22332b===void 0x0?void 0x0:_0x22332b[_0x528d56(0x15f)](_0x528d56(0x12f),_0x951cb6);};});});}[a0_0x2a9d88(0x179)](_0x621d86,_0x466e9b){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x263da6,_0x3b77f4)=>{const _0x12d1f8=a0_0x2978;if(this[_0x12d1f8(0x14a)]==undefined||this['socket'][_0x12d1f8(0x15d)]===ws_1[_0x12d1f8(0x14b)][_0x12d1f8(0x159)]||this[_0x12d1f8(0x14a)][_0x12d1f8(0x15d)]===ws_1[_0x12d1f8(0x14b)][_0x12d1f8(0x12c)])return _0x3b77f4(new Error(_0x12d1f8(0x14f)));this[_0x12d1f8(0x14a)]['close'](_0x621d86,_0x466e9b);const _0xda0b9f=()=>{_0x263da6(),_0x41c9fb();},_0x4bb0ee=_0x1a5401=>{_0x3b77f4(_0x1a5401),_0x41c9fb();};this['socket'][_0x12d1f8(0x133)](_0x12d1f8(0x150),_0xda0b9f,{'once':!![]}),this[_0x12d1f8(0x14a)][_0x12d1f8(0x133)](_0x12d1f8(0x12f),_0x4bb0ee,{'once':!![]});const _0x41c9fb=()=>{const _0x2cae97=_0x12d1f8;var _0x2ab10a,_0x465156;(_0x2ab10a=this[_0x2cae97(0x14a)])===null||_0x2ab10a===void 0x0?void 0x0:_0x2ab10a[_0x2cae97(0x15f)](_0x2cae97(0x150),_0xda0b9f),(_0x465156=this[_0x2cae97(0x14a)])===null||_0x465156===void 0x0?void 0x0:_0x465156[_0x2cae97(0x15f)](_0x2cae97(0x12f),_0x4bb0ee);};});});}get[a0_0x2a9d88(0x164)](){const _0x555499=a0_0x2a9d88;var _0x17a05b;switch((_0x17a05b=this[_0x555499(0x14a)])===null||_0x17a05b===void 0x0?void 0x0:_0x17a05b['readyState']){case ws_1[_0x555499(0x14b)]['CONNECTING']:return _0x555499(0x13b);case ws_1[_0x555499(0x14b)]['OPEN']:return this[_0x555499(0x145)]==='completed'?_0x555499(0x167):'handshake';case ws_1['default'][_0x555499(0x159)]:return'closing';case ws_1[_0x555499(0x14b)][_0x555499(0x12c)]:default:return _0x555499(0x173);}}['emit'](_0x22a86a,_0x20c2c0,_0x1a2b21,_0x28b661=0x5*0x3e8){const _0xb2c7d0=a0_0x2a9d88;if(this[_0xb2c7d0(0x14a)]==undefined||this[_0xb2c7d0(0x164)]!==_0xb2c7d0(0x167))throw new Error(_0xb2c7d0(0x146));if(['handshake',_0xb2c7d0(0x167),_0xb2c7d0(0x12f),'close'][_0xb2c7d0(0x13a)](_0x22a86a))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close');const _0x151a13=_0x1a2b21==undefined?0x0:this[_0xb2c7d0(0x143)],_0x5c80e2=Buffer[_0xb2c7d0(0x161)](_0x22a86a,_0xb2c7d0(0x170));if(_0x5c80e2['length']>0xff)throw new Error(_0xb2c7d0(0x137));if(_0x1a2b21!=undefined){this[_0xb2c7d0(0x143)]=(this[_0xb2c7d0(0x143)]+0x1)%0x80||0x1;const _0x2df6e3=setTimeout(()=>{const _0x2096a9=_0xb2c7d0;delete this['pendingRequests'][_0x151a13],_0x1a2b21(new Error(_0x2096a9(0x13f)));},_0x28b661);this['pendingRequests'][_0x151a13]=_0x321bd1=>{if(!(_0x321bd1 instanceof Error))clearTimeout(_0x2df6e3);_0x1a2b21(_0x321bd1);};}const _0x185816=Buffer['concat']([Buffer[_0xb2c7d0(0x161)]([_0x151a13|0x80,_0x5c80e2[_0xb2c7d0(0x139)]]),_0x5c80e2,this[_0xb2c7d0(0x16f)](_0x20c2c0)]);this['socket'][_0xb2c7d0(0x13d)](_0x185816);}[a0_0x2a9d88(0x175)]({data:_0x2df3f8}){const _0x1b52d2=a0_0x2a9d88;var _0x523afa,_0x16d1b6,_0xa6250;let _0x4787af=Buffer[_0x1b52d2(0x15a)](0x0);if(_0x2df3f8 instanceof Buffer)_0x4787af=_0x2df3f8;if(typeof _0x2df3f8===_0x1b52d2(0x171))_0x4787af=Buffer[_0x1b52d2(0x161)](_0x2df3f8,_0x1b52d2(0x170));if(_0x2df3f8 instanceof ArrayBuffer)_0x4787af=Buffer[_0x1b52d2(0x161)](_0x2df3f8);if(Array[_0x1b52d2(0x132)](_0x2df3f8))_0x4787af=Buffer[_0x1b52d2(0x165)](_0x2df3f8);if(this[_0x1b52d2(0x145)]===_0x1b52d2(0x12a)){const {pingInterval:_0x564fd5}=this[_0x1b52d2(0x16b)](_0x4787af);this[_0x1b52d2(0x148)]=_0x564fd5+0x1f4;const _0x56f099=this[_0x1b52d2(0x16f)](this[_0x1b52d2(0x163)]===undefined?null:this[_0x1b52d2(0x163)]);(_0x523afa=this[_0x1b52d2(0x14a)])===null||_0x523afa===void 0x0?void 0x0:_0x523afa[_0x1b52d2(0x13d)](_0x56f099),this[_0x1b52d2(0x145)]=_0x1b52d2(0x144);return;}else{if(this[_0x1b52d2(0x145)]===_0x1b52d2(0x144)){this['handshakeStatus']=_0x1b52d2(0x129);return;}}const _0x19cb05=_0x4787af[_0x1b52d2(0x140)](0x0),_0x1bb1e9=_0x19cb05&0x7f,_0x11ca8d=(_0x19cb05&0x80)!==0x0;if(_0x11ca8d){const _0x5ac0bd=_0x4787af[_0x1b52d2(0x140)](0x1),_0x42c618=_0x4787af[_0x1b52d2(0x172)](0x2,0x2+_0x5ac0bd)[_0x1b52d2(0x141)](_0x1b52d2(0x170));if([_0x1b52d2(0x125),_0x1b52d2(0x167),_0x1b52d2(0x12f),_0x1b52d2(0x150)]['includes'](_0x42c618))return;const _0x1bbd34=this[_0x1b52d2(0x16b)](_0x4787af[_0x1b52d2(0x172)](0x2+_0x5ac0bd)),_0x1d07a3=(_0x16d1b6=this['handlers'][_0x42c618])!==null&&_0x16d1b6!==void 0x0?_0x16d1b6:[];let _0x46184f=![];for(const _0x587334 of _0x1d07a3){const _0x1f78b6=_0x587334[_0x1b52d2(0x155)](undefined,_0x1bbd34);if(!_0x46184f&&_0x1f78b6!==undefined&&_0x1bb1e9!==0x0){_0x46184f=!![];const _0x39b7f2=Buffer['concat']([Buffer['from']([_0x1bb1e9&0x7f]),this[_0x1b52d2(0x16f)](_0x1f78b6)]);(_0xa6250=this[_0x1b52d2(0x14a)])===null||_0xa6250===void 0x0?void 0x0:_0xa6250[_0x1b52d2(0x13d)](_0x39b7f2);}}if(!_0x46184f&&_0x1bb1e9!==0x0){}return;}const _0x249bf5=this['pendingRequests'][_0x1bb1e9];if(_0x249bf5==undefined)return;const _0x334688=this[_0x1b52d2(0x16b)](_0x4787af[_0x1b52d2(0x172)](0x1));_0x249bf5(_0x334688);}[a0_0x2a9d88(0x16f)](_0x2457d3){const _0x4428bb=a0_0x2a9d88;return Buffer[_0x4428bb(0x161)](JSON[_0x4428bb(0x168)](_0x2457d3),'utf-8');}[a0_0x2a9d88(0x16b)](_0x492dac){const _0xc7d102=a0_0x2a9d88;return JSON[_0xc7d102(0x130)](_0x492dac[_0xc7d102(0x141)](_0xc7d102(0x170)));}['on'](_0x43e2f1,_0x215643){const _0x1f050d=a0_0x2a9d88;if(this[_0x1f050d(0x178)][_0x43e2f1]==undefined)this[_0x1f050d(0x178)][_0x43e2f1]=[];this[_0x1f050d(0x178)][_0x43e2f1][_0x1f050d(0x15b)](_0x215643);}[a0_0x2a9d88(0x147)](_0x5b5e29,_0x5c823d){const _0x26dc66=a0_0x2a9d88;if(_0x5c823d==undefined){delete this[_0x26dc66(0x178)][_0x5b5e29];return;}const _0x22a9b7=this[_0x26dc66(0x178)][_0x5b5e29],_0x49f05b=(_0x22a9b7!==null&&_0x22a9b7!==void 0x0?_0x22a9b7:[])['findIndex'](_0x3ff62a=>_0x3ff62a===_0x5c823d);if(_0x49f05b===-0x1)throw new Error(_0x26dc66(0x158)+_0x5b5e29+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x22a9b7[_0x26dc66(0x15c)](_0x49f05b,0x1);}[a0_0x2a9d88(0x16e)](_0x5a4170,_0x1f1961){const _0x35e44a=a0_0x2a9d88;var _0x55bea5;const _0x594df1=(_0x55bea5=this[_0x35e44a(0x178)][_0x5a4170])!==null&&_0x55bea5!==void 0x0?_0x55bea5:[];for(const _0x33c7b6 of _0x594df1)_0x33c7b6(_0x1f1961);}}exports[a0_0x2a9d88(0x14b)]=Client;