'use strict';function a0_0xd44d(_0x45d362,_0x4d0ea5){const _0x66db6d=a0_0x66db();return a0_0xd44d=function(_0xd44d53,_0x42ae46){_0xd44d53=_0xd44d53-0x18c;let _0x385911=_0x66db6d[_0xd44d53];return _0x385911;},a0_0xd44d(_0x45d362,_0x4d0ea5);}const a0_0x37cd93=a0_0xd44d;(function(_0x5b939d,_0x5a5e7f){const _0x2c1be8=a0_0xd44d,_0x1236a8=_0x5b939d();while(!![]){try{const _0x222f64=parseInt(_0x2c1be8(0x1bb))/0x1+-parseInt(_0x2c1be8(0x1d3))/0x2*(parseInt(_0x2c1be8(0x1a2))/0x3)+parseInt(_0x2c1be8(0x19f))/0x4+parseInt(_0x2c1be8(0x1aa))/0x5*(-parseInt(_0x2c1be8(0x19e))/0x6)+parseInt(_0x2c1be8(0x1cc))/0x7*(parseInt(_0x2c1be8(0x1c1))/0x8)+-parseInt(_0x2c1be8(0x1bc))/0x9+parseInt(_0x2c1be8(0x1c0))/0xa;if(_0x222f64===_0x5a5e7f)break;else _0x1236a8['push'](_0x1236a8['shift']());}catch(_0x3585fb){_0x1236a8['push'](_0x1236a8['shift']());}}}(a0_0x66db,0x3b19a));var __awaiter=this&&this[a0_0x37cd93(0x1b2)]||function(_0x10a1c3,_0x463bad,_0x3fbe4c,_0x78e9df){function _0x498e90(_0x70a96){return _0x70a96 instanceof _0x3fbe4c?_0x70a96:new _0x3fbe4c(function(_0x3b9de7){_0x3b9de7(_0x70a96);});}return new(_0x3fbe4c||(_0x3fbe4c=Promise))(function(_0x2abf5c,_0x3107ee){const _0x8f2802=a0_0xd44d;function _0x3e050e(_0x46aed2){const _0x214440=a0_0xd44d;try{_0x4b70f3(_0x78e9df[_0x214440(0x1a1)](_0x46aed2));}catch(_0x3990ef){_0x3107ee(_0x3990ef);}}function _0x2a5b53(_0x46af22){try{_0x4b70f3(_0x78e9df['throw'](_0x46af22));}catch(_0x42e9f5){_0x3107ee(_0x42e9f5);}}function _0x4b70f3(_0x4b5427){const _0x5a4658=a0_0xd44d;_0x4b5427['done']?_0x2abf5c(_0x4b5427[_0x5a4658(0x1c3)]):_0x498e90(_0x4b5427['value'])[_0x5a4658(0x18c)](_0x3e050e,_0x2a5b53);}_0x4b70f3((_0x78e9df=_0x78e9df[_0x8f2802(0x1cd)](_0x10a1c3,_0x463bad||[]))[_0x8f2802(0x1a1)]());});},__importDefault=this&&this[a0_0x37cd93(0x1ce)]||function(_0x1972f5){const _0x4fd8d4=a0_0x37cd93;return _0x1972f5&&_0x1972f5[_0x4fd8d4(0x1b8)]?_0x1972f5:{'default':_0x1972f5};};Object[a0_0x37cd93(0x19a)](exports,a0_0x37cd93(0x1b8),{'value':!![]});const ws_1=__importDefault(require('ws'));class Client{constructor(){const _0x134eac=a0_0x37cd93;this[_0x134eac(0x1ab)]=0x5*0x3e8+0x1f4,this['reconnectTimeout']=null,this[_0x134eac(0x1c2)]=_0x134eac(0x1c5),this[_0x134eac(0x194)]=0x1,this['pendingRequests']={},this[_0x134eac(0x198)]={},this[_0x134eac(0x1d2)]=()=>{const _0x2af8=_0x134eac;if(this[_0x2af8(0x1b3)]!=undefined)clearTimeout(this[_0x2af8(0x1b3)]);this['heartbeatTimeout']=setTimeout(()=>{const _0x1f18a7=_0x2af8;var _0x5b7757;if(this['socket']!=undefined&&this[_0x1f18a7(0x196)][_0x1f18a7(0x1ad)]!==ws_1[_0x1f18a7(0x18f)][_0x1f18a7(0x19d)])return;(_0x5b7757=this[_0x1f18a7(0x196)])===null||_0x5b7757===void 0x0?void 0x0:_0x5b7757[_0x1f18a7(0x1cb)]();},this['heartbeatInterval']);};}[a0_0x37cd93(0x1cf)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x3fb28e,allowReject:_0x2976b1,handshakeData:_0xd14e7a,reconnectTimeout:_0x1cc4bb}={}){return new Promise((_0x5d6ba7,_0x1151d3)=>{const _0x7e5f6e=a0_0xd44d;if(this[_0x7e5f6e(0x196)]!=undefined&&this[_0x7e5f6e(0x196)]['readyState']===ws_1['default'][_0x7e5f6e(0x19d)]){if(_0x2976b1!==!![])_0x1151d3(new Error('The\x20websocket\x20is\x20already\x20connected'));else _0x5d6ba7();}this[_0x7e5f6e(0x196)]!=undefined&&(this['socket'][_0x7e5f6e(0x1b6)](),this[_0x7e5f6e(0x196)]['off'](_0x7e5f6e(0x1d7),this[_0x7e5f6e(0x1d2)]),this[_0x7e5f6e(0x1c2)]='waiting');if(this[_0x7e5f6e(0x192)]==undefined&&_0x3fb28e==undefined)_0x1151d3(new Error('No\x20url\x20specified'));this[_0x7e5f6e(0x192)]=_0x3fb28e||this['url'];if(_0x1cc4bb!==undefined)this['reconnectTimeout']=_0x1cc4bb;if(_0xd14e7a!==undefined)this[_0x7e5f6e(0x1a0)]=_0xd14e7a;this['socket']=new ws_1['default'](this[_0x7e5f6e(0x192)]),this['socket'][_0x7e5f6e(0x1d1)](_0x7e5f6e(0x1b7),this[_0x7e5f6e(0x1d2)]),this[_0x7e5f6e(0x196)]['addEventListener'](_0x7e5f6e(0x1c9),this[_0x7e5f6e(0x1d2)]),this['socket']['on']('ping',_0x225347=>{const _0xa7a368=_0x7e5f6e;var _0x7349a5;(_0x7349a5=this[_0xa7a368(0x196)])===null||_0x7349a5===void 0x0?void 0x0:_0x7349a5[_0xa7a368(0x1d8)](_0x225347),this[_0xa7a368(0x1d2)]();}),this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)]('close',()=>{const _0x5007ce=_0x7e5f6e;if(this[_0x5007ce(0x1b3)]!=undefined)clearTimeout(this[_0x5007ce(0x1b3)]);});if(this[_0x7e5f6e(0x1b4)]!=undefined)this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)](_0x7e5f6e(0x1cb),()=>{const _0x34feeb=_0x7e5f6e;setTimeout(()=>this[_0x34feeb(0x1cf)](),this[_0x34feeb(0x1b4)]);});this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)](_0x7e5f6e(0x1c9),_0x115c00=>this[_0x7e5f6e(0x1ba)](_0x115c00)),this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)](_0x7e5f6e(0x1b7),_0x4c4ab2=>this[_0x7e5f6e(0x1a4)]('open',_0x4c4ab2)),this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)](_0x7e5f6e(0x191),_0x44da7d=>this['raise'](_0x7e5f6e(0x191),_0x44da7d)),this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)](_0x7e5f6e(0x1cb),_0x1b918b=>this[_0x7e5f6e(0x1a4)](_0x7e5f6e(0x1cb),_0x1b918b));const _0x2d1afa=()=>{_0x5d6ba7(),_0xb9ef3();},_0x41632c=_0x6ff57c=>{_0x2976b1?_0x1151d3(_0x6ff57c):_0x5d6ba7(),_0xb9ef3();};this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)]('open',_0x2d1afa,{'once':!![]}),this[_0x7e5f6e(0x196)][_0x7e5f6e(0x1d1)](_0x7e5f6e(0x191),_0x41632c,{'once':!![]});const _0xb9ef3=()=>{const _0x469c06=_0x7e5f6e;var _0x6103,_0x5a6292;(_0x6103=this[_0x469c06(0x196)])===null||_0x6103===void 0x0?void 0x0:_0x6103[_0x469c06(0x1b0)](_0x469c06(0x1b7),_0x2d1afa),(_0x5a6292=this[_0x469c06(0x196)])===null||_0x5a6292===void 0x0?void 0x0:_0x5a6292['removeEventListener'](_0x469c06(0x191),_0x41632c);};});});}[a0_0x37cd93(0x1d9)](_0x153b58,_0x979190){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x497d17,_0xf016e0)=>{const _0xa7bf9e=a0_0xd44d;if(this[_0xa7bf9e(0x196)]==undefined||this[_0xa7bf9e(0x196)]['readyState']===ws_1['default'][_0xa7bf9e(0x1d5)]||this['socket'][_0xa7bf9e(0x1ad)]===ws_1[_0xa7bf9e(0x18f)][_0xa7bf9e(0x1a7)])return _0xf016e0(new Error(_0xa7bf9e(0x1bd)));this[_0xa7bf9e(0x196)][_0xa7bf9e(0x1cb)](_0x153b58,_0x979190);const _0x56addd=()=>{_0x497d17(),_0x37aecc();},_0x3e5fc8=_0xa00853=>{_0xf016e0(_0xa00853),_0x37aecc();};this[_0xa7bf9e(0x196)][_0xa7bf9e(0x1d1)](_0xa7bf9e(0x1cb),_0x56addd,{'once':!![]}),this['socket'][_0xa7bf9e(0x1d1)](_0xa7bf9e(0x191),_0x3e5fc8,{'once':!![]});const _0x37aecc=()=>{const _0x5b0dca=_0xa7bf9e;var _0x42f277,_0x482326;(_0x42f277=this[_0x5b0dca(0x196)])===null||_0x42f277===void 0x0?void 0x0:_0x42f277[_0x5b0dca(0x1b0)](_0x5b0dca(0x1cb),_0x56addd),(_0x482326=this[_0x5b0dca(0x196)])===null||_0x482326===void 0x0?void 0x0:_0x482326[_0x5b0dca(0x1b0)](_0x5b0dca(0x191),_0x3e5fc8);};});});}get[a0_0x37cd93(0x1a8)](){const _0x1f1857=a0_0x37cd93;var _0xa57891;switch((_0xa57891=this[_0x1f1857(0x196)])===null||_0xa57891===void 0x0?void 0x0:_0xa57891[_0x1f1857(0x1ad)]){case ws_1[_0x1f1857(0x18f)]['CONNECTING']:return _0x1f1857(0x195);case ws_1['default'][_0x1f1857(0x19d)]:return this['handshakeStatus']===_0x1f1857(0x1b5)?_0x1f1857(0x1b7):_0x1f1857(0x1d4);case ws_1['default'][_0x1f1857(0x1d5)]:return _0x1f1857(0x1ca);case ws_1[_0x1f1857(0x18f)][_0x1f1857(0x1a7)]:default:return'closed';}}[a0_0x37cd93(0x1d6)](_0xe2cffa,_0xb047b7,_0xcba01e,_0x4a811f=0x5*0x3e8){const _0x4733c5=a0_0x37cd93;if(this['socket']==undefined||this[_0x4733c5(0x1a8)]!==_0x4733c5(0x1b7))throw new Error(_0x4733c5(0x1a6));if(['handshake',_0x4733c5(0x1b7),'error','close','*']['includes'](_0xe2cffa))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22');const _0x2c312a=_0xcba01e==undefined?0x0:this[_0x4733c5(0x194)],_0x4e2161=Buffer[_0x4733c5(0x1b1)](_0xe2cffa,_0x4733c5(0x1c6));if(_0x4e2161[_0x4733c5(0x1a3)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0xcba01e!=undefined){this['requestId']=(this[_0x4733c5(0x194)]+0x1)%0x80||0x1;const _0x8e8fe0=setTimeout(()=>{const _0xb90deb=_0x4733c5;delete this[_0xb90deb(0x19c)][_0x2c312a],_0xcba01e(new Error(_0xb90deb(0x18e)));},_0x4a811f);this[_0x4733c5(0x19c)][_0x2c312a]=_0x41251e=>{if(!(_0x41251e instanceof Error))clearTimeout(_0x8e8fe0);_0xcba01e(_0x41251e);};}const _0x3ec7bb=Buffer[_0x4733c5(0x197)]([Buffer[_0x4733c5(0x1b1)]([_0x2c312a|0x80,_0x4e2161[_0x4733c5(0x1a3)]]),_0x4e2161,this[_0x4733c5(0x1d0)](_0xb047b7)]);this[_0x4733c5(0x196)][_0x4733c5(0x1c8)](_0x3ec7bb);}['handle']({data:_0x4caa3d}){const _0x31fba1=a0_0x37cd93;var _0x217c84,_0x21cbc0,_0x389081;let _0x551c2b=Buffer['alloc'](0x0);if(_0x4caa3d instanceof Buffer)_0x551c2b=_0x4caa3d;if(typeof _0x4caa3d===_0x31fba1(0x1b9))_0x551c2b=Buffer[_0x31fba1(0x1b1)](_0x4caa3d,_0x31fba1(0x1c6));if(_0x4caa3d instanceof ArrayBuffer)_0x551c2b=Buffer['from'](_0x4caa3d);if(Array[_0x31fba1(0x193)](_0x4caa3d))_0x551c2b=Buffer[_0x31fba1(0x197)](_0x4caa3d);if(this['handshakeStatus']===_0x31fba1(0x1c5)){const {pingInterval:_0x31828f}=this[_0x31fba1(0x1be)](_0x551c2b);this[_0x31fba1(0x1ab)]=_0x31828f+0x1f4;const _0x104480=this['encode'](this['handshakeData']===undefined?null:this['handshakeData']);(_0x217c84=this[_0x31fba1(0x196)])===null||_0x217c84===void 0x0?void 0x0:_0x217c84['send'](_0x104480),this[_0x31fba1(0x1c2)]=_0x31fba1(0x1ac);return;}else{if(this[_0x31fba1(0x1c2)]==='sent-info'){this[_0x31fba1(0x1c2)]=_0x31fba1(0x1b5);return;}}const _0x238946=_0x551c2b[_0x31fba1(0x1af)](0x0),_0x27e5ee=_0x238946&0x7f,_0x137a18=(_0x238946&0x80)!==0x0;if(_0x137a18){const _0x2ef7db=_0x551c2b[_0x31fba1(0x1af)](0x1),_0x7849e1=_0x551c2b[_0x31fba1(0x1ae)](0x2,0x2+_0x2ef7db)['toString'](_0x31fba1(0x1c6));if([_0x31fba1(0x1d4),_0x31fba1(0x1b7),_0x31fba1(0x191),_0x31fba1(0x1cb),'*'][_0x31fba1(0x1a5)](_0x7849e1))return;const _0x3fd65d=this['decode'](_0x551c2b[_0x31fba1(0x1ae)](0x2+_0x2ef7db)),_0x11f608=(_0x21cbc0=this['handlers'][_0x7849e1])!==null&&_0x21cbc0!==void 0x0?_0x21cbc0:[];let _0x3120a0=![];const _0x3887dc=_0x1460bc=>{const _0xdb8162=_0x31fba1;var _0x247ef8;if(_0x27e5ee===0x0&&_0x3120a0)return;if(_0x1460bc===undefined)return;const _0x19f128=Buffer[_0xdb8162(0x197)]([Buffer['from']([_0x27e5ee&0x7f]),this[_0xdb8162(0x1d0)](_0x1460bc)]);(_0x247ef8=this[_0xdb8162(0x196)])===null||_0x247ef8===void 0x0?void 0x0:_0x247ef8[_0xdb8162(0x1c8)](_0x19f128),_0x3120a0=!![];};for(const _0x1ebd56 of _0x11f608)_0x1ebd56[_0x31fba1(0x1a9)](undefined,_0x3fd65d,_0x3887dc);const _0x4070e7=(_0x389081=this['handlers']['*'])!==null&&_0x389081!==void 0x0?_0x389081:[];for(const _0xcb38fb of _0x4070e7)_0xcb38fb[_0x31fba1(0x1a9)](undefined,_0x7849e1,_0x3fd65d);if(!_0x3120a0&&_0x27e5ee!==0x0){}return;}const _0x5cbdf7=this[_0x31fba1(0x19c)][_0x27e5ee];if(_0x5cbdf7==undefined)return;const _0xad92f5=this[_0x31fba1(0x1be)](_0x551c2b[_0x31fba1(0x1ae)](0x1));_0x5cbdf7(_0xad92f5);}[a0_0x37cd93(0x1d0)](_0x458a28){const _0x571e66=a0_0x37cd93;return Buffer['from'](JSON[_0x571e66(0x1c7)](_0x458a28),'utf-8');}[a0_0x37cd93(0x1be)](_0x39be97){const _0x283a88=a0_0x37cd93;return JSON[_0x283a88(0x18d)](_0x39be97[_0x283a88(0x1c4)](_0x283a88(0x1c6)));}['on'](_0x2750ae,_0x12bc37){const _0x41a32f=a0_0x37cd93;if(this[_0x41a32f(0x198)][_0x2750ae]==undefined)this[_0x41a32f(0x198)][_0x2750ae]=[];this['handlers'][_0x2750ae]['push'](_0x12bc37);}[a0_0x37cd93(0x1bf)](_0x42edc5,_0xd146a5){const _0x3f70b9=a0_0x37cd93;if(_0xd146a5==undefined){delete this['handlers'][_0x42edc5];return;}const _0x4f45d9=this[_0x3f70b9(0x198)][_0x42edc5],_0x5b5ce9=(_0x4f45d9!==null&&_0x4f45d9!==void 0x0?_0x4f45d9:[])[_0x3f70b9(0x19b)](_0x21795b=>_0x21795b===_0xd146a5);if(_0x5b5ce9===-0x1)throw new Error(_0x3f70b9(0x1da)+_0x42edc5+_0x3f70b9(0x199));_0x4f45d9[_0x3f70b9(0x190)](_0x5b5ce9,0x1);}[a0_0x37cd93(0x1a4)](_0x9d566d,_0x2d9c06){var _0x5cfa01,_0x8a6222;const _0x438951=(_0x5cfa01=this['handlers'][_0x9d566d])!==null&&_0x5cfa01!==void 0x0?_0x5cfa01:[];for(const _0x341906 of _0x438951)_0x341906(_0x2d9c06);const _0x51b7ab=(_0x8a6222=this['handlers']['*'])!==null&&_0x8a6222!==void 0x0?_0x8a6222:[];for(const _0x3e2adb of _0x51b7ab)_0x3e2adb(_0x9d566d,_0x2d9c06);}}function a0_0x66db(){const _0x426e9c=['error','url','isArray','requestId','connecting','socket','concat','handlers','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','defineProperty','findIndex','pendingRequests','OPEN','116796jJnXKi','1531196ZYPrbA','handshakeData','next','81051IVvXVV','length','raise','includes','The\x20websocket\x20is\x20not\x20connected','CLOSED','status','call','75dqJFVQ','heartbeatInterval','sent-info','readyState','slice','readUInt8','removeEventListener','from','__awaiter','heartbeatTimeout','reconnectTimeout','completed','removeAllListeners','open','__esModule','string','handle','251658dWyscu','2495160YSieVM','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','decode','off','3865480OPVLPk','1780568OmPyMg','handshakeStatus','value','toString','waiting','utf-8','stringify','send','message','closing','close','7NIfwAP','apply','__importDefault','connect','encode','addEventListener','checkHeartbeat','32ZSYBjj','handshake','CLOSING','emit','ping','pong','disconnect','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','then','parse','Timeout','default','splice'];a0_0x66db=function(){return _0x426e9c;};return a0_0x66db();}exports['default']=Client;