'use strict';function a0_0x46c4(_0x491eb1,_0x4ff0e0){const _0x29e4e3=a0_0x29e4();return a0_0x46c4=function(_0x46c4d1,_0x284888){_0x46c4d1=_0x46c4d1-0x179;let _0x1eba7d=_0x29e4e3[_0x46c4d1];return _0x1eba7d;},a0_0x46c4(_0x491eb1,_0x4ff0e0);}const a0_0x140292=a0_0x46c4;(function(_0x4cb11e,_0x41dec8){const _0x147d14=a0_0x46c4,_0x349612=_0x4cb11e();while(!![]){try{const _0x14335e=parseInt(_0x147d14(0x1b9))/0x1+parseInt(_0x147d14(0x1b6))/0x2*(parseInt(_0x147d14(0x1a8))/0x3)+parseInt(_0x147d14(0x1ad))/0x4+parseInt(_0x147d14(0x1bd))/0x5*(-parseInt(_0x147d14(0x1c3))/0x6)+-parseInt(_0x147d14(0x1a2))/0x7*(-parseInt(_0x147d14(0x18d))/0x8)+-parseInt(_0x147d14(0x1b1))/0x9+-parseInt(_0x147d14(0x1c8))/0xa;if(_0x14335e===_0x41dec8)break;else _0x349612['push'](_0x349612['shift']());}catch(_0x294045){_0x349612['push'](_0x349612['shift']());}}}(a0_0x29e4,0x806d6));var __awaiter=this&&this[a0_0x140292(0x18c)]||function(_0x284968,_0x495492,_0x127305,_0x826b0d){function _0x228212(_0x2597f1){return _0x2597f1 instanceof _0x127305?_0x2597f1:new _0x127305(function(_0xb00f04){_0xb00f04(_0x2597f1);});}return new(_0x127305||(_0x127305=Promise))(function(_0x39ded0,_0x4bd78e){const _0x449341=a0_0x46c4;function _0x288142(_0x5e3ce7){const _0x2adc01=a0_0x46c4;try{_0x338ff5(_0x826b0d[_0x2adc01(0x19d)](_0x5e3ce7));}catch(_0x1f1d36){_0x4bd78e(_0x1f1d36);}}function _0x544bad(_0x1e9cf9){const _0x33cc20=a0_0x46c4;try{_0x338ff5(_0x826b0d[_0x33cc20(0x1be)](_0x1e9cf9));}catch(_0x591fe1){_0x4bd78e(_0x591fe1);}}function _0x338ff5(_0x1f2a1c){const _0x3f2719=a0_0x46c4;_0x1f2a1c[_0x3f2719(0x1bc)]?_0x39ded0(_0x1f2a1c[_0x3f2719(0x18a)]):_0x228212(_0x1f2a1c['value'])[_0x3f2719(0x1a3)](_0x288142,_0x544bad);}_0x338ff5((_0x826b0d=_0x826b0d[_0x449341(0x1c6)](_0x284968,_0x495492||[]))[_0x449341(0x19d)]());});},__importDefault=this&&this[a0_0x140292(0x1c5)]||function(_0x44e333){return _0x44e333&&_0x44e333['__esModule']?_0x44e333:{'default':_0x44e333};};Object[a0_0x140292(0x1c2)](exports,a0_0x140292(0x191),{'value':!![]});const ws_1=__importDefault(require('ws'));class Client{constructor(){const _0x66dab7=a0_0x140292;this[_0x66dab7(0x1af)]=0x5*0x3e8+0x1f4,this[_0x66dab7(0x1bb)]=null,this['handshakeStatus']=_0x66dab7(0x1a4),this[_0x66dab7(0x1b8)]=0x1,this[_0x66dab7(0x192)]={},this['handlers']={},this[_0x66dab7(0x195)]=()=>{const _0x81e19=_0x66dab7;if(this[_0x81e19(0x1b2)]!=undefined)clearTimeout(this['heartbeatTimeout']);this[_0x81e19(0x1b2)]=setTimeout(()=>{const _0x37f738=_0x81e19;var _0x78a515;if(this['socket']!=undefined&&this['socket'][_0x37f738(0x180)]!==ws_1[_0x37f738(0x18e)][_0x37f738(0x1a6)])return;(_0x78a515=this[_0x37f738(0x1ab)])===null||_0x78a515===void 0x0?void 0x0:_0x78a515[_0x37f738(0x179)]();},this[_0x81e19(0x1af)]);};}[a0_0x140292(0x1aa)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x4b51eb,allowReject:_0x1491f9,handshakeData:_0x3a9548,reconnectTimeout:_0x5d9d78}={}){return new Promise((_0x207242,_0x9881c2)=>{const _0x441704=a0_0x46c4;if(this[_0x441704(0x1ab)]!=undefined&&this['socket'][_0x441704(0x180)]===ws_1[_0x441704(0x18e)][_0x441704(0x1a6)]){if(_0x1491f9!==!![])_0x9881c2(new Error(_0x441704(0x194)));else _0x207242();}this[_0x441704(0x1ab)]!=undefined&&(this[_0x441704(0x1ab)][_0x441704(0x17f)](),this[_0x441704(0x1ab)]['off'](_0x441704(0x1c4),this['checkHeartbeat']),this[_0x441704(0x17c)]=_0x441704(0x1a4));if(this[_0x441704(0x1a5)]==undefined&&_0x4b51eb==undefined)_0x9881c2(new Error(_0x441704(0x1a0)));this[_0x441704(0x1a5)]=_0x4b51eb||this[_0x441704(0x1a5)];if(_0x5d9d78!==undefined)this[_0x441704(0x1bb)]=_0x5d9d78;if(_0x3a9548!==undefined)this['handshakeData']=_0x3a9548;this['socket']=new ws_1[(_0x441704(0x18e))](this['url']),this['socket'][_0x441704(0x181)](_0x441704(0x19f),this[_0x441704(0x195)]),this[_0x441704(0x1ab)][_0x441704(0x181)]('message',this[_0x441704(0x195)]),this[_0x441704(0x1ab)]['on'](_0x441704(0x1c4),_0x31eaba=>{const _0x19d891=_0x441704;var _0x144e2c;(_0x144e2c=this[_0x19d891(0x1ab)])===null||_0x144e2c===void 0x0?void 0x0:_0x144e2c['pong'](_0x31eaba),this[_0x19d891(0x195)]();}),this[_0x441704(0x1ab)][_0x441704(0x181)]('close',()=>{const _0x3455c7=_0x441704;if(this[_0x3455c7(0x1b2)]!=undefined)clearTimeout(this[_0x3455c7(0x1b2)]);});if(this[_0x441704(0x1bb)]!=undefined)this[_0x441704(0x1ab)][_0x441704(0x181)](_0x441704(0x179),()=>{const _0x237ca9=_0x441704;setTimeout(()=>this[_0x237ca9(0x1aa)](),this[_0x237ca9(0x1bb)]);});this[_0x441704(0x1ab)][_0x441704(0x181)]('message',_0x551a9a=>this['handle'](_0x551a9a)),this[_0x441704(0x1ab)][_0x441704(0x181)](_0x441704(0x19f),_0x16d411=>this['raise']('open',_0x16d411)),this[_0x441704(0x1ab)][_0x441704(0x181)](_0x441704(0x17b),_0x66dfde=>this[_0x441704(0x187)](_0x441704(0x17b),_0x66dfde)),this[_0x441704(0x1ab)][_0x441704(0x181)](_0x441704(0x179),_0x1524d9=>this[_0x441704(0x187)](_0x441704(0x179),_0x1524d9));const _0x3b7599=()=>{_0x207242(),_0xb89137();},_0x10bd0f=_0x166dfe=>{_0x1491f9?_0x9881c2(_0x166dfe):_0x207242(),_0xb89137();};this[_0x441704(0x1ab)]['addEventListener'](_0x441704(0x19f),_0x3b7599,{'once':!![]}),this[_0x441704(0x1ab)]['addEventListener'](_0x441704(0x17b),_0x10bd0f,{'once':!![]});const _0xb89137=()=>{const _0x16b579=_0x441704;var _0x2e1478,_0x262d60;(_0x2e1478=this[_0x16b579(0x1ab)])===null||_0x2e1478===void 0x0?void 0x0:_0x2e1478[_0x16b579(0x1b3)]('open',_0x3b7599),(_0x262d60=this[_0x16b579(0x1ab)])===null||_0x262d60===void 0x0?void 0x0:_0x262d60[_0x16b579(0x1b3)](_0x16b579(0x17b),_0x10bd0f);};});});}[a0_0x140292(0x189)](_0x3f2d09,_0x515b88){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x357e6e,_0x476b98)=>{const _0x27c07c=a0_0x46c4;if(this[_0x27c07c(0x1ab)]==undefined||this[_0x27c07c(0x1ab)]['readyState']===ws_1[_0x27c07c(0x18e)][_0x27c07c(0x1b0)]||this[_0x27c07c(0x1ab)][_0x27c07c(0x180)]===ws_1[_0x27c07c(0x18e)][_0x27c07c(0x1c0)])return _0x476b98(new Error(_0x27c07c(0x1b5)));this[_0x27c07c(0x1ab)][_0x27c07c(0x179)](_0x3f2d09,_0x515b88);const _0x3c0141=()=>{_0x357e6e(),_0x15d49c();},_0x2543d0=_0x4cbb94=>{_0x476b98(_0x4cbb94),_0x15d49c();};this['socket'][_0x27c07c(0x181)](_0x27c07c(0x179),_0x3c0141,{'once':!![]}),this[_0x27c07c(0x1ab)]['addEventListener'](_0x27c07c(0x17b),_0x2543d0,{'once':!![]});const _0x15d49c=()=>{const _0xa012b1=_0x27c07c;var _0x498492,_0x45a0cf;(_0x498492=this[_0xa012b1(0x1ab)])===null||_0x498492===void 0x0?void 0x0:_0x498492[_0xa012b1(0x1b3)]('close',_0x3c0141),(_0x45a0cf=this['socket'])===null||_0x45a0cf===void 0x0?void 0x0:_0x45a0cf['removeEventListener']('error',_0x2543d0);};});});}get['status'](){const _0x365dfe=a0_0x140292;var _0x59a729;switch((_0x59a729=this[_0x365dfe(0x1ab)])===null||_0x59a729===void 0x0?void 0x0:_0x59a729[_0x365dfe(0x180)]){case ws_1[_0x365dfe(0x18e)][_0x365dfe(0x1a7)]:return _0x365dfe(0x1a9);case ws_1[_0x365dfe(0x18e)][_0x365dfe(0x1a6)]:return this[_0x365dfe(0x17c)]===_0x365dfe(0x183)?_0x365dfe(0x19f):'handshake';case ws_1['default'][_0x365dfe(0x1b0)]:return _0x365dfe(0x185);case ws_1[_0x365dfe(0x18e)][_0x365dfe(0x1c0)]:default:return'closed';}}[a0_0x140292(0x19b)](_0x5ae099,_0x30d000,_0x1dc2bf,_0x4d9239=0x5*0x3e8){const _0x2f7335=a0_0x140292;if(this[_0x2f7335(0x1ab)]==undefined||this[_0x2f7335(0x190)]!=='open')throw new Error(_0x2f7335(0x199));if([_0x2f7335(0x17d),_0x2f7335(0x19f),_0x2f7335(0x17b),_0x2f7335(0x179),'*'][_0x2f7335(0x1a1)](_0x5ae099))throw new Error(_0x2f7335(0x196));const _0x4a181d=_0x1dc2bf==undefined?0x0:this[_0x2f7335(0x1b8)],_0x55e638=Buffer['from'](_0x5ae099,_0x2f7335(0x18f));if(_0x55e638[_0x2f7335(0x198)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0x1dc2bf!=undefined){this[_0x2f7335(0x1b8)]=(this['requestId']+0x1)%0x80||0x1;const _0x3679c1=setTimeout(()=>{const _0x455ca2=_0x2f7335;delete this['pendingRequests'][_0x4a181d],_0x1dc2bf(new Error(_0x455ca2(0x1c7)));},_0x4d9239);this[_0x2f7335(0x192)][_0x4a181d]=_0xbc6ae4=>{if(!(_0xbc6ae4 instanceof Error))clearTimeout(_0x3679c1);_0x1dc2bf(_0xbc6ae4);};}const _0x3ac1d5=Buffer[_0x2f7335(0x19a)]([Buffer[_0x2f7335(0x17a)]([_0x4a181d|0x80,_0x55e638[_0x2f7335(0x198)]]),_0x55e638,this['encode'](_0x30d000)]);this[_0x2f7335(0x1ab)]['send'](_0x3ac1d5);}['handle']({data:_0x255c26}){const _0x1c170a=a0_0x140292;var _0x4e21cf,_0x2e9ff9,_0x3eac8b;let _0xfedfc2=Buffer['alloc'](0x0);if(_0x255c26 instanceof Buffer)_0xfedfc2=_0x255c26;if(typeof _0x255c26===_0x1c170a(0x1b7))_0xfedfc2=Buffer[_0x1c170a(0x17a)](_0x255c26,_0x1c170a(0x18f));if(_0x255c26 instanceof ArrayBuffer)_0xfedfc2=Buffer[_0x1c170a(0x17a)](_0x255c26);if(Array[_0x1c170a(0x188)](_0x255c26))_0xfedfc2=Buffer[_0x1c170a(0x19a)](_0x255c26);if(this[_0x1c170a(0x17c)]===_0x1c170a(0x1a4)){const {pingInterval:_0x113e13}=this[_0x1c170a(0x1ac)](_0xfedfc2);this[_0x1c170a(0x1af)]=_0x113e13+0x1f4;const _0x39d172=this[_0x1c170a(0x19e)](this[_0x1c170a(0x184)]===undefined?null:this[_0x1c170a(0x184)]);(_0x4e21cf=this[_0x1c170a(0x1ab)])===null||_0x4e21cf===void 0x0?void 0x0:_0x4e21cf[_0x1c170a(0x1ae)](_0x39d172),this[_0x1c170a(0x17c)]=_0x1c170a(0x1bf);return;}else{if(this[_0x1c170a(0x17c)]===_0x1c170a(0x1bf)){this[_0x1c170a(0x17c)]=_0x1c170a(0x183);return;}}const _0x288290=_0xfedfc2['readUInt8'](0x0),_0xbac69a=_0x288290&0x7f,_0x3ac6a9=(_0x288290&0x80)!==0x0;if(_0x3ac6a9){const _0x2d9257=_0xfedfc2[_0x1c170a(0x193)](0x1),_0x58c81c=_0xfedfc2[_0x1c170a(0x1ba)](0x2,0x2+_0x2d9257)['toString'](_0x1c170a(0x18f));if([_0x1c170a(0x17d),_0x1c170a(0x19f),_0x1c170a(0x17b),'close','*'][_0x1c170a(0x1a1)](_0x58c81c))return;const _0x24d93b=this[_0x1c170a(0x1ac)](_0xfedfc2[_0x1c170a(0x1ba)](0x2+_0x2d9257)),_0x3ed892=(_0x2e9ff9=this['handlers'][_0x58c81c])!==null&&_0x2e9ff9!==void 0x0?_0x2e9ff9:[];let _0x5f351f=![];const _0x34306a=_0x395a39=>{const _0xdfbd37=_0x1c170a;var _0x2bcb1d;if(_0xbac69a===0x0&&_0x5f351f)return;if(_0x395a39===undefined)return;const _0x344e50=Buffer[_0xdfbd37(0x19a)]([Buffer[_0xdfbd37(0x17a)]([_0xbac69a&0x7f]),this[_0xdfbd37(0x19e)](_0x395a39)]);(_0x2bcb1d=this['socket'])===null||_0x2bcb1d===void 0x0?void 0x0:_0x2bcb1d['send'](_0x344e50),_0x5f351f=!![];};for(const _0x57d4a0 of _0x3ed892)_0x57d4a0[_0x1c170a(0x197)](undefined,_0x24d93b,_0x34306a);const _0x13af88=(_0x3eac8b=this[_0x1c170a(0x186)]['*'])!==null&&_0x3eac8b!==void 0x0?_0x3eac8b:[];for(const _0x354217 of _0x13af88)_0x354217['call'](undefined,_0x58c81c,_0x24d93b);if(!_0x5f351f&&_0xbac69a!==0x0){}return;}const _0x1298d0=this[_0x1c170a(0x192)][_0xbac69a];if(_0x1298d0==undefined)return;const _0x57241e=this['decode'](_0xfedfc2[_0x1c170a(0x1ba)](0x1));_0x1298d0(_0x57241e);}[a0_0x140292(0x19e)](_0xa81e48){const _0x21b42a=a0_0x140292;return Buffer['from'](JSON[_0x21b42a(0x1c1)](_0xa81e48),'utf-8');}[a0_0x140292(0x1ac)](_0x4caeff){const _0xac4d77=a0_0x140292;return JSON['parse'](_0x4caeff[_0xac4d77(0x182)](_0xac4d77(0x18f)));}['on'](_0x45e767,_0x533540){const _0x3f348b=a0_0x140292;if(this[_0x3f348b(0x186)][_0x45e767]==undefined)this[_0x3f348b(0x186)][_0x45e767]=[];this['handlers'][_0x45e767]['push'](_0x533540);}[a0_0x140292(0x18b)](_0x592715,_0x2d9236){const _0xeaef1e=a0_0x140292;if(_0x2d9236==undefined){delete this[_0xeaef1e(0x186)][_0x592715];return;}const _0x270e84=this['handlers'][_0x592715],_0x1421b0=(_0x270e84!==null&&_0x270e84!==void 0x0?_0x270e84:[])[_0xeaef1e(0x17e)](_0x558718=>_0x558718===_0x2d9236);if(_0x1421b0===-0x1)throw new Error('Attempted\x20to\x20remove\x20an\x20handler\x20for\x20'+_0x592715+_0xeaef1e(0x19c));_0x270e84[_0xeaef1e(0x1b4)](_0x1421b0,0x1);}[a0_0x140292(0x187)](_0x3af97a,_0x5e14bd){const _0x31fa4f=a0_0x140292;var _0x3c8742,_0x526112;const _0x52c329=(_0x3c8742=this[_0x31fa4f(0x186)][_0x3af97a])!==null&&_0x3c8742!==void 0x0?_0x3c8742:[];for(const _0x7184de of _0x52c329)_0x7184de(_0x5e14bd);const _0x981e87=(_0x526112=this[_0x31fa4f(0x186)]['*'])!==null&&_0x526112!==void 0x0?_0x526112:[];for(const _0x357199 of _0x981e87)_0x357199(_0x3af97a,_0x5e14bd);}}function a0_0x29e4(){const _0x5ac72e=['throw','sent-info','CLOSED','stringify','defineProperty','1828428gefMjS','ping','__importDefault','apply','Timeout','4263030RmeQmt','close','from','error','handshakeStatus','handshake','findIndex','removeAllListeners','readyState','addEventListener','toString','completed','handshakeData','closing','handlers','raise','isArray','disconnect','value','off','__awaiter','5304HOPnRT','default','utf-8','status','__esModule','pendingRequests','readUInt8','The\x20websocket\x20is\x20already\x20connected','checkHeartbeat','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','call','length','The\x20websocket\x20is\x20not\x20connected','concat','emit','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','next','encode','open','No\x20url\x20specified','includes','8365bzNiHC','then','waiting','url','OPEN','CONNECTING','48939yKsXWA','connecting','connect','socket','decode','849480DwjCOs','send','heartbeatInterval','CLOSING','874323szUGIL','heartbeatTimeout','removeEventListener','splice','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','34vAjAso','string','requestId','376988TTmfqK','slice','reconnectTimeout','done','10ovjRQD'];a0_0x29e4=function(){return _0x5ac72e;};return a0_0x29e4();}exports[a0_0x140292(0x18e)]=Client;