'use strict';const a0_0x2d97d7=a0_0x47da;(function(_0x5014f7,_0x401323){const _0x353af4=a0_0x47da,_0x3d2310=_0x5014f7();while(!![]){try{const _0x42285c=parseInt(_0x353af4(0x111))/0x1+parseInt(_0x353af4(0x160))/0x2*(-parseInt(_0x353af4(0x15c))/0x3)+-parseInt(_0x353af4(0x136))/0x4+-parseInt(_0x353af4(0x142))/0x5*(parseInt(_0x353af4(0x14c))/0x6)+-parseInt(_0x353af4(0x12e))/0x7+parseInt(_0x353af4(0x138))/0x8+-parseInt(_0x353af4(0x150))/0x9*(-parseInt(_0x353af4(0x13c))/0xa);if(_0x42285c===_0x401323)break;else _0x3d2310['push'](_0x3d2310['shift']());}catch(_0x5746d7){_0x3d2310['push'](_0x3d2310['shift']());}}}(a0_0x22dd,0xceeaf));var __awaiter=this&&this[a0_0x2d97d7(0x14d)]||function(_0x56020a,_0x3205d8,_0x1f4464,_0x37f619){function _0x41647d(_0x99b55b){return _0x99b55b instanceof _0x1f4464?_0x99b55b:new _0x1f4464(function(_0x15d9e2){_0x15d9e2(_0x99b55b);});}return new(_0x1f4464||(_0x1f4464=Promise))(function(_0x163d81,_0x54c967){const _0x433149=a0_0x47da;function _0xf9e5ee(_0x15065f){const _0x363320=a0_0x47da;try{_0x38be4b(_0x37f619[_0x363320(0x143)](_0x15065f));}catch(_0x86f8e9){_0x54c967(_0x86f8e9);}}function _0x4d88f8(_0x566bbe){const _0x58ea26=a0_0x47da;try{_0x38be4b(_0x37f619[_0x58ea26(0x13d)](_0x566bbe));}catch(_0x4133f7){_0x54c967(_0x4133f7);}}function _0x38be4b(_0x539666){const _0x3da101=a0_0x47da;_0x539666[_0x3da101(0x13f)]?_0x163d81(_0x539666[_0x3da101(0x134)]):_0x41647d(_0x539666[_0x3da101(0x134)])[_0x3da101(0x156)](_0xf9e5ee,_0x4d88f8);}_0x38be4b((_0x37f619=_0x37f619['apply'](_0x56020a,_0x3205d8||[]))[_0x433149(0x143)]());});},__importDefault=this&&this[a0_0x2d97d7(0x137)]||function(_0x1e34a8){const _0xb014c8=a0_0x2d97d7;return _0x1e34a8&&_0x1e34a8[_0xb014c8(0x13a)]?_0x1e34a8:{'default':_0x1e34a8};};Object[a0_0x2d97d7(0x128)](exports,'__esModule',{'value':!![]});const ws_1=__importDefault(require('ws'));function a0_0x22dd(){const _0x57cf47=['slice','status','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','off','concat','raise','handle','addEventListener','send','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close','splice','ping','reconnectTimeout','completed','requestId','stringify','socket','defineProperty','CLOSED','connecting','url','from','Timeout','3190502LgEUNR','heartbeatTimeout','default','push','closed','removeEventListener','value','message','5394604jJZqYL','__importDefault','5041280GgrmFO','readyState','__esModule','readUInt8','66410xBiLAl','throw','The\x20websocket\x20is\x20not\x20connected','done','checkHeartbeat','call','5mckrUH','next','connect','OPEN','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','alloc','handshakeStatus','CLOSING','length','findIndex','9113082baYzpD','__awaiter','handshake','isArray','6282QPycTY','handshakeData','pong','toString','CONNECTING','handlers','then','decode','heartbeatInterval','No\x20url\x20specified','encode','includes','39cKcboS','error','waiting','removeAllListeners','193690lkcleB','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','disconnect','164226SKnYFG','close','open','utf-8','sent-info','pendingRequests'];a0_0x22dd=function(){return _0x57cf47;};return a0_0x22dd();}function a0_0x47da(_0x2ef085,_0x2be6d9){const _0x22dd50=a0_0x22dd();return a0_0x47da=function(_0x47dab1,_0x42ac34){_0x47dab1=_0x47dab1-0x10f;let _0x50c72d=_0x22dd50[_0x47dab1];return _0x50c72d;},a0_0x47da(_0x2ef085,_0x2be6d9);}class Client{constructor(){const _0x1bb7f1=a0_0x2d97d7;this[_0x1bb7f1(0x158)]=0x5*0x3e8+0x1f4,this[_0x1bb7f1(0x123)]=null,this[_0x1bb7f1(0x148)]=_0x1bb7f1(0x15e),this['requestId']=0x1,this[_0x1bb7f1(0x116)]={},this[_0x1bb7f1(0x155)]={},this['checkHeartbeat']=()=>{const _0x4470f7=_0x1bb7f1;if(this['heartbeatTimeout']!=undefined)clearTimeout(this[_0x4470f7(0x12f)]);this[_0x4470f7(0x12f)]=setTimeout(()=>{const _0x118791=_0x4470f7;var _0x66a9e2;if(this[_0x118791(0x127)]!=undefined&&this[_0x118791(0x127)][_0x118791(0x139)]!==ws_1['default'][_0x118791(0x145)])return;(_0x66a9e2=this['socket'])===null||_0x66a9e2===void 0x0?void 0x0:_0x66a9e2[_0x118791(0x112)]();},this['heartbeatInterval']);};}[a0_0x2d97d7(0x144)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x5eb816,allowReject:_0x4df424,handshakeData:_0x13780,reconnectTimeout:_0x5d0a61}={}){return new Promise((_0x4e1b02,_0xd10c16)=>{const _0x42bd02=a0_0x47da;if(this[_0x42bd02(0x127)]!=undefined&&this[_0x42bd02(0x127)]['readyState']===ws_1[_0x42bd02(0x130)][_0x42bd02(0x145)]){if(_0x4df424!==!![])_0xd10c16(new Error('The\x20websocket\x20is\x20already\x20connected'));else _0x4e1b02();}this[_0x42bd02(0x127)]!=undefined&&(this[_0x42bd02(0x127)][_0x42bd02(0x15f)](),this[_0x42bd02(0x127)]['off'](_0x42bd02(0x122),this[_0x42bd02(0x140)]),this[_0x42bd02(0x148)]='waiting');if(this[_0x42bd02(0x12b)]==undefined&&_0x5eb816==undefined)_0xd10c16(new Error(_0x42bd02(0x159)));this[_0x42bd02(0x12b)]=_0x5eb816||this[_0x42bd02(0x12b)];if(_0x5d0a61!==undefined)this[_0x42bd02(0x123)]=_0x5d0a61;if(_0x13780!==undefined)this[_0x42bd02(0x151)]=_0x13780;this[_0x42bd02(0x127)]=new ws_1[(_0x42bd02(0x130))](this[_0x42bd02(0x12b)]),this['socket'][_0x42bd02(0x11e)](_0x42bd02(0x113),this['checkHeartbeat']),this['socket']['addEventListener'](_0x42bd02(0x135),this['checkHeartbeat']),this[_0x42bd02(0x127)]['on'](_0x42bd02(0x122),_0xe43a57=>{const _0x411b27=_0x42bd02;var _0x413c17;(_0x413c17=this['socket'])===null||_0x413c17===void 0x0?void 0x0:_0x413c17[_0x411b27(0x152)](_0xe43a57),this['checkHeartbeat']();}),this[_0x42bd02(0x127)][_0x42bd02(0x11e)](_0x42bd02(0x112),()=>{const _0x4d6d7e=_0x42bd02;if(this[_0x4d6d7e(0x12f)]!=undefined)clearTimeout(this[_0x4d6d7e(0x12f)]);});if(this[_0x42bd02(0x123)]!=undefined)this['socket']['addEventListener'](_0x42bd02(0x112),()=>{const _0x1703a7=_0x42bd02;setTimeout(()=>this[_0x1703a7(0x144)](),this[_0x1703a7(0x123)]);});this[_0x42bd02(0x127)][_0x42bd02(0x11e)]('message',_0x565e1d=>this[_0x42bd02(0x11d)](_0x565e1d)),this['socket']['addEventListener'](_0x42bd02(0x113),_0x5ac8ad=>this[_0x42bd02(0x11c)]('open',_0x5ac8ad)),this[_0x42bd02(0x127)][_0x42bd02(0x11e)](_0x42bd02(0x15d),_0x34c292=>this[_0x42bd02(0x11c)]('error',_0x34c292)),this[_0x42bd02(0x127)][_0x42bd02(0x11e)](_0x42bd02(0x112),_0x271a2d=>this['raise'](_0x42bd02(0x112),_0x271a2d));const _0x1950a3=()=>{_0x4e1b02(),_0xde4a73();},_0x51054a=_0x12f475=>{_0x4df424?_0xd10c16(_0x12f475):_0x4e1b02(),_0xde4a73();};this['socket'][_0x42bd02(0x11e)](_0x42bd02(0x113),_0x1950a3,{'once':!![]}),this[_0x42bd02(0x127)]['addEventListener'](_0x42bd02(0x15d),_0x51054a,{'once':!![]});const _0xde4a73=()=>{const _0x394910=_0x42bd02;var _0x2223e8,_0x316b41;(_0x2223e8=this[_0x394910(0x127)])===null||_0x2223e8===void 0x0?void 0x0:_0x2223e8[_0x394910(0x133)]('open',_0x1950a3),(_0x316b41=this[_0x394910(0x127)])===null||_0x316b41===void 0x0?void 0x0:_0x316b41[_0x394910(0x133)](_0x394910(0x15d),_0x51054a);};});});}[a0_0x2d97d7(0x110)](_0x16ef50,_0x37b0ea){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x2fd514,_0x53cfc0)=>{const _0x72c9c4=a0_0x47da;if(this['socket']==undefined||this[_0x72c9c4(0x127)][_0x72c9c4(0x139)]===ws_1[_0x72c9c4(0x130)][_0x72c9c4(0x149)]||this[_0x72c9c4(0x127)][_0x72c9c4(0x139)]===ws_1[_0x72c9c4(0x130)][_0x72c9c4(0x129)])return _0x53cfc0(new Error(_0x72c9c4(0x146)));this[_0x72c9c4(0x127)][_0x72c9c4(0x112)](_0x16ef50,_0x37b0ea);const _0x57d2f1=()=>{_0x2fd514(),_0x4fa325();},_0xa4bff8=_0x526ee4=>{_0x53cfc0(_0x526ee4),_0x4fa325();};this[_0x72c9c4(0x127)]['addEventListener']('close',_0x57d2f1,{'once':!![]}),this[_0x72c9c4(0x127)]['addEventListener'](_0x72c9c4(0x15d),_0xa4bff8,{'once':!![]});const _0x4fa325=()=>{const _0x3a864f=_0x72c9c4;var _0x18a45b,_0xf1e8f4;(_0x18a45b=this[_0x3a864f(0x127)])===null||_0x18a45b===void 0x0?void 0x0:_0x18a45b[_0x3a864f(0x133)](_0x3a864f(0x112),_0x57d2f1),(_0xf1e8f4=this[_0x3a864f(0x127)])===null||_0xf1e8f4===void 0x0?void 0x0:_0xf1e8f4[_0x3a864f(0x133)](_0x3a864f(0x15d),_0xa4bff8);};});});}get[a0_0x2d97d7(0x118)](){const _0x2d495b=a0_0x2d97d7;var _0x15ea37;switch((_0x15ea37=this['socket'])===null||_0x15ea37===void 0x0?void 0x0:_0x15ea37['readyState']){case ws_1[_0x2d495b(0x130)][_0x2d495b(0x154)]:return _0x2d495b(0x12a);case ws_1[_0x2d495b(0x130)][_0x2d495b(0x145)]:return this[_0x2d495b(0x148)]==='completed'?_0x2d495b(0x113):_0x2d495b(0x14e);case ws_1[_0x2d495b(0x130)]['CLOSING']:return'closing';case ws_1[_0x2d495b(0x130)][_0x2d495b(0x129)]:default:return _0x2d495b(0x132);}}['emit'](_0x3b4e1b,_0x3ec62c,_0x50a1ba,_0x4478ac=0x5*0x3e8){const _0x15ad7f=a0_0x2d97d7;if(this['socket']==undefined||this[_0x15ad7f(0x118)]!==_0x15ad7f(0x113))throw new Error(_0x15ad7f(0x13e));if([_0x15ad7f(0x14e),'open',_0x15ad7f(0x15d),_0x15ad7f(0x112)][_0x15ad7f(0x15b)](_0x3b4e1b))throw new Error(_0x15ad7f(0x120));const _0x517440=_0x50a1ba==undefined?0x0:this[_0x15ad7f(0x125)],_0x298380=Buffer[_0x15ad7f(0x12c)](_0x3b4e1b,_0x15ad7f(0x114));if(_0x298380[_0x15ad7f(0x14a)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0x50a1ba!=undefined){this[_0x15ad7f(0x125)]=(this[_0x15ad7f(0x125)]+0x1)%0x80||0x1;const _0x22877a=setTimeout(()=>{const _0x5879fd=_0x15ad7f;delete this[_0x5879fd(0x116)][_0x517440],_0x50a1ba(new Error(_0x5879fd(0x12d)));},_0x4478ac);this['pendingRequests'][_0x517440]=_0x252420=>{if(!(_0x252420 instanceof Error))clearTimeout(_0x22877a);_0x50a1ba(_0x252420);};}const _0x4d3d6f=Buffer[_0x15ad7f(0x11b)]([Buffer['from']([_0x517440|0x80,_0x298380[_0x15ad7f(0x14a)]]),_0x298380,this[_0x15ad7f(0x15a)](_0x3ec62c)]);this['socket'][_0x15ad7f(0x11f)](_0x4d3d6f);}['handle']({data:_0x59ad98}){const _0x2cfb0a=a0_0x2d97d7;var _0x41d276,_0x25071a,_0x2007c7;let _0x5b99cd=Buffer[_0x2cfb0a(0x147)](0x0);if(_0x59ad98 instanceof Buffer)_0x5b99cd=_0x59ad98;if(typeof _0x59ad98==='string')_0x5b99cd=Buffer['from'](_0x59ad98,'utf-8');if(_0x59ad98 instanceof ArrayBuffer)_0x5b99cd=Buffer['from'](_0x59ad98);if(Array[_0x2cfb0a(0x14f)](_0x59ad98))_0x5b99cd=Buffer['concat'](_0x59ad98);if(this['handshakeStatus']==='waiting'){const {pingInterval:_0x557803}=this[_0x2cfb0a(0x157)](_0x5b99cd);this[_0x2cfb0a(0x158)]=_0x557803+0x1f4;const _0x40a552=this[_0x2cfb0a(0x15a)](this[_0x2cfb0a(0x151)]===undefined?null:this['handshakeData']);(_0x41d276=this[_0x2cfb0a(0x127)])===null||_0x41d276===void 0x0?void 0x0:_0x41d276['send'](_0x40a552),this[_0x2cfb0a(0x148)]=_0x2cfb0a(0x115);return;}else{if(this[_0x2cfb0a(0x148)]===_0x2cfb0a(0x115)){this[_0x2cfb0a(0x148)]=_0x2cfb0a(0x124);return;}}const _0x1c1871=_0x5b99cd[_0x2cfb0a(0x13b)](0x0),_0x5d74cf=_0x1c1871&0x7f,_0x4227fb=(_0x1c1871&0x80)!==0x0;if(_0x4227fb){const _0xac2a4f=_0x5b99cd[_0x2cfb0a(0x13b)](0x1),_0x270f56=_0x5b99cd['slice'](0x2,0x2+_0xac2a4f)[_0x2cfb0a(0x153)](_0x2cfb0a(0x114));if(['handshake',_0x2cfb0a(0x113),'error','close'][_0x2cfb0a(0x15b)](_0x270f56))return;const _0x43761b=this[_0x2cfb0a(0x157)](_0x5b99cd[_0x2cfb0a(0x117)](0x2+_0xac2a4f)),_0x566851=(_0x25071a=this[_0x2cfb0a(0x155)][_0x270f56])!==null&&_0x25071a!==void 0x0?_0x25071a:[];let _0x9c1d16=![];for(const _0x290236 of _0x566851){const _0x3595a7=_0x290236[_0x2cfb0a(0x141)](undefined,_0x43761b);if(!_0x9c1d16&&_0x3595a7!==undefined&&_0x5d74cf!==0x0){_0x9c1d16=!![];const _0x2444c5=Buffer['concat']([Buffer['from']([_0x5d74cf&0x7f]),this[_0x2cfb0a(0x15a)](_0x3595a7)]);(_0x2007c7=this[_0x2cfb0a(0x127)])===null||_0x2007c7===void 0x0?void 0x0:_0x2007c7[_0x2cfb0a(0x11f)](_0x2444c5);}}if(!_0x9c1d16&&_0x5d74cf!==0x0){}return;}const _0xc92e0d=this[_0x2cfb0a(0x116)][_0x5d74cf];if(_0xc92e0d==undefined)return;const _0x36b8c4=this['decode'](_0x5b99cd[_0x2cfb0a(0x117)](0x1));_0xc92e0d(_0x36b8c4);}['encode'](_0x185aaa){const _0x2c3eb0=a0_0x2d97d7;return Buffer[_0x2c3eb0(0x12c)](JSON[_0x2c3eb0(0x126)](_0x185aaa),'utf-8');}['decode'](_0x143b08){const _0x4d69ef=a0_0x2d97d7;return JSON['parse'](_0x143b08[_0x4d69ef(0x153)]('utf-8'));}['on'](_0x5c4df3,_0x7ad7f5){const _0x511e96=a0_0x2d97d7;if(this[_0x511e96(0x155)][_0x5c4df3]==undefined)this[_0x511e96(0x155)][_0x5c4df3]=[];this['handlers'][_0x5c4df3][_0x511e96(0x131)](_0x7ad7f5);}[a0_0x2d97d7(0x11a)](_0x27fddd,_0x4ae0a6){const _0xf678a6=a0_0x2d97d7;if(_0x4ae0a6==undefined){delete this[_0xf678a6(0x155)][_0x27fddd];return;}const _0x59910e=this['handlers'][_0x27fddd],_0x35f64c=(_0x59910e!==null&&_0x59910e!==void 0x0?_0x59910e:[])[_0xf678a6(0x14b)](_0x5129a3=>_0x5129a3===_0x4ae0a6);if(_0x35f64c===-0x1)throw new Error(_0xf678a6(0x119)+_0x27fddd+_0xf678a6(0x10f));_0x59910e[_0xf678a6(0x121)](_0x35f64c,0x1);}[a0_0x2d97d7(0x11c)](_0x387c6d,_0x2a5783){const _0x18acb9=a0_0x2d97d7;var _0x43a07d;const _0x7c3bea=(_0x43a07d=this[_0x18acb9(0x155)][_0x387c6d])!==null&&_0x43a07d!==void 0x0?_0x43a07d:[];for(const _0xc05c94 of _0x7c3bea)_0xc05c94(_0x2a5783);}}exports['default']=Client;