'use strict';const a0_0x17f6a3=a0_0x289e;(function(_0x8b3708,_0x2b1775){const _0x58fb0e=a0_0x289e,_0x183289=_0x8b3708();while(!![]){try{const _0x10673e=-parseInt(_0x58fb0e(0x10e))/0x1+parseInt(_0x58fb0e(0xd5))/0x2*(-parseInt(_0x58fb0e(0xf6))/0x3)+-parseInt(_0x58fb0e(0xd2))/0x4*(-parseInt(_0x58fb0e(0xce))/0x5)+-parseInt(_0x58fb0e(0xd1))/0x6+-parseInt(_0x58fb0e(0xf1))/0x7+-parseInt(_0x58fb0e(0xf0))/0x8+parseInt(_0x58fb0e(0x111))/0x9*(parseInt(_0x58fb0e(0x110))/0xa);if(_0x10673e===_0x2b1775)break;else _0x183289['push'](_0x183289['shift']());}catch(_0xf5a2d0){_0x183289['push'](_0x183289['shift']());}}}(a0_0xe601,0x371e8));function a0_0xe601(){const _0x95faf1=['from','__esModule','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','throw','send','heartbeatInterval','pong','2617968DMZOmm','3098977EgYmaW','off','next','sent-info','apply','9dLZwqZ','__awaiter','CONNECTING','url','open','error','toString','default','call','The\x20websocket\x20is\x20already\x20connected','findIndex','reconnectTimeout','pendingRequests','checkHeartbeat','alloc','handshakeData','closing','decode','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','handlers','status','slice','utf-8','handshakeStatus','3066SRRegv','closed','10BBNVCg','12721581pMOlhD','ping','socket','heartbeatTimeout','string','The\x20websocket\x20is\x20not\x20connected','readyState','includes','waiting','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','removeEventListener','handshake','readUInt8','CLOSING','disconnect','4140mtFaoV','value','No\x20url\x20specified','1803984TOIFfx','428sOCJza','close','__importDefault','135100ZcJLlM','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','encode','connect','addEventListener','parse','splice','OPEN','emit','concat','CLOSED','completed','requestId','handle','length','done','then','raise','message'];a0_0xe601=function(){return _0x95faf1;};return a0_0xe601();}var __awaiter=this&&this[a0_0x17f6a3(0xf7)]||function(_0x1eeba5,_0x1e5f7b,_0x52a4a3,_0x29c094){function _0x52771f(_0x1c3948){return _0x1c3948 instanceof _0x52a4a3?_0x1c3948:new _0x52a4a3(function(_0x4b2fcb){_0x4b2fcb(_0x1c3948);});}return new(_0x52a4a3||(_0x52a4a3=Promise))(function(_0x372dcb,_0x200862){const _0x4259bd=a0_0x289e;function _0x4475aa(_0x44107c){const _0x99af9c=a0_0x289e;try{_0x56afc5(_0x29c094[_0x99af9c(0xf3)](_0x44107c));}catch(_0x428548){_0x200862(_0x428548);}}function _0x58cf69(_0x259d49){const _0x5366be=a0_0x289e;try{_0x56afc5(_0x29c094[_0x5366be(0xec)](_0x259d49));}catch(_0x44ca4d){_0x200862(_0x44ca4d);}}function _0x56afc5(_0x9cb0e3){const _0x2e0f78=a0_0x289e;_0x9cb0e3[_0x2e0f78(0xe4)]?_0x372dcb(_0x9cb0e3[_0x2e0f78(0xcf)]):_0x52771f(_0x9cb0e3[_0x2e0f78(0xcf)])[_0x2e0f78(0xe5)](_0x4475aa,_0x58cf69);}_0x56afc5((_0x29c094=_0x29c094[_0x4259bd(0xf5)](_0x1eeba5,_0x1e5f7b||[]))[_0x4259bd(0xf3)]());});},__importDefault=this&&this[a0_0x17f6a3(0xd4)]||function(_0x332d03){return _0x332d03&&_0x332d03['__esModule']?_0x332d03:{'default':_0x332d03};};Object['defineProperty'](exports,a0_0x17f6a3(0xe9),{'value':!![]});function a0_0x289e(_0x3ca779,_0x55e30c){const _0xe6017c=a0_0xe601();return a0_0x289e=function(_0x289ecb,_0x548a94){_0x289ecb=_0x289ecb-0xc0;let _0x463773=_0xe6017c[_0x289ecb];return _0x463773;},a0_0x289e(_0x3ca779,_0x55e30c);}const ws_1=__importDefault(require('ws'));class Client{constructor(){const _0x562dfa=a0_0x17f6a3;this['heartbeatInterval']=0x5*0x3e8+0x1f4,this[_0x562dfa(0x101)]=null,this['handshakeStatus']=_0x562dfa(0xc7),this['requestId']=0x1,this[_0x562dfa(0x102)]={},this[_0x562dfa(0x109)]={},this[_0x562dfa(0x103)]=()=>{const _0x30f2ea=_0x562dfa;if(this[_0x30f2ea(0xc2)]!=undefined)clearTimeout(this['heartbeatTimeout']);this[_0x30f2ea(0xc2)]=setTimeout(()=>{const _0x5f32d8=_0x30f2ea;var _0x2b93e1;if(this[_0x5f32d8(0xc1)]!=undefined&&this[_0x5f32d8(0xc1)][_0x5f32d8(0xc5)]!==ws_1[_0x5f32d8(0xfd)][_0x5f32d8(0xdc)])return;(_0x2b93e1=this[_0x5f32d8(0xc1)])===null||_0x2b93e1===void 0x0?void 0x0:_0x2b93e1[_0x5f32d8(0xd3)]();},this[_0x30f2ea(0xee)]);};}[a0_0x17f6a3(0xd8)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x1fe7d1,allowReject:_0x1bcda4,handshakeData:_0x6bbcd0,reconnectTimeout:_0x5cc7de}={}){return new Promise((_0x4e8b1a,_0x5cd16a)=>{const _0x1fa552=a0_0x289e;if(this[_0x1fa552(0xc1)]!=undefined&&this[_0x1fa552(0xc1)][_0x1fa552(0xc5)]===ws_1[_0x1fa552(0xfd)][_0x1fa552(0xdc)]){if(_0x1bcda4!==!![])_0x5cd16a(new Error(_0x1fa552(0xff)));else _0x4e8b1a();}this[_0x1fa552(0xc1)]!=undefined&&(this[_0x1fa552(0xc1)]['removeAllListeners'](),this[_0x1fa552(0xc1)][_0x1fa552(0xf2)]('ping',this['checkHeartbeat']),this[_0x1fa552(0x10d)]='waiting');if(this[_0x1fa552(0xf9)]==undefined&&_0x1fe7d1==undefined)_0x5cd16a(new Error(_0x1fa552(0xd0)));this[_0x1fa552(0xf9)]=_0x1fe7d1||this[_0x1fa552(0xf9)];if(_0x5cc7de!==undefined)this['reconnectTimeout']=_0x5cc7de;if(_0x6bbcd0!==undefined)this[_0x1fa552(0x105)]=_0x6bbcd0;this[_0x1fa552(0xc1)]=new ws_1[(_0x1fa552(0xfd))](this['url']),this[_0x1fa552(0xc1)]['addEventListener']('open',this[_0x1fa552(0x103)]),this[_0x1fa552(0xc1)]['addEventListener'](_0x1fa552(0xe7),this['checkHeartbeat']),this[_0x1fa552(0xc1)]['on'](_0x1fa552(0xc0),_0x20c89f=>{const _0xf109b6=_0x1fa552;var _0x2fe885;(_0x2fe885=this[_0xf109b6(0xc1)])===null||_0x2fe885===void 0x0?void 0x0:_0x2fe885[_0xf109b6(0xef)](_0x20c89f),this['checkHeartbeat']();}),this[_0x1fa552(0xc1)][_0x1fa552(0xd9)](_0x1fa552(0xd3),()=>{const _0x3143f1=_0x1fa552;if(this[_0x3143f1(0xc2)]!=undefined)clearTimeout(this[_0x3143f1(0xc2)]);});if(this[_0x1fa552(0x101)]!=undefined)this['socket'][_0x1fa552(0xd9)](_0x1fa552(0xd3),()=>{const _0x108785=_0x1fa552;setTimeout(()=>this[_0x108785(0xd8)](),this[_0x108785(0x101)]);});this['socket'][_0x1fa552(0xd9)]('message',_0x42059a=>this[_0x1fa552(0xe2)](_0x42059a)),this[_0x1fa552(0xc1)][_0x1fa552(0xd9)](_0x1fa552(0xfa),_0x4d1013=>this[_0x1fa552(0xe6)](_0x1fa552(0xfa),_0x4d1013)),this['socket'][_0x1fa552(0xd9)](_0x1fa552(0xfb),_0x56bba8=>this['raise']('error',_0x56bba8)),this[_0x1fa552(0xc1)]['addEventListener']('close',_0x281efc=>this[_0x1fa552(0xe6)]('close',_0x281efc));const _0x4cb334=()=>{_0x4e8b1a(),_0x1f04c5();},_0x1ca1cc=_0x56abae=>{_0x1bcda4?_0x5cd16a(_0x56abae):_0x4e8b1a(),_0x1f04c5();};this[_0x1fa552(0xc1)][_0x1fa552(0xd9)]('open',_0x4cb334,{'once':!![]}),this['socket'][_0x1fa552(0xd9)](_0x1fa552(0xfb),_0x1ca1cc,{'once':!![]});const _0x1f04c5=()=>{const _0x325d83=_0x1fa552;var _0x24d84c,_0x133aa6;(_0x24d84c=this[_0x325d83(0xc1)])===null||_0x24d84c===void 0x0?void 0x0:_0x24d84c[_0x325d83(0xc9)](_0x325d83(0xfa),_0x4cb334),(_0x133aa6=this['socket'])===null||_0x133aa6===void 0x0?void 0x0:_0x133aa6[_0x325d83(0xc9)](_0x325d83(0xfb),_0x1ca1cc);};});});}[a0_0x17f6a3(0xcd)](_0x4b403b,_0x4d04b5){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x30c042,_0x205351)=>{const _0xeeacdc=a0_0x289e;if(this[_0xeeacdc(0xc1)]==undefined||this[_0xeeacdc(0xc1)][_0xeeacdc(0xc5)]===ws_1['default'][_0xeeacdc(0xcc)]||this['socket'][_0xeeacdc(0xc5)]===ws_1['default']['CLOSED'])return _0x205351(new Error(_0xeeacdc(0xeb)));this[_0xeeacdc(0xc1)][_0xeeacdc(0xd3)](_0x4b403b,_0x4d04b5);const _0x4f80ff=()=>{_0x30c042(),_0x36d1f8();},_0x4534c4=_0x3c52dc=>{_0x205351(_0x3c52dc),_0x36d1f8();};this['socket'][_0xeeacdc(0xd9)](_0xeeacdc(0xd3),_0x4f80ff,{'once':!![]}),this[_0xeeacdc(0xc1)][_0xeeacdc(0xd9)](_0xeeacdc(0xfb),_0x4534c4,{'once':!![]});const _0x36d1f8=()=>{const _0x1f3900=_0xeeacdc;var _0x4f6743,_0x135cfc;(_0x4f6743=this[_0x1f3900(0xc1)])===null||_0x4f6743===void 0x0?void 0x0:_0x4f6743['removeEventListener'](_0x1f3900(0xd3),_0x4f80ff),(_0x135cfc=this['socket'])===null||_0x135cfc===void 0x0?void 0x0:_0x135cfc[_0x1f3900(0xc9)](_0x1f3900(0xfb),_0x4534c4);};});});}get[a0_0x17f6a3(0x10a)](){const _0x220584=a0_0x17f6a3;var _0x4fa331;switch((_0x4fa331=this[_0x220584(0xc1)])===null||_0x4fa331===void 0x0?void 0x0:_0x4fa331[_0x220584(0xc5)]){case ws_1['default'][_0x220584(0xf8)]:return'connecting';case ws_1[_0x220584(0xfd)][_0x220584(0xdc)]:return this[_0x220584(0x10d)]===_0x220584(0xe0)?_0x220584(0xfa):_0x220584(0xca);case ws_1[_0x220584(0xfd)]['CLOSING']:return _0x220584(0x106);case ws_1[_0x220584(0xfd)][_0x220584(0xdf)]:default:return _0x220584(0x10f);}}[a0_0x17f6a3(0xdd)](_0x5f2f84,_0x183d5f,_0x4f497b,_0x19be3d=0x5*0x3e8){const _0x239a7f=a0_0x17f6a3;if(this[_0x239a7f(0xc1)]==undefined||this[_0x239a7f(0x10a)]!==_0x239a7f(0xfa))throw new Error(_0x239a7f(0xc4));if(['handshake',_0x239a7f(0xfa),_0x239a7f(0xfb),_0x239a7f(0xd3),'*'][_0x239a7f(0xc6)](_0x5f2f84))throw new Error(_0x239a7f(0xea));const _0x5b8e39=_0x4f497b==undefined?0x0:this[_0x239a7f(0xe1)],_0x30db64=Buffer['from'](_0x5f2f84,'utf-8');if(_0x30db64[_0x239a7f(0xe3)]>0xff)throw new Error(_0x239a7f(0xc8));if(_0x4f497b!=undefined){this[_0x239a7f(0xe1)]=(this[_0x239a7f(0xe1)]+0x1)%0x80||0x1;const _0xb63458=setTimeout(()=>{const _0x19a3a3=_0x239a7f;delete this[_0x19a3a3(0x102)][_0x5b8e39],_0x4f497b(new Error('Timeout'));},_0x19be3d);this[_0x239a7f(0x102)][_0x5b8e39]=_0x2e7a01=>{if(!(_0x2e7a01 instanceof Error))clearTimeout(_0xb63458);_0x4f497b(_0x2e7a01);};}const _0x25648f=Buffer['concat']([Buffer['from']([_0x5b8e39|0x80,_0x30db64[_0x239a7f(0xe3)]]),_0x30db64,this[_0x239a7f(0xd7)](_0x183d5f)]);this[_0x239a7f(0xc1)][_0x239a7f(0xed)](_0x25648f);}[a0_0x17f6a3(0xe2)]({data:_0x15adcc}){const _0x3964b2=a0_0x17f6a3;var _0x166be3,_0x3be9eb,_0x9ad6de;let _0x8caac3=Buffer[_0x3964b2(0x104)](0x0);if(_0x15adcc instanceof Buffer)_0x8caac3=_0x15adcc;if(typeof _0x15adcc===_0x3964b2(0xc3))_0x8caac3=Buffer[_0x3964b2(0xe8)](_0x15adcc,'utf-8');if(_0x15adcc instanceof ArrayBuffer)_0x8caac3=Buffer[_0x3964b2(0xe8)](_0x15adcc);if(Array['isArray'](_0x15adcc))_0x8caac3=Buffer[_0x3964b2(0xde)](_0x15adcc);if(this[_0x3964b2(0x10d)]===_0x3964b2(0xc7)){const {pingInterval:_0x3f1b59}=this[_0x3964b2(0x107)](_0x8caac3);this['heartbeatInterval']=_0x3f1b59+0x1f4;const _0x2eb36f=this[_0x3964b2(0xd7)](this['handshakeData']===undefined?null:this[_0x3964b2(0x105)]);(_0x166be3=this[_0x3964b2(0xc1)])===null||_0x166be3===void 0x0?void 0x0:_0x166be3['send'](_0x2eb36f),this[_0x3964b2(0x10d)]=_0x3964b2(0xf4);return;}else{if(this['handshakeStatus']===_0x3964b2(0xf4)){this[_0x3964b2(0x10d)]=_0x3964b2(0xe0);return;}}const _0x27259c=_0x8caac3[_0x3964b2(0xcb)](0x0),_0x53321a=_0x27259c&0x7f,_0x259f74=(_0x27259c&0x80)!==0x0;if(_0x259f74){const _0x160551=_0x8caac3[_0x3964b2(0xcb)](0x1),_0x10ffd1=_0x8caac3[_0x3964b2(0x10b)](0x2,0x2+_0x160551)['toString'](_0x3964b2(0x10c));if([_0x3964b2(0xca),_0x3964b2(0xfa),_0x3964b2(0xfb),_0x3964b2(0xd3),'*']['includes'](_0x10ffd1))return;const _0x5922ea=this[_0x3964b2(0x107)](_0x8caac3[_0x3964b2(0x10b)](0x2+_0x160551)),_0x562b65=(_0x3be9eb=this[_0x3964b2(0x109)][_0x10ffd1])!==null&&_0x3be9eb!==void 0x0?_0x3be9eb:[];let _0x2d8ded=![];const _0x2c73cd=_0x2ecd35=>{const _0x1e5bd8=_0x3964b2;var _0x4257bd;if(_0x53321a===0x0&&_0x2d8ded)return;if(_0x2ecd35===undefined)return;const _0x45f125=Buffer['concat']([Buffer[_0x1e5bd8(0xe8)]([_0x53321a&0x7f]),this['encode'](_0x2ecd35)]);(_0x4257bd=this[_0x1e5bd8(0xc1)])===null||_0x4257bd===void 0x0?void 0x0:_0x4257bd[_0x1e5bd8(0xed)](_0x45f125),_0x2d8ded=!![];};for(const _0x571274 of _0x562b65)_0x571274[_0x3964b2(0xfe)](undefined,_0x5922ea,_0x2c73cd);const _0x5c8475=(_0x9ad6de=this[_0x3964b2(0x109)]['*'])!==null&&_0x9ad6de!==void 0x0?_0x9ad6de:[];for(const _0x351959 of _0x5c8475)_0x351959[_0x3964b2(0xfe)](undefined,_0x10ffd1,_0x5922ea);if(!_0x2d8ded&&_0x53321a!==0x0){}return;}const _0x5bc4cb=this[_0x3964b2(0x102)][_0x53321a];if(_0x5bc4cb==undefined)return;const _0x1f71db=this[_0x3964b2(0x107)](_0x8caac3[_0x3964b2(0x10b)](0x1));_0x5bc4cb(_0x1f71db);}['encode'](_0x5a3895){const _0x514f98=a0_0x17f6a3;return Buffer[_0x514f98(0xe8)](JSON['stringify'](_0x5a3895),'utf-8');}['decode'](_0x3b7bca){const _0x13f01d=a0_0x17f6a3;return JSON[_0x13f01d(0xda)](_0x3b7bca[_0x13f01d(0xfc)](_0x13f01d(0x10c)));}['on'](_0x1debe6,_0x334d32){const _0x1cfe64=a0_0x17f6a3;if(this[_0x1cfe64(0x109)][_0x1debe6]==undefined)this[_0x1cfe64(0x109)][_0x1debe6]=[];this[_0x1cfe64(0x109)][_0x1debe6]['push'](_0x334d32);}[a0_0x17f6a3(0xf2)](_0xaff14,_0x2c95e2){const _0x1c3d47=a0_0x17f6a3;if(_0x2c95e2==undefined){delete this['handlers'][_0xaff14];return;}const _0x360069=this[_0x1c3d47(0x109)][_0xaff14],_0x32bb7e=(_0x360069!==null&&_0x360069!==void 0x0?_0x360069:[])[_0x1c3d47(0x100)](_0x5a43eb=>_0x5a43eb===_0x2c95e2);if(_0x32bb7e===-0x1)throw new Error(_0x1c3d47(0x108)+_0xaff14+_0x1c3d47(0xd6));_0x360069[_0x1c3d47(0xdb)](_0x32bb7e,0x1);}[a0_0x17f6a3(0xe6)](_0x17003e,_0xb6a087){const _0x563788=a0_0x17f6a3;var _0x442048,_0x504113;const _0x2ae8a1=(_0x442048=this[_0x563788(0x109)][_0x17003e])!==null&&_0x442048!==void 0x0?_0x442048:[];for(const _0x1439c1 of _0x2ae8a1)_0x1439c1(_0xb6a087);const _0x52a9a5=(_0x504113=this[_0x563788(0x109)]['*'])!==null&&_0x504113!==void 0x0?_0x504113:[];for(const _0x3c0a08 of _0x52a9a5)_0x3c0a08(_0x17003e,_0xb6a087);}}exports[a0_0x17f6a3(0xfd)]=Client;