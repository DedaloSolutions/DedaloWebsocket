'use strict';const a0_0x178f2d=a0_0x4a6c;(function(_0x38ed76,_0x1266fb){const _0x539977=a0_0x4a6c,_0x22b501=_0x38ed76();while(!![]){try{const _0x31752f=parseInt(_0x539977(0x133))/0x1*(-parseInt(_0x539977(0x109))/0x2)+parseInt(_0x539977(0x11d))/0x3*(-parseInt(_0x539977(0x130))/0x4)+parseInt(_0x539977(0x12b))/0x5+parseInt(_0x539977(0x10f))/0x6*(-parseInt(_0x539977(0x135))/0x7)+parseInt(_0x539977(0x120))/0x8+-parseInt(_0x539977(0x127))/0x9*(parseInt(_0x539977(0xf7))/0xa)+parseInt(_0x539977(0xfa))/0xb;if(_0x31752f===_0x1266fb)break;else _0x22b501['push'](_0x22b501['shift']());}catch(_0x514f91){_0x22b501['push'](_0x22b501['shift']());}}}(a0_0x16f5,0xa4e15));function a0_0x16f5(){const _0xb831d4=['sent-info','raise','18cmNaPj','from','readUInt8','heartbeatInterval','next','handlers','done','value','requestId','length','__awaiter','open','status','toString','3GuSArE','pong','pendingRequests','5014296dHfBev','string','__esModule','No\x20url\x20specified','off','connect','ping','1503qepDFE','The\x20websocket\x20is\x20not\x20connected','stringify','close','1326245OcfjsN','alloc','handshake','defineProperty','slice','4634264VWMoWX','emit','default','1TYnJUh','isArray','251692Tcjxyx','reconnectTimeout','checkHeartbeat','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','error','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','splice','heartbeatTimeout','CLOSING','handshakeStatus','removeAllListeners','socket','readyState','completed','utf-8','5580HwBMjJ','encode','handshakeData','17624948rsUUhZ','addEventListener','handle','apply','disconnect','removeEventListener','OPEN','push','message','decode','waiting','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','concat','url','call','918670lLrMkB','then','send','findIndex'];a0_0x16f5=function(){return _0xb831d4;};return a0_0x16f5();}function a0_0x4a6c(_0x540e9c,_0x4b59a2){const _0x16f5b6=a0_0x16f5();return a0_0x4a6c=function(_0x4a6c77,_0x1aa84b){_0x4a6c77=_0x4a6c77-0xea;let _0x1ad94e=_0x16f5b6[_0x4a6c77];return _0x1ad94e;},a0_0x4a6c(_0x540e9c,_0x4b59a2);}var __awaiter=this&&this[a0_0x178f2d(0x119)]||function(_0x24c741,_0xa204f1,_0x30f8a4,_0x1195ca){function _0x44d021(_0x31cb44){return _0x31cb44 instanceof _0x30f8a4?_0x31cb44:new _0x30f8a4(function(_0x14c1fb){_0x14c1fb(_0x31cb44);});}return new(_0x30f8a4||(_0x30f8a4=Promise))(function(_0x70c74f,_0x23996f){const _0x4ff281=a0_0x4a6c;function _0x5510a6(_0x5d7585){const _0x34b5e5=a0_0x4a6c;try{_0x1d132d(_0x1195ca[_0x34b5e5(0x113)](_0x5d7585));}catch(_0x4452e7){_0x23996f(_0x4452e7);}}function _0x3f4045(_0x221a79){try{_0x1d132d(_0x1195ca['throw'](_0x221a79));}catch(_0x3bea00){_0x23996f(_0x3bea00);}}function _0x1d132d(_0x2340bb){const _0x1a5a87=a0_0x4a6c;_0x2340bb[_0x1a5a87(0x115)]?_0x70c74f(_0x2340bb[_0x1a5a87(0x116)]):_0x44d021(_0x2340bb[_0x1a5a87(0x116)])[_0x1a5a87(0x10a)](_0x5510a6,_0x3f4045);}_0x1d132d((_0x1195ca=_0x1195ca[_0x4ff281(0xfd)](_0x24c741,_0xa204f1||[]))[_0x4ff281(0x113)]());});},__importDefault=this&&this['__importDefault']||function(_0xeb3abb){const _0x2bbe91=a0_0x178f2d;return _0xeb3abb&&_0xeb3abb[_0x2bbe91(0x122)]?_0xeb3abb:{'default':_0xeb3abb};};Object[a0_0x178f2d(0x12e)](exports,a0_0x178f2d(0x122),{'value':!![]});const ws_1=__importDefault(require('ws'));class Client{constructor(){const _0x4c734a=a0_0x178f2d;this['heartbeatInterval']=0x5*0x3e8+0x1f4,this['reconnectTimeout']=null,this[_0x4c734a(0xf1)]=_0x4c734a(0x104),this[_0x4c734a(0x117)]=0x1,this[_0x4c734a(0x11f)]={},this[_0x4c734a(0x114)]={},this[_0x4c734a(0xea)]=()=>{const _0x163d32=_0x4c734a;if(this[_0x163d32(0xef)]!=undefined)clearTimeout(this[_0x163d32(0xef)]);this[_0x163d32(0xef)]=setTimeout(()=>{const _0x10a934=_0x163d32;var _0x2b7985;if(this['socket']!=undefined&&this['socket'][_0x10a934(0xf4)]!==ws_1['default'][_0x10a934(0x100)])return;(_0x2b7985=this[_0x10a934(0xf3)])===null||_0x2b7985===void 0x0?void 0x0:_0x2b7985[_0x10a934(0x12a)]();},this[_0x163d32(0x112)]);};}['connect'](){return __awaiter(this,arguments,void 0x0,function*({url:_0x15305c,allowReject:_0x129bd8,handshakeData:_0x1753a2,reconnectTimeout:_0x305313}={}){return new Promise((_0x5da275,_0x6e4633)=>{const _0x57b30b=a0_0x4a6c;if(this[_0x57b30b(0xf3)]!=undefined&&this[_0x57b30b(0xf3)][_0x57b30b(0xf4)]===ws_1[_0x57b30b(0x132)][_0x57b30b(0x100)]){if(_0x129bd8!==!![])_0x6e4633(new Error('The\x20websocket\x20is\x20already\x20connected'));else _0x5da275();}this[_0x57b30b(0xf3)]!=undefined&&(this[_0x57b30b(0xf3)][_0x57b30b(0xf2)](),this[_0x57b30b(0xf3)][_0x57b30b(0x124)]('ping',this[_0x57b30b(0xea)]),this[_0x57b30b(0xf1)]=_0x57b30b(0x104));if(this[_0x57b30b(0x107)]==undefined&&_0x15305c==undefined)_0x6e4633(new Error(_0x57b30b(0x123)));this[_0x57b30b(0x107)]=_0x15305c||this[_0x57b30b(0x107)];if(_0x305313!==undefined)this[_0x57b30b(0x136)]=_0x305313;if(_0x1753a2!==undefined)this[_0x57b30b(0xf9)]=_0x1753a2;this[_0x57b30b(0xf3)]=new ws_1[(_0x57b30b(0x132))](this[_0x57b30b(0x107)]),this[_0x57b30b(0xf3)][_0x57b30b(0xfb)]('open',this[_0x57b30b(0xea)]),this[_0x57b30b(0xf3)][_0x57b30b(0xfb)]('message',this['checkHeartbeat']),this[_0x57b30b(0xf3)]['on'](_0x57b30b(0x126),_0x3e3c68=>{const _0x461d90=_0x57b30b;var _0x2987e2;(_0x2987e2=this[_0x461d90(0xf3)])===null||_0x2987e2===void 0x0?void 0x0:_0x2987e2[_0x461d90(0x11e)](_0x3e3c68),this[_0x461d90(0xea)]();}),this['socket']['addEventListener'](_0x57b30b(0x12a),()=>{const _0x4ab1da=_0x57b30b;if(this[_0x4ab1da(0xef)]!=undefined)clearTimeout(this[_0x4ab1da(0xef)]);});if(this[_0x57b30b(0x136)]!=undefined)this['socket'][_0x57b30b(0xfb)](_0x57b30b(0x12a),()=>{const _0x5a709d=_0x57b30b;setTimeout(()=>this[_0x5a709d(0x125)](),this[_0x5a709d(0x136)]);});this[_0x57b30b(0xf3)][_0x57b30b(0xfb)](_0x57b30b(0x102),_0x49d369=>this[_0x57b30b(0xfc)](_0x49d369)),this[_0x57b30b(0xf3)][_0x57b30b(0xfb)](_0x57b30b(0x11a),_0x562ec7=>this[_0x57b30b(0x10e)](_0x57b30b(0x11a),_0x562ec7)),this[_0x57b30b(0xf3)]['addEventListener'](_0x57b30b(0xec),_0x32660=>this[_0x57b30b(0x10e)](_0x57b30b(0xec),_0x32660)),this['socket']['addEventListener'](_0x57b30b(0x12a),_0x1e8559=>this[_0x57b30b(0x10e)](_0x57b30b(0x12a),_0x1e8559));const _0x14fae2=()=>{_0x5da275(),_0x1dd4a4();},_0x580cc0=_0x1acbc3=>{_0x129bd8?_0x6e4633(_0x1acbc3):_0x5da275(),_0x1dd4a4();};this[_0x57b30b(0xf3)]['addEventListener']('open',_0x14fae2,{'once':!![]}),this[_0x57b30b(0xf3)][_0x57b30b(0xfb)](_0x57b30b(0xec),_0x580cc0,{'once':!![]});const _0x1dd4a4=()=>{const _0x1b0202=_0x57b30b;var _0x100c9b,_0x18258a;(_0x100c9b=this[_0x1b0202(0xf3)])===null||_0x100c9b===void 0x0?void 0x0:_0x100c9b[_0x1b0202(0xff)]('open',_0x14fae2),(_0x18258a=this[_0x1b0202(0xf3)])===null||_0x18258a===void 0x0?void 0x0:_0x18258a[_0x1b0202(0xff)](_0x1b0202(0xec),_0x580cc0);};});});}[a0_0x178f2d(0xfe)](_0x4f6edb,_0x4c41fc){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x27d946,_0x23aa18)=>{const _0xdab1b2=a0_0x4a6c;if(this[_0xdab1b2(0xf3)]==undefined||this[_0xdab1b2(0xf3)]['readyState']===ws_1[_0xdab1b2(0x132)][_0xdab1b2(0xf0)]||this[_0xdab1b2(0xf3)][_0xdab1b2(0xf4)]===ws_1[_0xdab1b2(0x132)]['CLOSED'])return _0x23aa18(new Error('The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection'));this[_0xdab1b2(0xf3)][_0xdab1b2(0x12a)](_0x4f6edb,_0x4c41fc);const _0x19ce18=()=>{_0x27d946(),_0x13face();},_0x3201d6=_0x2c22af=>{_0x23aa18(_0x2c22af),_0x13face();};this[_0xdab1b2(0xf3)][_0xdab1b2(0xfb)](_0xdab1b2(0x12a),_0x19ce18,{'once':!![]}),this['socket'][_0xdab1b2(0xfb)](_0xdab1b2(0xec),_0x3201d6,{'once':!![]});const _0x13face=()=>{const _0x811e6b=_0xdab1b2;var _0x2fe3e0,_0x301007;(_0x2fe3e0=this[_0x811e6b(0xf3)])===null||_0x2fe3e0===void 0x0?void 0x0:_0x2fe3e0[_0x811e6b(0xff)](_0x811e6b(0x12a),_0x19ce18),(_0x301007=this[_0x811e6b(0xf3)])===null||_0x301007===void 0x0?void 0x0:_0x301007[_0x811e6b(0xff)](_0x811e6b(0xec),_0x3201d6);};});});}get[a0_0x178f2d(0x11b)](){const _0x14e10c=a0_0x178f2d;var _0x38b5e9;switch((_0x38b5e9=this[_0x14e10c(0xf3)])===null||_0x38b5e9===void 0x0?void 0x0:_0x38b5e9[_0x14e10c(0xf4)]){case ws_1[_0x14e10c(0x132)]['CONNECTING']:return'connecting';case ws_1['default'][_0x14e10c(0x100)]:return this[_0x14e10c(0xf1)]==='completed'?'open':_0x14e10c(0x12d);case ws_1['default'][_0x14e10c(0xf0)]:return'closing';case ws_1[_0x14e10c(0x132)]['CLOSED']:default:return'closed';}}[a0_0x178f2d(0x131)](_0xa74c6a,_0x20761e,_0x33dc2e,_0x3ab871=0x5*0x3e8){const _0x2db091=a0_0x178f2d;if(this['socket']==undefined||this[_0x2db091(0x11b)]!==_0x2db091(0x11a))throw new Error(_0x2db091(0x128));if([_0x2db091(0x12d),_0x2db091(0x11a),_0x2db091(0xec),_0x2db091(0x12a),'*']['includes'](_0xa74c6a))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22');const _0x5eaeff=_0x33dc2e==undefined?0x0:this[_0x2db091(0x117)],_0x1c0a1c=Buffer[_0x2db091(0x110)](_0xa74c6a,_0x2db091(0xf6));if(_0x1c0a1c['length']>0xff)throw new Error(_0x2db091(0xeb));if(_0x33dc2e!=undefined){this[_0x2db091(0x117)]=(this[_0x2db091(0x117)]+0x1)%0x80||0x1;const _0x342bd2=setTimeout(()=>{const _0x273cd9=_0x2db091;delete this[_0x273cd9(0x11f)][_0x5eaeff],_0x33dc2e(new Error('Timeout'));},_0x3ab871);this[_0x2db091(0x11f)][_0x5eaeff]=_0x1b942d=>{if(!(_0x1b942d instanceof Error))clearTimeout(_0x342bd2);_0x33dc2e(_0x1b942d);};}const _0x1c0fea=Buffer[_0x2db091(0x106)]([Buffer[_0x2db091(0x110)]([_0x5eaeff|0x80,_0x1c0a1c[_0x2db091(0x118)]]),_0x1c0a1c,this[_0x2db091(0xf8)](_0x20761e)]);this[_0x2db091(0xf3)]['send'](_0x1c0fea);}[a0_0x178f2d(0xfc)]({data:_0x4d7cbb}){const _0x3f4746=a0_0x178f2d;var _0x557228,_0x1dadcc,_0x5f2e89;let _0x250c49=Buffer[_0x3f4746(0x12c)](0x0);if(_0x4d7cbb instanceof Buffer)_0x250c49=_0x4d7cbb;if(typeof _0x4d7cbb===_0x3f4746(0x121))_0x250c49=Buffer[_0x3f4746(0x110)](_0x4d7cbb,_0x3f4746(0xf6));if(_0x4d7cbb instanceof ArrayBuffer)_0x250c49=Buffer[_0x3f4746(0x110)](_0x4d7cbb);if(Array[_0x3f4746(0x134)](_0x4d7cbb))_0x250c49=Buffer[_0x3f4746(0x106)](_0x4d7cbb);if(this[_0x3f4746(0xf1)]===_0x3f4746(0x104)){const {pingInterval:_0x1d6cdc}=this[_0x3f4746(0x103)](_0x250c49);this[_0x3f4746(0x112)]=_0x1d6cdc+0x1f4;const _0x49208e=this[_0x3f4746(0xf8)](this[_0x3f4746(0xf9)]===undefined?null:this['handshakeData']);(_0x557228=this[_0x3f4746(0xf3)])===null||_0x557228===void 0x0?void 0x0:_0x557228[_0x3f4746(0x10b)](_0x49208e),this['handshakeStatus']=_0x3f4746(0x10d);return;}else{if(this[_0x3f4746(0xf1)]===_0x3f4746(0x10d)){this[_0x3f4746(0xf1)]=_0x3f4746(0xf5);return;}}const _0x70491a=_0x250c49[_0x3f4746(0x111)](0x0),_0x3ff2e3=_0x70491a&0x7f,_0x49e40c=(_0x70491a&0x80)!==0x0;if(_0x49e40c){const _0x157271=_0x250c49[_0x3f4746(0x111)](0x1),_0x23a6a8=_0x250c49[_0x3f4746(0x12f)](0x2,0x2+_0x157271)[_0x3f4746(0x11c)](_0x3f4746(0xf6));if(['handshake',_0x3f4746(0x11a),_0x3f4746(0xec),'close','*']['includes'](_0x23a6a8))return;const _0x218184=this[_0x3f4746(0x103)](_0x250c49[_0x3f4746(0x12f)](0x2+_0x157271)),_0x6efde2=(_0x1dadcc=this[_0x3f4746(0x114)][_0x23a6a8])!==null&&_0x1dadcc!==void 0x0?_0x1dadcc:[];let _0x26ebe2=![];const _0x2f5141=_0xaa440f=>{const _0x346a34=_0x3f4746;var _0x410f22;if(_0x3ff2e3===0x0&&_0x26ebe2)return;if(_0xaa440f===undefined)return;const _0x3638f6=Buffer['concat']([Buffer[_0x346a34(0x110)]([_0x3ff2e3&0x7f]),this[_0x346a34(0xf8)](_0xaa440f)]);(_0x410f22=this[_0x346a34(0xf3)])===null||_0x410f22===void 0x0?void 0x0:_0x410f22[_0x346a34(0x10b)](_0x3638f6),_0x26ebe2=!![];};for(const _0x2e6b21 of _0x6efde2)_0x2e6b21[_0x3f4746(0x108)](undefined,_0x218184,_0x2f5141);const _0x315010=(_0x5f2e89=this[_0x3f4746(0x114)]['*'])!==null&&_0x5f2e89!==void 0x0?_0x5f2e89:[];for(const _0xa6b710 of _0x315010)_0xa6b710['call'](undefined,_0x23a6a8,_0x218184);if(!_0x26ebe2&&_0x3ff2e3!==0x0){}return;}const _0x589d7a=this[_0x3f4746(0x11f)][_0x3ff2e3];if(_0x589d7a==undefined)return;const _0xecef6c=this[_0x3f4746(0x103)](_0x250c49['slice'](0x1));_0x589d7a(_0xecef6c);}[a0_0x178f2d(0xf8)](_0x2e37c6){const _0x310585=a0_0x178f2d;return Buffer[_0x310585(0x110)](JSON[_0x310585(0x129)](_0x2e37c6),'utf-8');}[a0_0x178f2d(0x103)](_0x3e3fd9){const _0x2302d4=a0_0x178f2d;return JSON['parse'](_0x3e3fd9[_0x2302d4(0x11c)]('utf-8'));}['on'](_0x2ddee9,_0x2c4c67){const _0x41308d=a0_0x178f2d;if(this['handlers'][_0x2ddee9]==undefined)this[_0x41308d(0x114)][_0x2ddee9]=[];this['handlers'][_0x2ddee9][_0x41308d(0x101)](_0x2c4c67);}['off'](_0xbf50d9,_0x55a8f1){const _0x332924=a0_0x178f2d;if(_0x55a8f1==undefined){delete this[_0x332924(0x114)][_0xbf50d9];return;}const _0x2036b0=this[_0x332924(0x114)][_0xbf50d9],_0x3da2a3=(_0x2036b0!==null&&_0x2036b0!==void 0x0?_0x2036b0:[])[_0x332924(0x10c)](_0x277563=>_0x277563===_0x55a8f1);if(_0x3da2a3===-0x1)throw new Error(_0x332924(0xed)+_0xbf50d9+_0x332924(0x105));_0x2036b0[_0x332924(0xee)](_0x3da2a3,0x1);}[a0_0x178f2d(0x10e)](_0x4754df,_0x52f385){const _0x32f557=a0_0x178f2d;var _0x544525,_0x48fc50;const _0x5b1a13=(_0x544525=this[_0x32f557(0x114)][_0x4754df])!==null&&_0x544525!==void 0x0?_0x544525:[];for(const _0x3212bb of _0x5b1a13)_0x3212bb(_0x52f385);const _0x415150=(_0x48fc50=this[_0x32f557(0x114)]['*'])!==null&&_0x48fc50!==void 0x0?_0x48fc50:[];for(const _0xa1aaed of _0x415150)_0xa1aaed(_0x4754df,_0x52f385);}}exports['default']=Client;