'use strict';function a1_0x1c7d(_0x125ad3,_0x46a4a8){const _0x1ababc=a1_0x1aba();return a1_0x1c7d=function(_0x1c7d0e,_0x3d3b9f){_0x1c7d0e=_0x1c7d0e-0x12e;let _0x38de5c=_0x1ababc[_0x1c7d0e];return _0x38de5c;},a1_0x1c7d(_0x125ad3,_0x46a4a8);}const a1_0x4a8913=a1_0x1c7d;(function(_0x5222ef,_0x445fe4){const _0x448afe=a1_0x1c7d,_0x1701d0=_0x5222ef();while(!![]){try{const _0x4f28b5=parseInt(_0x448afe(0x136))/0x1+-parseInt(_0x448afe(0x139))/0x2+-parseInt(_0x448afe(0x131))/0x3+-parseInt(_0x448afe(0x141))/0x4+parseInt(_0x448afe(0x12e))/0x5+-parseInt(_0x448afe(0x130))/0x6+parseInt(_0x448afe(0x13d))/0x7*(parseInt(_0x448afe(0x134))/0x8);if(_0x4f28b5===_0x445fe4)break;else _0x1701d0['push'](_0x1701d0['shift']());}catch(_0x1c7b15){_0x1701d0['push'](_0x1701d0['shift']());}}}(a1_0x1aba,0xdf72b));var __importDefault=this&&this[a1_0x4a8913(0x133)]||function(_0x1c0a92){const _0x4d1408=a1_0x4a8913;return _0x1c0a92&&_0x1c0a92[_0x4d1408(0x140)]?_0x1c0a92:{'default':_0x1c0a92};};Object[a1_0x4a8913(0x13a)](exports,a1_0x4a8913(0x140),{'value':!![]});function a1_0x1aba(){const _0x531910=['8conHdI','upgrade','586875wsAYta','call','close','2458848RRgGxY','defineProperty','default','./socket.class','24054359lqnUUo','handlers','findIndex','__esModule','2350008oPfJwZ','raise','sockets','171735plgxcG','splice','6846354WzaoEy','552993dmdZAR','randomUUID','__importDefault'];a1_0x1aba=function(){return _0x531910;};return a1_0x1aba();}const crypto_1=__importDefault(require('crypto')),socket_class_1=__importDefault(require(a1_0x4a8913(0x13c)));class Server{constructor(){const _0x544e09=a1_0x4a8913;this[_0x544e09(0x143)]={},this['handlers']={};}['listen'](_0x55f9ab){const _0x2b8d0a=a1_0x4a8913;_0x55f9ab['on'](_0x2b8d0a(0x135),(_0x1c747a,_0x102e27)=>{const _0x15fd66=_0x2b8d0a,_0x506f2f=socket_class_1[_0x15fd66(0x13b)]['fromUpgradeRequest'](_0x1c747a,_0x102e27),_0x15b443=crypto_1['default'][_0x15fd66(0x132)]();if(_0x506f2f===null)return;this[_0x15fd66(0x143)][_0x15b443]=_0x506f2f,_0x506f2f['on']('handshake',_0x145d88=>{this['raise']('connection',[_0x15b443,_0x506f2f,_0x145d88]);}),_0x506f2f['on'](_0x15fd66(0x138),()=>{const _0x966239=_0x15fd66;delete this[_0x966239(0x143)][_0x15b443];});});}['on'](_0xdbe35c,_0x4b2464){const _0x40ff3d=a1_0x4a8913;if(this['handlers'][_0xdbe35c]==undefined)this[_0x40ff3d(0x13e)][_0xdbe35c]=[];this[_0x40ff3d(0x13e)][_0xdbe35c]['push'](_0x4b2464);}['off'](_0x4cf019,_0x4051d7){const _0x2a884d=a1_0x4a8913;if(_0x4051d7==undefined){this[_0x2a884d(0x13e)][_0x4cf019]=[];return;}const _0x1f409e=this[_0x2a884d(0x13e)][_0x4cf019],_0x3f678b=(_0x1f409e!==null&&_0x1f409e!==void 0x0?_0x1f409e:[])[_0x2a884d(0x13f)](_0xc06c68=>_0xc06c68===_0x4051d7);if(_0x3f678b===-0x1)throw new Error('Attempted\x20to\x20remove\x20an\x20handler\x20for\x20'+_0x4cf019+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x1f409e[_0x2a884d(0x12f)](_0x3f678b,0x1);}[a1_0x4a8913(0x142)](_0x56e426,[_0xa02230,_0x2d165d,_0xac4544]){const _0x51e1f3=a1_0x4a8913;var _0x1dacb2;const _0x4ffd62=(_0x1dacb2=this[_0x51e1f3(0x13e)][_0x56e426])!==null&&_0x1dacb2!==void 0x0?_0x1dacb2:[];for(const _0x33f329 of _0x4ffd62){_0x33f329[_0x51e1f3(0x137)](undefined,...[_0xa02230,_0x2d165d,_0xac4544]);}}}exports['default']=Server;