'use strict';function a3_0xdb0a(_0x52e750,_0x259bbf){const _0x33e3b8=a3_0x33e3();return a3_0xdb0a=function(_0xdb0a06,_0x4ebb2a){_0xdb0a06=_0xdb0a06-0xf1;let _0x3ddf0c=_0x33e3b8[_0xdb0a06];return _0x3ddf0c;},a3_0xdb0a(_0x52e750,_0x259bbf);}const a3_0x189028=a3_0xdb0a;(function(_0x40e1a7,_0x57d706){const _0xef7a3c=a3_0xdb0a,_0x10d514=_0x40e1a7();while(!![]){try{const _0x2781ef=-parseInt(_0xef7a3c(0x141))/0x1*(-parseInt(_0xef7a3c(0x11f))/0x2)+parseInt(_0xef7a3c(0x10f))/0x3*(parseInt(_0xef7a3c(0xfa))/0x4)+-parseInt(_0xef7a3c(0xf6))/0x5*(parseInt(_0xef7a3c(0x149))/0x6)+-parseInt(_0xef7a3c(0x145))/0x7+parseInt(_0xef7a3c(0x147))/0x8*(-parseInt(_0xef7a3c(0x133))/0x9)+parseInt(_0xef7a3c(0x146))/0xa+-parseInt(_0xef7a3c(0x10a))/0xb*(-parseInt(_0xef7a3c(0x10e))/0xc);if(_0x2781ef===_0x57d706)break;else _0x10d514['push'](_0x10d514['shift']());}catch(_0x371eb5){_0x10d514['push'](_0x10d514['shift']());}}}(a3_0x33e3,0xb2843));var __awaiter=this&&this['__awaiter']||function(_0x28af97,_0x3c32ab,_0x1a4438,_0x5668ba){function _0x372c41(_0x4d7299){return _0x4d7299 instanceof _0x1a4438?_0x4d7299:new _0x1a4438(function(_0x4cdc5b){_0x4cdc5b(_0x4d7299);});}return new(_0x1a4438||(_0x1a4438=Promise))(function(_0x55c51d,_0x2563d9){const _0x4907b4=a3_0xdb0a;function _0x3b1b87(_0x209096){const _0x342253=a3_0xdb0a;try{_0x36639e(_0x5668ba[_0x342253(0x127)](_0x209096));}catch(_0x2905d4){_0x2563d9(_0x2905d4);}}function _0x4a009e(_0xad5818){try{_0x36639e(_0x5668ba['throw'](_0xad5818));}catch(_0xe293e4){_0x2563d9(_0xe293e4);}}function _0x36639e(_0x9b80b4){const _0x507119=a3_0xdb0a;_0x9b80b4[_0x507119(0x102)]?_0x55c51d(_0x9b80b4[_0x507119(0x11a)]):_0x372c41(_0x9b80b4[_0x507119(0x11a)])[_0x507119(0x137)](_0x3b1b87,_0x4a009e);}_0x36639e((_0x5668ba=_0x5668ba[_0x4907b4(0x148)](_0x28af97,_0x3c32ab||[]))[_0x4907b4(0x127)]());});},__importDefault=this&&this[a3_0x189028(0x122)]||function(_0x521169){const _0x1e62e6=a3_0x189028;return _0x521169&&_0x521169[_0x1e62e6(0xf3)]?_0x521169:{'default':_0x521169};};Object[a3_0x189028(0x115)](exports,a3_0x189028(0xf3),{'value':!![]});function a3_0x33e3(){const _0x4e54a4=['258EAFA5-E914-47DA-95CA-C5AB0DC85B11','next','raise','ping','end','utf-8','\x0d\x0a\x0d\x0a','slice','closed','from','copy','Sec-WebSocket-Accept:\x20','pong','65547PRTXup','handlers','sha1','\x20but\x20no\x20pending\x20request\x20was\x20found','then','call','length','emit','encode','error','destroy','send','off','decode','2NWHKfr','\x20but\x20no\x20handler\x20return\x20a\x20result','pingInterval','checkHeartbeat','4225592ZwxBJz','11491070cDcLoe','544xoOmcY','apply','6508146kbqagF','findIndex','open','readUInt8','__esModule','toString','fromUpgradeRequest','5Anxjdo','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','handle','alloc','613544NMFfqu','randomUUID','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','closing','crypto','data','pingTimeout','Received\x20a\x20request\x20with\x20eventName\x20','done','Received\x20message\x20with\x20unsupported\x20opcode:\x20','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','once','status','default','headers','includes','121CSPaFh','readUInt16BE','sec-websocket-key','stringify','130812hrPceB','6eEDNva','binary','write','createHash','pingRequests','socket','defineProperty','disconnect','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','handshake','text','value','push','requestId','close','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','1339004njIGdB','digest','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','__importDefault','concat','Connection:\x20Upgrade','pendingRequests'];a3_0x33e3=function(){return _0x4e54a4;};return a3_0x33e3();}const crypto_1=__importDefault(require(a3_0x189028(0xfe)));class Socket{constructor(_0x52f0f7){const _0x23187c=a3_0x189028;this[_0x23187c(0x114)]=_0x52f0f7,this['status']=_0x23187c(0x118),this[_0x23187c(0x143)]=0x5*0x3e8,this[_0x23187c(0x100)]=0x2*0x3e8,this[_0x23187c(0x113)]={},this[_0x23187c(0x11c)]=0x1,this[_0x23187c(0x125)]={},this['data']={},this[_0x23187c(0x134)]={},this[_0x23187c(0x114)]['on']('data',_0x7f5560=>this[_0x23187c(0xf8)](_0x7f5560)),this[_0x23187c(0x114)]['on']('error',_0x1836a6=>this[_0x23187c(0x128)](_0x23187c(0x13c),_0x1836a6)),this['socket']['on'](_0x23187c(0x11d),()=>{}),this[_0x23187c(0x144)]();const _0x9a44ea=this[_0x23187c(0x13b)]({'pingInterval':this[_0x23187c(0x143)]});this['send'](_0x23187c(0x110),_0x9a44ea);}[a3_0x189028(0x116)](){return __awaiter(this,arguments,void 0x0,function*(_0x4d7b8a=0x3e8,_0x1575a5='',_0xee5b11=0x1388){return new Promise((_0x191325,_0x19537f)=>{const _0x53127c=a3_0xdb0a,_0x580a0c=Buffer[_0x53127c(0x12f)](_0x1575a5,_0x53127c(0x12b)),_0x4612d9=Buffer[_0x53127c(0xf9)](0x2+_0x580a0c['length']);_0x4612d9['writeUInt16BE'](_0x4d7b8a,0x0),_0x580a0c[_0x53127c(0x130)](_0x4612d9,0x2);const _0x230ae4=_0x4612d9[_0x53127c(0x139)],_0xa9df51=_0x230ae4<0x7e?_0x230ae4:_0x230ae4<0x10000?0x7e:0x7f,_0x36229e=_0xa9df51===0x7e?Buffer['from']([0x88,0x7e,_0x230ae4>>0x8&0xff,_0x230ae4&0xff]):_0xa9df51===0x7f?Buffer[_0x53127c(0x12f)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x230ae4>>0x8&0xff,_0x230ae4&0xff]):Buffer[_0x53127c(0x12f)]([0x88,_0x230ae4]),_0x7fda12=Buffer[_0x53127c(0x123)]([_0x36229e,_0x4612d9]);this[_0x53127c(0x114)][_0x53127c(0x111)](_0x7fda12),this[_0x53127c(0x106)]='closing';if(_0xee5b11===null)this[_0x53127c(0x106)]='closed',this[_0x53127c(0x114)][_0x53127c(0x12a)](),this['raise']('close',{'code':_0x4d7b8a,'reason':_0x1575a5}),_0x191325();else{let _0x1008e7=!![];this[_0x53127c(0x114)][_0x53127c(0x105)](_0x53127c(0xff),_0x529d01=>{const _0x5c8275=_0x53127c;if(!_0x1008e7)return;_0x529d01[0x0]===0x88?(this['status']=_0x5c8275(0x12e),this[_0x5c8275(0x114)][_0x5c8275(0x12a)](),this[_0x5c8275(0x128)](_0x5c8275(0x11d),{'code':_0x4d7b8a,'reason':_0x1575a5}),_0x191325()):_0x19537f(new Error(_0x5c8275(0xf7)));}),setTimeout(()=>{const _0x167b78=_0x53127c;_0x1008e7=![],_0x19537f(new Error(_0x167b78(0x104))),this['socket'][_0x167b78(0x12a)]();},_0xee5b11);}});});}[a3_0x189028(0x13e)](_0x1f8ab7,_0x1ea51d){const _0x2cc79b=a3_0x189028;let _0x349483,_0x16f3b9;switch(_0x1f8ab7){case _0x2cc79b(0x119):_0x349483=Buffer[_0x2cc79b(0x12f)](_0x1ea51d,_0x2cc79b(0x12b)),_0x16f3b9=0x1;break;case'binary':_0x349483=_0x1ea51d,_0x16f3b9=0x2;break;case _0x2cc79b(0x129):_0x349483=_0x1ea51d,_0x16f3b9=0x9;break;case _0x2cc79b(0x132):_0x349483=_0x1ea51d,_0x16f3b9=0xa;break;}const _0x37b963=[];if(_0x349483['length']<0x7e)_0x37b963[_0x2cc79b(0x11b)](_0x349483[_0x2cc79b(0x139)]);else{if(_0x349483['length']<0x10000)_0x37b963[_0x2cc79b(0x11b)](0x7e,_0x349483['length']>>0x8&0xff,_0x349483[_0x2cc79b(0x139)]&0xff);else{_0x37b963['push'](0x7f);for(let _0xcd330c=0x7;_0xcd330c>=0x0;_0xcd330c--)_0x37b963[_0x2cc79b(0x11b)](_0x349483[_0x2cc79b(0x139)]>>_0xcd330c*0x8&0xff);}}const _0x23c44d=Buffer['concat']([Buffer[_0x2cc79b(0x12f)]([0x80|_0x16f3b9,..._0x37b963]),_0x349483]);this['socket'][_0x2cc79b(0x111)](_0x23c44d);}[a3_0x189028(0x13a)](_0x5a5ac6,_0x3204fb,_0x13177c,_0x37c8bd=0x32*0x3e8){const _0x35ea0f=a3_0x189028;if(this[_0x35ea0f(0x114)]==undefined||this[_0x35ea0f(0x106)]!==_0x35ea0f(0xf1))throw new Error('The\x20websocket\x20is\x20not\x20connected');if(['handshake',_0x35ea0f(0xf1),_0x35ea0f(0x13c),'close'][_0x35ea0f(0x109)](_0x5a5ac6))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close');const _0x2d6e3e=_0x13177c==undefined?0x0:this[_0x35ea0f(0x11c)],_0xe8f775=Buffer[_0x35ea0f(0x12f)](_0x5a5ac6,'utf-8');if(_0xe8f775[_0x35ea0f(0x139)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0x13177c!=undefined){this[_0x35ea0f(0x11c)]=(this[_0x35ea0f(0x11c)]+0x1)%0x80||0x1;const _0x1e905a=setTimeout(()=>{delete this['pendingRequests'][_0x2d6e3e],_0x13177c(new Error('Timeout'));},_0x37c8bd);this[_0x35ea0f(0x125)][_0x2d6e3e]=_0x27cb9b=>{if(!(_0x27cb9b instanceof Error))clearTimeout(_0x1e905a);_0x13177c(_0x27cb9b);};}const _0x3d59d6=Buffer[_0x35ea0f(0x123)]([Buffer[_0x35ea0f(0x12f)]([_0x2d6e3e|0x80,_0xe8f775['length']]),_0xe8f775,this[_0x35ea0f(0x13b)](_0x3204fb)]);this[_0x35ea0f(0x13e)](_0x35ea0f(0x110),_0x3d59d6);}[a3_0x189028(0xf8)](_0x9bdeea){const _0xfcc2cb=a3_0x189028;var _0x9ad7dc,_0x10fc62;const _0x2acc75=_0x9bdeea[0x0],_0x152e55=(_0x2acc75&0x80)!==0x0,_0x461055=_0x2acc75&0xf,_0x5d93cb=_0x9bdeea[0x1],_0x2bdad3=(_0x5d93cb&0x80)!==0x0;let _0x1cf7dc=_0x5d93cb&0x7f,_0x53b98a=0x2;if(_0x1cf7dc===0x7e)_0x1cf7dc=_0x9bdeea[_0xfcc2cb(0x10b)](_0x53b98a),_0x53b98a+=0x2;else _0x1cf7dc===0x7f&&(_0x1cf7dc=Number(_0x9bdeea['readBigUInt64BE'](_0x53b98a)),_0x53b98a+=0x8);const _0x3ac1f5=_0x2bdad3?_0x9bdeea['slice'](_0x53b98a,_0x53b98a+0x4):Buffer['alloc'](0x0);if(_0x2bdad3)_0x53b98a+=0x4;let _0x4a3b49=_0x9bdeea[_0xfcc2cb(0x12d)](_0x53b98a,_0x53b98a+_0x1cf7dc);if(_0x2bdad3){const _0x5850a4=Buffer[_0xfcc2cb(0xf9)](_0x4a3b49['length']);for(let _0x434a39=0x0;_0x434a39<_0x4a3b49['length'];_0x434a39++)_0x5850a4[_0x434a39]=_0x4a3b49[_0x434a39]^_0x3ac1f5[_0x434a39%0x4];_0x4a3b49=_0x5850a4;}switch(_0x461055){case 0x1:this['raise'](_0xfcc2cb(0x13c),new Error('Received\x20non-standard\x20text\x20message:\x20'+_0x4a3b49[_0xfcc2cb(0xf4)]('utf-8')));break;case 0x2:{if(this[_0xfcc2cb(0x106)]===_0xfcc2cb(0x118)){const _0x2b3a3b=this[_0xfcc2cb(0x140)](_0x4a3b49);this[_0xfcc2cb(0x128)]('handshake',_0x2b3a3b),this[_0xfcc2cb(0x106)]='open',this['send'](_0xfcc2cb(0x110),Buffer[_0xfcc2cb(0xf9)](0x0));return;}const _0x232176=_0x4a3b49[_0xfcc2cb(0xf2)](0x0),_0x2225da=_0x232176&0x7f,_0xc3cdc6=(_0x232176&0x80)!==0x0;if(_0xc3cdc6){const _0x20b0a1=_0x4a3b49[_0xfcc2cb(0xf2)](0x1),_0x25273c=_0x4a3b49[_0xfcc2cb(0x12d)](0x2,0x2+_0x20b0a1)[_0xfcc2cb(0xf4)](_0xfcc2cb(0x12b));if(['handshake','open','error','close','*'][_0xfcc2cb(0x109)](_0x25273c)){this[_0xfcc2cb(0x128)]('error',new Error(_0xfcc2cb(0x101)+_0x25273c+';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?'));return;}const _0x2f7e3a=this[_0xfcc2cb(0x140)](_0x4a3b49[_0xfcc2cb(0x12d)](0x2+_0x20b0a1)),_0x55c900=(_0x9ad7dc=this[_0xfcc2cb(0x134)][_0x25273c])!==null&&_0x9ad7dc!==void 0x0?_0x9ad7dc:[];let _0x7ff361=![];for(const _0xd241d5 of _0x55c900){const _0x1371f1=_0xd241d5[_0xfcc2cb(0x138)](undefined,_0x2f7e3a);if(!_0x7ff361&&_0x1371f1!==undefined&&_0x2225da!==0x0){_0x7ff361=!![];const _0x5b9959=Buffer[_0xfcc2cb(0x123)]([Buffer[_0xfcc2cb(0x12f)]([_0x2225da&0x7f]),this[_0xfcc2cb(0x13b)](_0x1371f1)]);this[_0xfcc2cb(0x13e)](_0xfcc2cb(0x110),_0x5b9959);}}const _0x5ad08b=(_0x10fc62=this[_0xfcc2cb(0x134)]['*'])!==null&&_0x10fc62!==void 0x0?_0x10fc62:[];for(const _0x23853d of _0x5ad08b)_0x23853d[_0xfcc2cb(0x138)](undefined,_0x25273c,_0x2f7e3a);if(!_0x7ff361&&_0x2225da!==0x0)this['raise'](_0xfcc2cb(0x13c),new Error(_0xfcc2cb(0x121)+_0x25273c+_0xfcc2cb(0x142)));return;}const _0x74545=this[_0xfcc2cb(0x125)][_0x2225da];if(_0x74545==undefined){this['raise'](_0xfcc2cb(0x13c),new Error('Received\x20a\x20response\x20for\x20the\x20id\x20'+_0x2225da+_0xfcc2cb(0x136)));return;}const _0x2e0868=this[_0xfcc2cb(0x140)](_0x4a3b49[_0xfcc2cb(0x12d)](0x1));_0x74545[_0xfcc2cb(0x138)](undefined,_0x2e0868);break;}case 0x9:this[_0xfcc2cb(0x13e)](_0xfcc2cb(0x132),_0x4a3b49);break;case 0xa:const _0x593ff5=_0x4a3b49[_0xfcc2cb(0xf4)]('utf-8'),_0x1ff9a8=this[_0xfcc2cb(0x113)][_0x593ff5];if(_0x1ff9a8==undefined){this[_0xfcc2cb(0x128)](_0xfcc2cb(0x13c),new Error(_0xfcc2cb(0x117)));return;}_0x1ff9a8();break;case 0x8:if(this[_0xfcc2cb(0x106)]===_0xfcc2cb(0xfd))return;let _0x211850=0x3e8,_0x2cbb24='';_0x4a3b49[_0xfcc2cb(0x139)]>=0x2&&(_0x211850=_0x4a3b49[_0xfcc2cb(0x10b)](0x0),_0x2cbb24=_0x4a3b49['slice'](0x2)[_0xfcc2cb(0xf4)](_0xfcc2cb(0x12b)));this[_0xfcc2cb(0x116)](_0x211850,_0x2cbb24,null);break;default:this[_0xfcc2cb(0x128)](_0xfcc2cb(0x13c),new Error(_0xfcc2cb(0x103)+_0x461055));}}[a3_0x189028(0x13b)](_0x5b742a){const _0x119987=a3_0x189028;return Buffer['from'](JSON[_0x119987(0x10d)](_0x5b742a),_0x119987(0x12b));}[a3_0x189028(0x140)](_0x516b64){const _0x4aa134=a3_0x189028;return JSON['parse'](_0x516b64[_0x4aa134(0xf4)](_0x4aa134(0x12b)));}['checkHeartbeat'](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x4b886a,_0x380909)=>{const _0x5e100e=a3_0xdb0a,_0x515461=crypto_1[_0x5e100e(0x107)][_0x5e100e(0xfb)](),_0x3ddd8d=setTimeout(()=>{const _0x1aead9=_0x5e100e;delete this[_0x1aead9(0x113)][_0x515461],this[_0x1aead9(0x116)](0x3e8,'',null),_0x4b886a(![]);},this['pingTimeout']);this[_0x5e100e(0x113)][_0x515461]=()=>{const _0x10e058=_0x5e100e;delete this[_0x10e058(0x113)][_0x515461],clearTimeout(_0x3ddd8d),_0x4b886a(!![]),setTimeout(()=>{const _0x335fea=_0x10e058;if(this[_0x335fea(0x106)]!=='open')return;this[_0x335fea(0x144)]();},this[_0x10e058(0x143)]);},this[_0x5e100e(0x13e)]('ping',Buffer[_0x5e100e(0x12f)](_0x515461));});});}['on'](_0x2c8b70,_0x2fce84){const _0x598d22=a3_0x189028;if(this[_0x598d22(0x134)][_0x2c8b70]==undefined)this[_0x598d22(0x134)][_0x2c8b70]=[];this[_0x598d22(0x134)][_0x2c8b70][_0x598d22(0x11b)](_0x2fce84);}[a3_0x189028(0x13f)](_0x37fbaf,_0x3ac894){const _0x5a6aa9=a3_0x189028;if(_0x3ac894==undefined){this['handlers'][_0x37fbaf]=[];return;}const _0x2835da=this[_0x5a6aa9(0x134)][_0x37fbaf],_0x583420=(_0x2835da!==null&&_0x2835da!==void 0x0?_0x2835da:[])[_0x5a6aa9(0x14a)](_0x423206=>_0x423206===_0x3ac894);if(_0x583420===-0x1)throw new Error(_0x5a6aa9(0x11e)+_0x37fbaf+_0x5a6aa9(0xfc));_0x2835da['splice'](_0x583420,0x1);}['raise'](_0x59e397,_0x45dd99){const _0x212e6f=a3_0x189028;var _0x5c4300,_0x4950a7;const _0x9fe56a=(_0x5c4300=this[_0x212e6f(0x134)][_0x59e397])!==null&&_0x5c4300!==void 0x0?_0x5c4300:[];for(const _0x2eef7d of _0x9fe56a)_0x2eef7d(_0x45dd99);const _0x2f3161=(_0x4950a7=this[_0x212e6f(0x134)]['*'])!==null&&_0x4950a7!==void 0x0?_0x4950a7:[];for(const _0x1f8f9c of _0x2f3161)_0x1f8f9c(_0x59e397,_0x45dd99);}static[a3_0x189028(0xf5)](_0x275305,_0x56d8b4){const _0x4cc0b4=a3_0x189028,_0x2641c3=_0x275305[_0x4cc0b4(0x108)][_0x4cc0b4(0x10c)];if(_0x2641c3==undefined)return _0x56d8b4[_0x4cc0b4(0x13d)](),null;const _0x421ebe=crypto_1[_0x4cc0b4(0x107)][_0x4cc0b4(0x112)](_0x4cc0b4(0x135));_0x421ebe['update'](_0x2641c3+_0x4cc0b4(0x126));const _0x320f86=_0x421ebe[_0x4cc0b4(0x120)]('base64'),_0x100ef2=['HTTP/1.1\x20101\x20Switching\x20Protocols','Upgrade:\x20websocket',_0x4cc0b4(0x124),_0x4cc0b4(0x131)+_0x320f86];return _0x56d8b4[_0x4cc0b4(0x111)](_0x100ef2['join']('\x0d\x0a')+_0x4cc0b4(0x12c)),new Socket(_0x56d8b4);}}exports['default']=Socket;