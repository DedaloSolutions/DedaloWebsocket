'use strict';function a3_0x1e7c(){const _0x4ff25a=['toString','Upgrade:\x20websocket','data','1ACrgFi','digest','requestId','pingRequests','join','stringify','error','from','handshake','handlers','handle','Received\x20message\x20with\x20unsupported\x20opcode:\x20','call','__esModule','send','close','5001888qDHCdq','closing','status','50LeuosP','Connection:\x20Upgrade','closed','destroy','2359197eBVHpq','26593468uDiVDX','Timeout','encode','throw','set','concat','write','491566hjcens','sec-websocket-key','pingTimeout','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','default','1016530TWVJlX','readUInt16BE','slice','done','Sec-WebSocket-Accept:\x20','ping','The\x20websocket\x20is\x20not\x20connected','checkHeartbeat','headers','text','binary','open','includes','parse','base64','readBigUInt64BE','update','Received\x20non-standard\x20text\x20message:\x20','push','decode','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','off','pingInterval','185213xTyPcL','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','raise','splice','length','__importDefault','utf-8','152OPRmAW','emit','end','alloc','writeUInt16BE','findIndex','once','12xTmPyB','next','defineProperty','disconnect','socket','copy','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','NaN','2446680XiybPp','_status','pendingRequests'];a3_0x1e7c=function(){return _0x4ff25a;};return a3_0x1e7c();}const a3_0x5c7906=a3_0x374f;(function(_0x38e664,_0x290836){const _0xe0eba6=a3_0x374f,_0x35ca73=_0x38e664();while(!![]){try{const _0x471e46=-parseInt(_0xe0eba6(0xee))/0x1*(-parseInt(_0xe0eba6(0x10d))/0x2)+-parseInt(_0xe0eba6(0xe8))/0x3+parseInt(_0xe0eba6(0xfe))/0x4+parseInt(_0xe0eba6(0x112))/0x5*(-parseInt(_0xe0eba6(0xe0))/0x6)+-parseInt(_0xe0eba6(0x129))/0x7*(parseInt(_0xe0eba6(0xd9))/0x8)+parseInt(_0xe0eba6(0x105))/0x9*(-parseInt(_0xe0eba6(0x101))/0xa)+parseInt(_0xe0eba6(0x106))/0xb;if(_0x471e46===_0x290836)break;else _0x35ca73['push'](_0x35ca73['shift']());}catch(_0x22794e){_0x35ca73['push'](_0x35ca73['shift']());}}}(a3_0x1e7c,0xd66cd));var __awaiter=this&&this['__awaiter']||function(_0x32bcb6,_0x45c212,_0xb3a53a,_0x31a4b8){function _0x7f2d6c(_0x5e409f){return _0x5e409f instanceof _0xb3a53a?_0x5e409f:new _0xb3a53a(function(_0x435ce1){_0x435ce1(_0x5e409f);});}return new(_0xb3a53a||(_0xb3a53a=Promise))(function(_0x4be644,_0x3316cc){const _0x27ae42=a3_0x374f;function _0x5d4f9f(_0x56bc38){const _0x1c0e06=a3_0x374f;try{_0x486ff6(_0x31a4b8[_0x1c0e06(0xe1)](_0x56bc38));}catch(_0x45b4ef){_0x3316cc(_0x45b4ef);}}function _0x242f28(_0x45bc63){const _0x201d0e=a3_0x374f;try{_0x486ff6(_0x31a4b8[_0x201d0e(0x109)](_0x45bc63));}catch(_0x401056){_0x3316cc(_0x401056);}}function _0x486ff6(_0x219b55){const _0xb73d47=a3_0x374f;_0x219b55[_0xb73d47(0x115)]?_0x4be644(_0x219b55['value']):_0x7f2d6c(_0x219b55['value'])['then'](_0x5d4f9f,_0x242f28);}_0x486ff6((_0x31a4b8=_0x31a4b8['apply'](_0x32bcb6,_0x45c212||[]))[_0x27ae42(0xe1)]());});},__importDefault=this&&this[a3_0x5c7906(0xd7)]||function(_0x628114){const _0x4f3a5f=a3_0x5c7906;return _0x628114&&_0x628114[_0x4f3a5f(0xfb)]?_0x628114:{'default':_0x628114};};Object[a3_0x5c7906(0xe2)](exports,a3_0x5c7906(0xfb),{'value':!![]});const crypto_1=__importDefault(require('crypto'));class Socket{constructor(_0x4d16c7){const _0x2e78d2=a3_0x5c7906;this['socket']=_0x4d16c7,this[_0x2e78d2(0xe9)]=_0x2e78d2(0xf6),this['pingInterval']=0x5*0x3e8,this[_0x2e78d2(0x10f)]=0x2*0x3e8,this[_0x2e78d2(0xf1)]={},this[_0x2e78d2(0xf0)]=0x1,this[_0x2e78d2(0xea)]={},this[_0x2e78d2(0xed)]={},this[_0x2e78d2(0xf7)]={},this['socket']['on'](_0x2e78d2(0xed),_0x2c1a33=>this[_0x2e78d2(0xf8)](_0x2c1a33)),this['socket']['on']('error',_0x25af93=>this[_0x2e78d2(0xd4)](_0x2e78d2(0xf4),_0x25af93));const _0xb649ee=this[_0x2e78d2(0x108)]({'pingInterval':this[_0x2e78d2(0x128)]});this['send']('binary',_0xb649ee);}[a3_0x5c7906(0xe3)](){return __awaiter(this,arguments,void 0x0,function*(_0x48f228=0x3e8,_0x264359='',_0x6963ae=0x1388){return new Promise((_0x360c27,_0x2a7e5d)=>{const _0x391619=a3_0x374f,_0xcef30f=Buffer[_0x391619(0xf5)](_0x264359,_0x391619(0xd8)),_0x3773c4=Buffer[_0x391619(0xdc)](0x2+_0xcef30f['length']);_0x3773c4[_0x391619(0xdd)](_0x48f228,0x0),_0xcef30f[_0x391619(0xe5)](_0x3773c4,0x2);const _0x12191a=_0x3773c4[_0x391619(0xd6)],_0x33cf0a=_0x12191a<0x7e?_0x12191a:_0x12191a<0x10000?0x7e:0x7f,_0x107cce=_0x33cf0a===0x7e?Buffer[_0x391619(0xf5)]([0x88,0x7e,_0x12191a>>0x8&0xff,_0x12191a&0xff]):_0x33cf0a===0x7f?Buffer[_0x391619(0xf5)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x12191a>>0x8&0xff,_0x12191a&0xff]):Buffer['from']([0x88,_0x12191a]),_0x434cd0=Buffer[_0x391619(0x10b)]([_0x107cce,_0x3773c4]);this[_0x391619(0xe4)]['write'](_0x434cd0),this['_status']=_0x391619(0xff);if(_0x6963ae===null)this['socket'][_0x391619(0xdb)](),this[_0x391619(0x100)]!==_0x391619(0x103)&&(this[_0x391619(0xd4)](_0x391619(0xfd),{'code':_0x48f228,'reason':_0x264359}),this[_0x391619(0xe9)]=_0x391619(0x103)),_0x360c27();else{let _0x4a8666=!![];this['socket'][_0x391619(0xdf)]('data',_0x51f3c0=>{const _0x90a1d0=_0x391619;if(!_0x4a8666)return;_0x51f3c0[0x0]===0x88?(this['_status']=_0x90a1d0(0x103),this['socket'][_0x90a1d0(0xdb)](),this[_0x90a1d0(0xd4)](_0x90a1d0(0xfd),{'code':_0x48f228,'reason':_0x264359}),_0x360c27()):_0x2a7e5d(new Error('Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.'));}),setTimeout(()=>{const _0x201ac6=_0x391619;_0x4a8666=![],_0x2a7e5d(new Error(_0x201ac6(0xe6))),this['socket'][_0x201ac6(0xdb)]();},_0x6963ae);}});});}get['status'](){const _0x367394=a3_0x5c7906;return this[_0x367394(0xe9)];}[a3_0x5c7906(0xfc)](_0x442ce2,_0x3058b8){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x307678=a3_0x374f;let _0x2cf830,_0x45b8f8;switch(_0x442ce2){case _0x307678(0x11b):_0x2cf830=Buffer[_0x307678(0xf5)](_0x3058b8,'utf-8'),_0x45b8f8=0x1;break;case _0x307678(0x11c):_0x2cf830=_0x3058b8,_0x45b8f8=0x2;break;case _0x307678(0x117):_0x2cf830=_0x3058b8,_0x45b8f8=0x9;break;case'pong':_0x2cf830=_0x3058b8,_0x45b8f8=0xa;break;}const _0xcbbfd0=[];if(_0x2cf830[_0x307678(0xd6)]<0x7e)_0xcbbfd0[_0x307678(0x124)](_0x2cf830[_0x307678(0xd6)]);else{if(_0x2cf830[_0x307678(0xd6)]<0x10000)_0xcbbfd0[_0x307678(0x124)](0x7e,_0x2cf830[_0x307678(0xd6)]>>0x8&0xff,_0x2cf830['length']&0xff);else{_0xcbbfd0[_0x307678(0x124)](0x7f);for(let _0x2de7b6=0x7;_0x2de7b6>=0x0;_0x2de7b6--)_0xcbbfd0[_0x307678(0x124)](_0x2cf830[_0x307678(0xd6)]>>_0x2de7b6*0x8&0xff);}}const _0x1b1a51=Buffer['concat']([Buffer['from']([0x80|_0x45b8f8,..._0xcbbfd0]),_0x2cf830]);return new Promise((_0x2b3ee5,_0x58756c)=>{const _0x568180=_0x307678;this[_0x568180(0xe4)][_0x568180(0x10c)](_0x1b1a51,undefined,_0x55cf21=>{if(_0x55cf21!=undefined)return _0x58756c(_0x55cf21);_0x2b3ee5();});});});}[a3_0x5c7906(0xda)](_0x57992e,_0x5ccfb6,_0x5b0746){return __awaiter(this,arguments,void 0x0,function*(_0x156afb,_0x26cbf4,_0x23515c,_0x1cd03a=0x5*0x3e8){const _0x386dca=a3_0x374f;if(this[_0x386dca(0xe4)]==undefined||this[_0x386dca(0x100)]!==_0x386dca(0x11d))throw new Error(_0x386dca(0x118));if([_0x386dca(0xf6),'open','error','close','*'][_0x386dca(0x11e)](_0x156afb))throw new Error(_0x386dca(0x12a));const _0x5e4ac2=new TextEncoder()[_0x386dca(0x108)](_0x156afb);if(_0x5e4ac2['length']>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');const _0x319e3d=this['requestId'];if(_0x23515c!=undefined){this['requestId']=(this[_0x386dca(0xf0)]+0x1)%0x100;const _0xd6200b=setTimeout(()=>{const _0x4c4065=_0x386dca;delete this[_0x4c4065(0xea)][_0x319e3d],_0x23515c(new Error(_0x4c4065(0x107)));},_0x1cd03a);this['pendingRequests'][_0x319e3d]=_0x33b817=>{if(!(_0x33b817 instanceof Error))clearTimeout(_0xd6200b);_0x23515c(_0x33b817);};}const _0x47de51=this[_0x386dca(0x108)](_0x26cbf4),_0x24bbe0=new Uint8Array(0x2+(_0x23515c==undefined?0x0:0x1)+_0x5e4ac2[_0x386dca(0xd6)]+_0x47de51[_0x386dca(0xd6)]);_0x24bbe0[0x0]=_0x23515c==undefined?0x2:0x3;if(_0x23515c!=undefined)_0x24bbe0[0x1]=_0x319e3d;return _0x24bbe0[0x1+(_0x23515c!=undefined?0x1:0x0)]=_0x5e4ac2[_0x386dca(0xd6)],_0x24bbe0['set'](_0x5e4ac2,0x2+(_0x23515c!=undefined?0x1:0x0)),_0x24bbe0[_0x386dca(0x10a)](_0x47de51,0x2+(_0x23515c!=undefined?0x1:0x0)+_0x5e4ac2[_0x386dca(0xd6)]),this[_0x386dca(0xfc)](_0x386dca(0x11c),_0x24bbe0);});}[a3_0x5c7906(0xf8)](_0x5b0407){const _0x1dccc7=a3_0x5c7906;var _0x401e97,_0x380647;const _0x23f808=_0x5b0407[0x0],_0x20f2ae=(_0x23f808&0x80)!==0x0,_0x1d25dc=_0x23f808&0xf,_0x216d24=_0x5b0407[0x1],_0x3ef98d=(_0x216d24&0x80)!==0x0;let _0x4a3082=_0x216d24&0x7f,_0x1fb3ff=0x2;if(_0x4a3082===0x7e)_0x4a3082=_0x5b0407['readUInt16BE'](_0x1fb3ff),_0x1fb3ff+=0x2;else _0x4a3082===0x7f&&(_0x4a3082=Number(_0x5b0407[_0x1dccc7(0x121)](_0x1fb3ff)),_0x1fb3ff+=0x8);const _0x484955=_0x3ef98d?_0x5b0407[_0x1dccc7(0x114)](_0x1fb3ff,_0x1fb3ff+0x4):Buffer[_0x1dccc7(0xdc)](0x0);if(_0x3ef98d)_0x1fb3ff+=0x4;let _0x1755b5=_0x5b0407[_0x1dccc7(0x114)](_0x1fb3ff,_0x1fb3ff+_0x4a3082);if(_0x3ef98d){const _0x5c009a=Buffer[_0x1dccc7(0xdc)](_0x1755b5[_0x1dccc7(0xd6)]);for(let _0x11b56f=0x0;_0x11b56f<_0x1755b5[_0x1dccc7(0xd6)];_0x11b56f++)_0x5c009a[_0x11b56f]=_0x1755b5[_0x11b56f]^_0x484955[_0x11b56f%0x4];_0x1755b5=_0x5c009a;}switch(_0x1d25dc){case 0x1:this[_0x1dccc7(0xd4)](_0x1dccc7(0xf4),new Error(_0x1dccc7(0x123)+_0x1755b5['toString'](_0x1dccc7(0xd8))));break;case 0x2:{if(this['_status']===_0x1dccc7(0xf6)){const _0x168af8=this['decode'](_0x1755b5);this[_0x1dccc7(0xd4)](_0x1dccc7(0xf6),_0x168af8),this[_0x1dccc7(0xe9)]='open',this[_0x1dccc7(0xfc)](_0x1dccc7(0x11c),Buffer[_0x1dccc7(0xdc)](0x0)),this[_0x1dccc7(0x119)]();return;}const _0x5eec8f=_0x1755b5[0x0];switch(_0x5eec8f){case 0x0:{_0x1755b5[0x0]=0x1,this[_0x1dccc7(0xfc)]('binary',_0x1755b5);break;}case 0x1:{const _0x310393=_0x1755b5[_0x1dccc7(0x114)](0x1)['toString'](_0x1dccc7(0xd8)),_0x161135=this[_0x1dccc7(0xf1)][_0x310393];if(_0x161135==undefined){this[_0x1dccc7(0xd4)](_0x1dccc7(0xf4),new Error(_0x1dccc7(0x110)));return;}_0x161135();break;}case 0x2:case 0x3:{const _0x58adac=_0x5eec8f===0x2?Number[_0x1dccc7(0xe7)]:_0x1755b5[0x1],_0x5abe86=_0x5eec8f===0x2?0x0:0x1,_0x25dc81=_0x1755b5[0x1+_0x5abe86],_0x2fb0a8=new TextDecoder()[_0x1dccc7(0x125)](_0x1755b5[_0x1dccc7(0x114)](0x2+_0x5abe86,0x2+_0x5abe86+_0x25dc81));if(['handshake',_0x1dccc7(0x11d),'error',_0x1dccc7(0xfd),'*'][_0x1dccc7(0x11e)](_0x2fb0a8))return;const _0x3d89f9=this['decode'](_0x1755b5[_0x1dccc7(0x114)](0x2+_0x5abe86+_0x25dc81)),_0x4cdef4=(_0x401e97=this[_0x1dccc7(0xf7)][_0x2fb0a8])!==null&&_0x401e97!==void 0x0?_0x401e97:[];let _0x41dd5c=![];for(const _0x4d9530 of _0x4cdef4){const _0x76b810=_0x4d9530[_0x1dccc7(0xfa)](undefined,_0x3d89f9);if(!_0x41dd5c&&_0x76b810!==undefined&&_0x58adac!==0x0){_0x41dd5c=!![];const _0x2a4f3c=Buffer['concat']([Buffer[_0x1dccc7(0xf5)]([0x4,_0x58adac]),this[_0x1dccc7(0x108)](_0x76b810)]);this[_0x1dccc7(0xfc)](_0x1dccc7(0x11c),_0x2a4f3c);}}const _0x56ca11=(_0x380647=this[_0x1dccc7(0xf7)]['*'])!==null&&_0x380647!==void 0x0?_0x380647:[];for(const _0x83067d of _0x56ca11)_0x83067d[_0x1dccc7(0xfa)](undefined,_0x2fb0a8,_0x3d89f9);if(!_0x41dd5c&&_0x5eec8f===0x3){}break;}case 0x4:{const _0x1adc25=_0x1755b5[0x1],_0x492241=this[_0x1dccc7(0xea)][_0x1adc25];if(_0x492241==undefined)return;const _0x21d9a7=this[_0x1dccc7(0x125)](_0x1755b5[_0x1dccc7(0x114)](0x2));_0x492241(_0x21d9a7);break;}}break;}case 0x9:this[_0x1dccc7(0xfc)]('pong',_0x1755b5);break;case 0xa:break;case 0x8:if(this[_0x1dccc7(0xe9)]==='closing')return;let _0x171bec=0x3e8,_0xfae204='';_0x1755b5['length']>=0x2&&(_0x171bec=_0x1755b5[_0x1dccc7(0x113)](0x0),_0xfae204=_0x1755b5[_0x1dccc7(0x114)](0x2)[_0x1dccc7(0xeb)](_0x1dccc7(0xd8)));this[_0x1dccc7(0xe3)](_0x171bec,_0xfae204,null);break;default:this[_0x1dccc7(0xd4)](_0x1dccc7(0xf4),new Error(_0x1dccc7(0xf9)+_0x1d25dc));}}[a3_0x5c7906(0x108)](_0x12cc6d){const _0x2f0828=a3_0x5c7906;return Buffer[_0x2f0828(0xf5)](JSON[_0x2f0828(0xf3)](_0x12cc6d),_0x2f0828(0xd8));}[a3_0x5c7906(0x125)](_0x292627){const _0x533bd7=a3_0x5c7906;return JSON[_0x533bd7(0x11f)](_0x292627[_0x533bd7(0xeb)](_0x533bd7(0xd8)));}[a3_0x5c7906(0x119)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x381e24,_0x4f97b0)=>{const _0xd6fbcf=a3_0x374f;if(this[_0xd6fbcf(0xe9)]!==_0xd6fbcf(0x11d))return;const _0xd0d314=crypto_1[_0xd6fbcf(0x111)]['randomUUID'](),_0x5602aa=setTimeout(()=>{const _0x2f5275=_0xd6fbcf;delete this[_0x2f5275(0xf1)][_0xd0d314];if(!['closing',_0x2f5275(0x103)]['includes'](this[_0x2f5275(0x100)]))this['disconnect'](0x3e8,'',null);_0x381e24(![]);},this[_0xd6fbcf(0x10f)]);this['pingRequests'][_0xd0d314]=()=>{const _0x14076a=_0xd6fbcf;delete this[_0x14076a(0xf1)][_0xd0d314],clearTimeout(_0x5602aa),_0x381e24(!![]),setTimeout(()=>{const _0x20d725=_0x14076a;if(this[_0x20d725(0xe9)]!=='open')return;this[_0x20d725(0x119)]();},this[_0x14076a(0x128)]);},this['send']('binary',Buffer[_0xd6fbcf(0x10b)]([Buffer['from']([0x0]),Buffer[_0xd6fbcf(0xf5)](_0xd0d314)]));});});}['on'](_0x5e1b65,_0x1bb04e){const _0x13e0fc=a3_0x5c7906;if(this[_0x13e0fc(0xf7)][_0x5e1b65]==undefined)this[_0x13e0fc(0xf7)][_0x5e1b65]=[];this[_0x13e0fc(0xf7)][_0x5e1b65][_0x13e0fc(0x124)](_0x1bb04e);}[a3_0x5c7906(0x127)](_0x4951ed,_0x5d7914){const _0x559c31=a3_0x5c7906;if(_0x5d7914==undefined){this['handlers'][_0x4951ed]=[];return;}const _0x465d03=this[_0x559c31(0xf7)][_0x4951ed],_0x1c875c=(_0x465d03!==null&&_0x465d03!==void 0x0?_0x465d03:[])[_0x559c31(0xde)](_0x5da39c=>_0x5da39c===_0x5d7914);if(_0x1c875c===-0x1)throw new Error(_0x559c31(0x126)+_0x4951ed+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x465d03[_0x559c31(0xd5)](_0x1c875c,0x1);}[a3_0x5c7906(0xd4)](_0x53269e,_0x48d4ac){var _0x1ebf65,_0x5a76bc;const _0x3de063=(_0x1ebf65=this['handlers'][_0x53269e])!==null&&_0x1ebf65!==void 0x0?_0x1ebf65:[];for(const _0x3b2370 of _0x3de063)_0x3b2370(_0x48d4ac);const _0x4ae79c=(_0x5a76bc=this['handlers']['*'])!==null&&_0x5a76bc!==void 0x0?_0x5a76bc:[];for(const _0x96b5f2 of _0x4ae79c)_0x96b5f2(_0x53269e,_0x48d4ac);}static['fromUpgradeRequest'](_0x4105d3,_0x6a1d25){const _0x249f22=a3_0x5c7906,_0x39cc0e=_0x4105d3[_0x249f22(0x11a)][_0x249f22(0x10e)];if(_0x39cc0e==undefined)return _0x6a1d25[_0x249f22(0x104)](),null;const _0x473bd8=crypto_1[_0x249f22(0x111)]['createHash']('sha1');_0x473bd8[_0x249f22(0x122)](_0x39cc0e+'258EAFA5-E914-47DA-95CA-C5AB0DC85B11');const _0x3dcd6d=_0x473bd8[_0x249f22(0xef)](_0x249f22(0x120)),_0x56cf69=['HTTP/1.1\x20101\x20Switching\x20Protocols',_0x249f22(0xec),_0x249f22(0x102),_0x249f22(0x116)+_0x3dcd6d];return _0x6a1d25[_0x249f22(0x10c)](_0x56cf69[_0x249f22(0xf2)]('\x0d\x0a')+'\x0d\x0a\x0d\x0a'),new Socket(_0x6a1d25);}}function a3_0x374f(_0x3bf5e0,_0x567074){const _0x1e7c5b=a3_0x1e7c();return a3_0x374f=function(_0x374f7c,_0x35dcf3){_0x374f7c=_0x374f7c-0xd4;let _0x49140d=_0x1e7c5b[_0x374f7c];return _0x49140d;},a3_0x374f(_0x3bf5e0,_0x567074);}exports['default']=Socket;