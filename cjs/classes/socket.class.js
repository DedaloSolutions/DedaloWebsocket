'use strict';const a2_0x2cd527=a2_0x138f;(function(_0x4e8b75,_0x4e1ab2){const _0x473111=a2_0x138f,_0x1cbc60=_0x4e8b75();while(!![]){try{const _0x2cc1a5=-parseInt(_0x473111(0x178))/0x1+parseInt(_0x473111(0x181))/0x2*(-parseInt(_0x473111(0x194))/0x3)+-parseInt(_0x473111(0x186))/0x4*(-parseInt(_0x473111(0x17d))/0x5)+parseInt(_0x473111(0x14b))/0x6+parseInt(_0x473111(0x18e))/0x7+parseInt(_0x473111(0x196))/0x8*(parseInt(_0x473111(0x16b))/0x9)+-parseInt(_0x473111(0x185))/0xa;if(_0x2cc1a5===_0x4e1ab2)break;else _0x1cbc60['push'](_0x1cbc60['shift']());}catch(_0x2a7b1b){_0x1cbc60['push'](_0x1cbc60['shift']());}}}(a2_0x24ef,0xd35da));function a2_0x24ef(){const _0xf8755b=['off','value','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','pingRequests','handlers','sec-websocket-key','Received\x20a\x20request\x20with\x20eventName\x20','toString','__awaiter','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','Received\x20non-standard\x20text\x20message:\x20','crypto','The\x20websocket\x20is\x20not\x20connected','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','9194946uixJZQ','includes','readUInt8','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','end','destroy','write','next','alloc','headers','\x20but\x20no\x20pending\x20request\x20was\x20found','pingInterval','createHash','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','splice','\x20but\x20no\x20handler\x20return\x20a\x20result','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','Sec-WebSocket-Accept:\x20','__esModule','handshake','send','readUInt16BE','text','Received\x20a\x20response\x20for\x20the\x20id\x20','decode','push','raise','throw','disconnect','pendingRequests','length','digest','963QPKBhD','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20',';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?','close','closed','base64','then','fromUpgradeRequest','join','HTTP/1.1\x20101\x20Switching\x20Protocols','utf-8','socket','error','1121644wSjQsa','__importDefault','status','default','handle','331130ltqDHU','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','pong','update','3026EsLWMg','ping','concat','\x0d\x0a\x0d\x0a','16327420ZRvTxW','24ADJnlt','encode','Upgrade:\x20websocket','open','Received\x20message\x20with\x20unsupported\x20opcode:\x20','binary','checkHeartbeat','from','10974103hPkhyR','requestId','data','readBigUInt64BE','pingTimeout','slice','675VHsmiJ','Connection:\x20Upgrade','34616uMjJNJ'];a2_0x24ef=function(){return _0xf8755b;};return a2_0x24ef();}function a2_0x138f(_0x40ad15,_0x11ccae){const _0x24ef48=a2_0x24ef();return a2_0x138f=function(_0x138ff5,_0x19758f){_0x138ff5=_0x138ff5-0x140;let _0x5aef03=_0x24ef48[_0x138ff5];return _0x5aef03;},a2_0x138f(_0x40ad15,_0x11ccae);}var __awaiter=this&&this[a2_0x2cd527(0x145)]||function(_0x5d50fc,_0x23b3c3,_0x4b5893,_0x14e51e){function _0x2f84c0(_0x1467f7){return _0x1467f7 instanceof _0x4b5893?_0x1467f7:new _0x4b5893(function(_0x3b98ae){_0x3b98ae(_0x1467f7);});}return new(_0x4b5893||(_0x4b5893=Promise))(function(_0x5c2ba7,_0x41e38b){const _0x18c75f=a2_0x138f;function _0x49fc92(_0x4d15d0){const _0x1d14ee=a2_0x138f;try{_0x23404e(_0x14e51e[_0x1d14ee(0x152)](_0x4d15d0));}catch(_0x1d0f6e){_0x41e38b(_0x1d0f6e);}}function _0x194b0f(_0x302d5c){const _0x5c1c8b=a2_0x138f;try{_0x23404e(_0x14e51e[_0x5c1c8b(0x166)](_0x302d5c));}catch(_0x2e9c2a){_0x41e38b(_0x2e9c2a);}}function _0x23404e(_0x3a3f73){const _0xac6be4=a2_0x138f;_0x3a3f73['done']?_0x5c2ba7(_0x3a3f73[_0xac6be4(0x198)]):_0x2f84c0(_0x3a3f73['value'])[_0xac6be4(0x171)](_0x49fc92,_0x194b0f);}_0x23404e((_0x14e51e=_0x14e51e['apply'](_0x5d50fc,_0x23b3c3||[]))[_0x18c75f(0x152)]());});},__importDefault=this&&this[a2_0x2cd527(0x179)]||function(_0x524a14){const _0x12f645=a2_0x2cd527;return _0x524a14&&_0x524a14[_0x12f645(0x15d)]?_0x524a14:{'default':_0x524a14};};Object['defineProperty'](exports,a2_0x2cd527(0x15d),{'value':!![]});const crypto_1=__importDefault(require(a2_0x2cd527(0x148)));class Socket{constructor(_0x4622df){const _0x3587ac=a2_0x2cd527;this[_0x3587ac(0x176)]=_0x4622df,this[_0x3587ac(0x17a)]='handshake',this[_0x3587ac(0x156)]=0x5*0x3e8,this['pingTimeout']=0x2*0x3e8,this[_0x3587ac(0x140)]={},this['requestId']=0x1,this[_0x3587ac(0x168)]={},this[_0x3587ac(0x190)]={},this[_0x3587ac(0x141)]={},this['socket']['on']('data',_0x5a4137=>this[_0x3587ac(0x17c)](_0x5a4137)),this[_0x3587ac(0x176)]['on'](_0x3587ac(0x177),_0x498bec=>this['raise'](_0x3587ac(0x177),_0x498bec)),this[_0x3587ac(0x176)]['on'](_0x3587ac(0x16e),()=>{}),this['checkHeartbeat']();const _0xbb2c33=this[_0x3587ac(0x187)]({'pingInterval':this['pingInterval']});this['send'](_0x3587ac(0x18b),_0xbb2c33);}[a2_0x2cd527(0x167)](){return __awaiter(this,arguments,void 0x0,function*(_0x15474e=0x3e8,_0x78ac5c='',_0x4fa7f4=0x1388){return new Promise((_0x3c23ba,_0x27152d)=>{const _0x47ae4a=a2_0x138f,_0x3ab957=Buffer[_0x47ae4a(0x18d)](_0x78ac5c,_0x47ae4a(0x175)),_0x10cc23=Buffer[_0x47ae4a(0x153)](0x2+_0x3ab957['length']);_0x10cc23['writeUInt16BE'](_0x15474e,0x0),_0x3ab957['copy'](_0x10cc23,0x2);const _0x2dd166=_0x10cc23[_0x47ae4a(0x169)],_0x48ed77=_0x2dd166<0x7e?_0x2dd166:_0x2dd166<0x10000?0x7e:0x7f,_0x126ced=_0x48ed77===0x7e?Buffer[_0x47ae4a(0x18d)]([0x88,0x7e,_0x2dd166>>0x8&0xff,_0x2dd166&0xff]):_0x48ed77===0x7f?Buffer[_0x47ae4a(0x18d)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x2dd166>>0x8&0xff,_0x2dd166&0xff]):Buffer[_0x47ae4a(0x18d)]([0x88,_0x2dd166]),_0x242e6c=Buffer[_0x47ae4a(0x183)]([_0x126ced,_0x10cc23]);this[_0x47ae4a(0x176)][_0x47ae4a(0x151)](_0x242e6c),this[_0x47ae4a(0x17a)]='closing';if(_0x4fa7f4===null)this[_0x47ae4a(0x17a)]=_0x47ae4a(0x16f),this[_0x47ae4a(0x176)][_0x47ae4a(0x14f)](),this['raise'](_0x47ae4a(0x16e),{'code':_0x15474e,'reason':_0x78ac5c}),_0x3c23ba();else{let _0x44ea4=!![];this[_0x47ae4a(0x176)]['once'](_0x47ae4a(0x190),_0x515d51=>{const _0x2c04a6=_0x47ae4a;if(!_0x44ea4)return;_0x515d51[0x0]===0x88?(this[_0x2c04a6(0x17a)]=_0x2c04a6(0x16f),this[_0x2c04a6(0x176)][_0x2c04a6(0x14f)](),this[_0x2c04a6(0x165)](_0x2c04a6(0x16e),{'code':_0x15474e,'reason':_0x78ac5c}),_0x3c23ba()):_0x27152d(new Error(_0x2c04a6(0x14e)));}),setTimeout(()=>{const _0x22b427=_0x47ae4a;_0x44ea4=![],_0x27152d(new Error('Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.')),this[_0x22b427(0x176)][_0x22b427(0x14f)]();},_0x4fa7f4);}});});}[a2_0x2cd527(0x15f)](_0x54d5aa,_0x4e3744){const _0x36254b=a2_0x2cd527;let _0x56ae11,_0x10e10e;switch(_0x54d5aa){case _0x36254b(0x161):_0x56ae11=Buffer['from'](_0x4e3744,_0x36254b(0x175)),_0x10e10e=0x1;break;case _0x36254b(0x18b):_0x56ae11=_0x4e3744,_0x10e10e=0x2;break;case _0x36254b(0x182):_0x56ae11=_0x4e3744,_0x10e10e=0x9;break;case _0x36254b(0x17f):_0x56ae11=_0x4e3744,_0x10e10e=0xa;break;}const _0x25620a=[];if(_0x56ae11[_0x36254b(0x169)]<0x7e)_0x25620a[_0x36254b(0x164)](_0x56ae11[_0x36254b(0x169)]);else{if(_0x56ae11[_0x36254b(0x169)]<0x10000)_0x25620a[_0x36254b(0x164)](0x7e,_0x56ae11[_0x36254b(0x169)]>>0x8&0xff,_0x56ae11[_0x36254b(0x169)]&0xff);else{_0x25620a[_0x36254b(0x164)](0x7f);for(let _0x1eba63=0x7;_0x1eba63>=0x0;_0x1eba63--)_0x25620a['push'](_0x56ae11[_0x36254b(0x169)]>>_0x1eba63*0x8&0xff);}}const _0x389bad=Buffer[_0x36254b(0x183)]([Buffer[_0x36254b(0x18d)]([0x80|_0x10e10e,..._0x25620a]),_0x56ae11]);this['socket'][_0x36254b(0x151)](_0x389bad);}['emit'](_0x5a7de7,_0x4312c7,_0x5e679c,_0x28f95e=0x32*0x3e8){const _0x41f7e9=a2_0x2cd527;if(this[_0x41f7e9(0x176)]==undefined||this[_0x41f7e9(0x17a)]!==_0x41f7e9(0x189))throw new Error(_0x41f7e9(0x149));if([_0x41f7e9(0x15e),_0x41f7e9(0x189),_0x41f7e9(0x177),'close'][_0x41f7e9(0x14c)](_0x5a7de7))throw new Error(_0x41f7e9(0x17e));const _0x4243c3=_0x5e679c==undefined?0x0:this[_0x41f7e9(0x18f)],_0x191848=Buffer[_0x41f7e9(0x18d)](_0x5a7de7,_0x41f7e9(0x175));if(_0x191848[_0x41f7e9(0x169)]>0xff)throw new Error(_0x41f7e9(0x15b));if(_0x5e679c!=undefined){this[_0x41f7e9(0x18f)]=(this[_0x41f7e9(0x18f)]+0x1)%0x80||0x1;const _0x258cff=setTimeout(()=>{const _0x276a25=_0x41f7e9;delete this[_0x276a25(0x168)][_0x4243c3],_0x5e679c(new Error('Timeout'));},_0x28f95e);this[_0x41f7e9(0x168)][_0x4243c3]=_0x2373c4=>{if(!(_0x2373c4 instanceof Error))clearTimeout(_0x258cff);_0x5e679c(_0x2373c4);};}const _0x13f8df=Buffer[_0x41f7e9(0x183)]([Buffer[_0x41f7e9(0x18d)]([_0x4243c3|0x80,_0x191848[_0x41f7e9(0x169)]]),_0x191848,this[_0x41f7e9(0x187)](_0x4312c7)]);this['send']('binary',_0x13f8df);}[a2_0x2cd527(0x17c)](_0x3f22b2){const _0xf53fc=a2_0x2cd527;var _0x5ea3dc;const _0x464324=_0x3f22b2[0x0],_0x4100fa=(_0x464324&0x80)!==0x0,_0x45b273=_0x464324&0xf,_0x3813aa=_0x3f22b2[0x1],_0x2ade88=(_0x3813aa&0x80)!==0x0;let _0x55fb74=_0x3813aa&0x7f,_0x253181=0x2;if(_0x55fb74===0x7e)_0x55fb74=_0x3f22b2[_0xf53fc(0x160)](_0x253181),_0x253181+=0x2;else _0x55fb74===0x7f&&(_0x55fb74=Number(_0x3f22b2[_0xf53fc(0x191)](_0x253181)),_0x253181+=0x8);const _0x2795bf=_0x2ade88?_0x3f22b2['slice'](_0x253181,_0x253181+0x4):Buffer[_0xf53fc(0x153)](0x0);if(_0x2ade88)_0x253181+=0x4;let _0x459dd8=_0x3f22b2[_0xf53fc(0x193)](_0x253181,_0x253181+_0x55fb74);if(_0x2ade88){const _0x3bf7d3=Buffer[_0xf53fc(0x153)](_0x459dd8[_0xf53fc(0x169)]);for(let _0x26c6b6=0x0;_0x26c6b6<_0x459dd8['length'];_0x26c6b6++)_0x3bf7d3[_0x26c6b6]=_0x459dd8[_0x26c6b6]^_0x2795bf[_0x26c6b6%0x4];_0x459dd8=_0x3bf7d3;}switch(_0x45b273){case 0x1:this['raise'](_0xf53fc(0x177),new Error(_0xf53fc(0x147)+_0x459dd8[_0xf53fc(0x144)](_0xf53fc(0x175))));break;case 0x2:{if(this[_0xf53fc(0x17a)]===_0xf53fc(0x15e)){const _0x5b8e92=this[_0xf53fc(0x163)](_0x459dd8);this['raise'](_0xf53fc(0x15e),_0x5b8e92),this[_0xf53fc(0x17a)]=_0xf53fc(0x189),this[_0xf53fc(0x15f)](_0xf53fc(0x18b),Buffer[_0xf53fc(0x153)](0x0));return;}const _0x47ef10=_0x459dd8[_0xf53fc(0x14d)](0x0),_0x3817ed=_0x47ef10&0x7f,_0x5b04cd=(_0x47ef10&0x80)!==0x0;if(_0x5b04cd){const _0x59a360=_0x459dd8[_0xf53fc(0x14d)](0x1),_0x598ee8=_0x459dd8['slice'](0x2,0x2+_0x59a360)[_0xf53fc(0x144)]('utf-8');if([_0xf53fc(0x15e),'open','error',_0xf53fc(0x16e)][_0xf53fc(0x14c)](_0x598ee8)){this['raise'](_0xf53fc(0x177),new Error(_0xf53fc(0x143)+_0x598ee8+_0xf53fc(0x16d)));return;}const _0x53605c=this['decode'](_0x459dd8[_0xf53fc(0x193)](0x2+_0x59a360)),_0x47f730=(_0x5ea3dc=this[_0xf53fc(0x141)][_0x598ee8])!==null&&_0x5ea3dc!==void 0x0?_0x5ea3dc:[];let _0x5d0eb4=![];for(const _0x4bfa32 of _0x47f730){const _0x411012=_0x4bfa32['call'](undefined,_0x53605c);if(!_0x5d0eb4&&_0x411012!==undefined&&_0x3817ed!==0x0){_0x5d0eb4=!![];const _0x50f227=Buffer[_0xf53fc(0x183)]([Buffer[_0xf53fc(0x18d)]([_0x3817ed&0x7f]),this['encode'](_0x411012)]);this[_0xf53fc(0x15f)](_0xf53fc(0x18b),_0x50f227);}}if(!_0x5d0eb4&&_0x3817ed!==0x0)this[_0xf53fc(0x165)]('error',new Error(_0xf53fc(0x16c)+_0x598ee8+_0xf53fc(0x15a)));return;}const _0x8701a=this[_0xf53fc(0x168)][_0x3817ed];if(_0x8701a==undefined){this['raise'](_0xf53fc(0x177),new Error(_0xf53fc(0x162)+_0x3817ed+_0xf53fc(0x155)));return;}const _0x41e124=this[_0xf53fc(0x163)](_0x459dd8[_0xf53fc(0x193)](0x1));_0x8701a['call'](undefined,_0x41e124);break;}case 0x9:this[_0xf53fc(0x15f)](_0xf53fc(0x17f),_0x459dd8);break;case 0xa:const _0x2e9e4c=_0x459dd8[_0xf53fc(0x144)]('utf-8'),_0x431ebc=this[_0xf53fc(0x140)][_0x2e9e4c];if(_0x431ebc==undefined){this[_0xf53fc(0x165)](_0xf53fc(0x177),new Error(_0xf53fc(0x14a)));return;}_0x431ebc();break;case 0x8:if(this['status']==='closing')return;let _0x2ea07d=0x3e8,_0x306178='';_0x459dd8['length']>=0x2&&(_0x2ea07d=_0x459dd8[_0xf53fc(0x160)](0x0),_0x306178=_0x459dd8[_0xf53fc(0x193)](0x2)['toString'](_0xf53fc(0x175)));this['disconnect'](_0x2ea07d,_0x306178,null);break;default:this[_0xf53fc(0x165)](_0xf53fc(0x177),new Error(_0xf53fc(0x18a)+_0x45b273));}}[a2_0x2cd527(0x187)](_0x10e30f){const _0x52f103=a2_0x2cd527;return Buffer['from'](JSON['stringify'](_0x10e30f),_0x52f103(0x175));}['decode'](_0x4e6b9a){const _0x17e65a=a2_0x2cd527;return JSON['parse'](_0x4e6b9a[_0x17e65a(0x144)]('utf-8'));}['checkHeartbeat'](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x31e4b0,_0x54e1b0)=>{const _0x17a538=a2_0x138f,_0x32ac60=crypto_1['default']['randomUUID'](),_0x5b48bb=setTimeout(()=>{const _0x3af498=a2_0x138f;delete this[_0x3af498(0x140)][_0x32ac60],this[_0x3af498(0x167)](0x3e8,'',null),_0x31e4b0(![]);},this[_0x17a538(0x192)]);this[_0x17a538(0x140)][_0x32ac60]=()=>{delete this['pingRequests'][_0x32ac60],clearTimeout(_0x5b48bb),_0x31e4b0(!![]),setTimeout(()=>{const _0x2c1584=a2_0x138f;if(this[_0x2c1584(0x17a)]!=='open')return;this[_0x2c1584(0x18c)]();},this['pingInterval']);},this['send'](_0x17a538(0x182),Buffer['from'](_0x32ac60));});});}['on'](_0x36e709,_0x3b66c7){const _0x483ff2=a2_0x2cd527;if(this[_0x483ff2(0x141)][_0x36e709]==undefined)this[_0x483ff2(0x141)][_0x36e709]=[];this[_0x483ff2(0x141)][_0x36e709][_0x483ff2(0x164)](_0x3b66c7);}[a2_0x2cd527(0x197)](_0x327f9b,_0x4a9946){const _0x341cdf=a2_0x2cd527;if(_0x4a9946==undefined){this[_0x341cdf(0x141)][_0x327f9b]=[];return;}const _0xc3087c=this[_0x341cdf(0x141)][_0x327f9b],_0x313e2f=(_0xc3087c!==null&&_0xc3087c!==void 0x0?_0xc3087c:[])['findIndex'](_0x4e6711=>_0x4e6711===_0x4a9946);if(_0x313e2f===-0x1)throw new Error(_0x341cdf(0x158)+_0x327f9b+_0x341cdf(0x146));_0xc3087c[_0x341cdf(0x159)](_0x313e2f,0x1);}[a2_0x2cd527(0x165)](_0x37159a,_0x12eb07){const _0x49ae93=a2_0x2cd527;var _0x14036b;const _0x106371=(_0x14036b=this[_0x49ae93(0x141)][_0x37159a])!==null&&_0x14036b!==void 0x0?_0x14036b:[];for(const _0x1e7787 of _0x106371){_0x1e7787(_0x12eb07);}}static[a2_0x2cd527(0x172)](_0x5cd664,_0x12e923){const _0x5522a0=a2_0x2cd527,_0x337a2b=_0x5cd664[_0x5522a0(0x154)][_0x5522a0(0x142)];if(_0x337a2b==undefined)return _0x12e923[_0x5522a0(0x150)](),null;const _0x24122b=crypto_1[_0x5522a0(0x17b)][_0x5522a0(0x157)]('sha1');_0x24122b[_0x5522a0(0x180)](_0x337a2b+_0x5522a0(0x199));const _0x4c0e57=_0x24122b[_0x5522a0(0x16a)](_0x5522a0(0x170)),_0x544e6d=[_0x5522a0(0x174),_0x5522a0(0x188),_0x5522a0(0x195),_0x5522a0(0x15c)+_0x4c0e57];return _0x12e923['write'](_0x544e6d[_0x5522a0(0x173)]('\x0d\x0a')+_0x5522a0(0x184)),new Socket(_0x12e923);}}exports['default']=Socket;