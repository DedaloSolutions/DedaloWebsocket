'use strict';const a2_0x4b41a9=a2_0x3d78;(function(_0x1700d4,_0x31f96a){const _0xb588f9=a2_0x3d78,_0x3635cb=_0x1700d4();while(!![]){try{const _0x474b0a=parseInt(_0xb588f9(0x1e4))/0x1+-parseInt(_0xb588f9(0x1e7))/0x2+parseInt(_0xb588f9(0x21b))/0x3+-parseInt(_0xb588f9(0x204))/0x4+-parseInt(_0xb588f9(0x1f4))/0x5*(-parseInt(_0xb588f9(0x1ef))/0x6)+-parseInt(_0xb588f9(0x1f6))/0x7+parseInt(_0xb588f9(0x1e5))/0x8;if(_0x474b0a===_0x31f96a)break;else _0x3635cb['push'](_0x3635cb['shift']());}catch(_0x364500){_0x3635cb['push'](_0x3635cb['shift']());}}}(a2_0x5b62,0x53554));function a2_0x3d78(_0xa761fb,_0x39bf27){const _0x5b624e=a2_0x5b62();return a2_0x3d78=function(_0x3d78e8,_0x4484cd){_0x3d78e8=_0x3d78e8-0x1c7;let _0xe5f7be=_0x5b624e[_0x3d78e8];return _0xe5f7be;},a2_0x3d78(_0xa761fb,_0x39bf27);}var __awaiter=this&&this['__awaiter']||function(_0x3b4cf2,_0x4965aa,_0x2efed4,_0x5ede52){function _0x251136(_0x4babe2){return _0x4babe2 instanceof _0x2efed4?_0x4babe2:new _0x2efed4(function(_0x54f5dd){_0x54f5dd(_0x4babe2);});}return new(_0x2efed4||(_0x2efed4=Promise))(function(_0x66562,_0x340a3b){const _0x57c79e=a2_0x3d78;function _0x1a76b5(_0x476ea0){try{_0x5b6665(_0x5ede52['next'](_0x476ea0));}catch(_0x3670bf){_0x340a3b(_0x3670bf);}}function _0x5db220(_0x12b394){try{_0x5b6665(_0x5ede52['throw'](_0x12b394));}catch(_0x1642d1){_0x340a3b(_0x1642d1);}}function _0x5b6665(_0xa0a02b){const _0x178402=a2_0x3d78;_0xa0a02b[_0x178402(0x1f5)]?_0x66562(_0xa0a02b['value']):_0x251136(_0xa0a02b[_0x178402(0x208)])[_0x178402(0x1cc)](_0x1a76b5,_0x5db220);}_0x5b6665((_0x5ede52=_0x5ede52[_0x57c79e(0x201)](_0x3b4cf2,_0x4965aa||[]))[_0x57c79e(0x1f2)]());});},__importDefault=this&&this[a2_0x4b41a9(0x20a)]||function(_0x1c82fb){const _0x89f6bc=a2_0x4b41a9;return _0x1c82fb&&_0x1c82fb[_0x89f6bc(0x1e0)]?_0x1c82fb:{'default':_0x1c82fb};};Object[a2_0x4b41a9(0x1d2)](exports,a2_0x4b41a9(0x1e0),{'value':!![]});function a2_0x5b62(){const _0x20d950=['258EAFA5-E914-47DA-95CA-C5AB0DC85B11','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','send','socket','apply','base64','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','113508KFWBXq','end','crypto','headers','value','alloc','__importDefault','pingTimeout','stringify','encode','concat','default','slice','open','readUInt16BE','\x20but\x20no\x20handler\x20return\x20a\x20result','disconnect','digest','write','readBigUInt64BE','utf-8','pingRequests','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','106773amqMsb','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','closed','sec-websocket-key','ping','requestId','update','pong','data','The\x20websocket\x20is\x20not\x20connected','handshake','Received\x20a\x20response\x20for\x20the\x20id\x20','then','Sec-WebSocket-Accept:\x20','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','push','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','defineProperty','HTTP/1.1\x20101\x20Switching\x20Protocols','call','fromUpgradeRequest','decode','join','findIndex','handlers','toString','copy','readUInt8','Received\x20message\x20with\x20unsupported\x20opcode:\x20','destroy','checkHeartbeat','__esModule','text','Timeout','\x20but\x20no\x20pending\x20request\x20was\x20found','376358fVCGxD','2978128vadtSw','Received\x20non-standard\x20text\x20message:\x20','820764uLsvOU','createHash','off','pingInterval','binary','writeUInt16BE','from','parse','2810958eqOXya','\x0d\x0a\x0d\x0a','splice','next','length','5Bmuysc','done','3308319MZEnhu','close','status','raise','randomUUID','pendingRequests','error'];a2_0x5b62=function(){return _0x20d950;};return a2_0x5b62();}const crypto_1=__importDefault(require(a2_0x4b41a9(0x206)));class Socket{constructor(_0x4b1478){const _0x4a6602=a2_0x4b41a9;this[_0x4a6602(0x200)]=_0x4b1478,this[_0x4a6602(0x1f8)]=_0x4a6602(0x1ca),this[_0x4a6602(0x1ea)]=0x5*0x3e8,this[_0x4a6602(0x20b)]=0x2*0x3e8,this[_0x4a6602(0x219)]={},this[_0x4a6602(0x220)]=0x1,this[_0x4a6602(0x1fb)]={},this[_0x4a6602(0x1c8)]={},this[_0x4a6602(0x1d9)]={},this[_0x4a6602(0x200)]['on'](_0x4a6602(0x1c8),_0x2f7e4c=>this['handle'](_0x2f7e4c)),this[_0x4a6602(0x200)]['on'](_0x4a6602(0x1fc),_0x13dcc7=>this[_0x4a6602(0x1f9)](_0x4a6602(0x1fc),_0x13dcc7)),this['socket']['on'](_0x4a6602(0x1f7),()=>{}),this[_0x4a6602(0x1df)]();const _0x1299ff=this[_0x4a6602(0x20d)]({'pingInterval':this[_0x4a6602(0x1ea)]});this[_0x4a6602(0x1ff)](_0x4a6602(0x1eb),_0x1299ff);}['disconnect'](){return __awaiter(this,arguments,void 0x0,function*(_0x5ad947=0x3e8,_0x46de68='',_0x393bda=0x1388){return new Promise((_0x4a7558,_0xa63127)=>{const _0xa94ac5=a2_0x3d78,_0x4b1b2d=Buffer[_0xa94ac5(0x1ed)](_0x46de68,_0xa94ac5(0x218)),_0x48efd3=Buffer[_0xa94ac5(0x209)](0x2+_0x4b1b2d[_0xa94ac5(0x1f3)]);_0x48efd3[_0xa94ac5(0x1ec)](_0x5ad947,0x0),_0x4b1b2d[_0xa94ac5(0x1db)](_0x48efd3,0x2);const _0x37c1b7=_0x48efd3[_0xa94ac5(0x1f3)],_0x2c2315=_0x37c1b7<0x7e?_0x37c1b7:_0x37c1b7<0x10000?0x7e:0x7f,_0x543d4d=_0x2c2315===0x7e?Buffer[_0xa94ac5(0x1ed)]([0x88,0x7e,_0x37c1b7>>0x8&0xff,_0x37c1b7&0xff]):_0x2c2315===0x7f?Buffer['from']([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x37c1b7>>0x8&0xff,_0x37c1b7&0xff]):Buffer[_0xa94ac5(0x1ed)]([0x88,_0x37c1b7]),_0x34945a=Buffer[_0xa94ac5(0x20e)]([_0x543d4d,_0x48efd3]);this[_0xa94ac5(0x200)][_0xa94ac5(0x216)](_0x34945a),this[_0xa94ac5(0x1f8)]='closing';if(_0x393bda===null)this[_0xa94ac5(0x1f8)]=_0xa94ac5(0x21d),this[_0xa94ac5(0x200)][_0xa94ac5(0x205)](),this['raise']('close',{'code':_0x5ad947,'reason':_0x46de68}),_0x4a7558();else{let _0x15bdc9=!![];this['socket']['once'](_0xa94ac5(0x1c8),_0x48e2be=>{const _0x5d10b8=_0xa94ac5;if(!_0x15bdc9)return;_0x48e2be[0x0]===0x88?(this[_0x5d10b8(0x1f8)]=_0x5d10b8(0x21d),this[_0x5d10b8(0x200)]['end'](),this[_0x5d10b8(0x1f9)]('close',{'code':_0x5ad947,'reason':_0x46de68}),_0x4a7558()):_0xa63127(new Error('Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.'));}),setTimeout(()=>{const _0x3fc277=_0xa94ac5;_0x15bdc9=![],_0xa63127(new Error(_0x3fc277(0x1d0))),this['socket'][_0x3fc277(0x205)]();},_0x393bda);}});});}['send'](_0x1f0f80,_0x33a12b){const _0x146e9e=a2_0x4b41a9;let _0x26d4d0,_0x479efd;switch(_0x1f0f80){case _0x146e9e(0x1e1):_0x26d4d0=Buffer[_0x146e9e(0x1ed)](_0x33a12b,_0x146e9e(0x218)),_0x479efd=0x1;break;case _0x146e9e(0x1eb):_0x26d4d0=_0x33a12b,_0x479efd=0x2;break;case _0x146e9e(0x21f):_0x26d4d0=_0x33a12b,_0x479efd=0x9;break;case _0x146e9e(0x1c7):_0x26d4d0=_0x33a12b,_0x479efd=0xa;break;}const _0x297e38=[];if(_0x26d4d0['length']<0x7e)_0x297e38[_0x146e9e(0x1cf)](_0x26d4d0[_0x146e9e(0x1f3)]);else{if(_0x26d4d0['length']<0x10000)_0x297e38[_0x146e9e(0x1cf)](0x7e,_0x26d4d0[_0x146e9e(0x1f3)]>>0x8&0xff,_0x26d4d0[_0x146e9e(0x1f3)]&0xff);else{_0x297e38[_0x146e9e(0x1cf)](0x7f);for(let _0x50fe0a=0x7;_0x50fe0a>=0x0;_0x50fe0a--)_0x297e38[_0x146e9e(0x1cf)](_0x26d4d0[_0x146e9e(0x1f3)]>>_0x50fe0a*0x8&0xff);}}const _0x2f8860=Buffer[_0x146e9e(0x20e)]([Buffer[_0x146e9e(0x1ed)]([0x80|_0x479efd,..._0x297e38]),_0x26d4d0]);this[_0x146e9e(0x200)][_0x146e9e(0x216)](_0x2f8860);}['emit'](_0x247340,_0x3aba17,_0x573199,_0x281c3b=0x32*0x3e8){const _0x3a88ca=a2_0x4b41a9;if(this[_0x3a88ca(0x200)]==undefined||this['status']!==_0x3a88ca(0x211))throw new Error(_0x3a88ca(0x1c9));if([_0x3a88ca(0x1ca),_0x3a88ca(0x211),_0x3a88ca(0x1fc),_0x3a88ca(0x1f7)]['includes'](_0x247340))throw new Error(_0x3a88ca(0x1fe));const _0x41d988=_0x573199==undefined?0x0:this[_0x3a88ca(0x220)],_0x1f830c=Buffer['from'](_0x247340,_0x3a88ca(0x218));if(_0x1f830c[_0x3a88ca(0x1f3)]>0xff)throw new Error(_0x3a88ca(0x21a));if(_0x573199!=undefined){this[_0x3a88ca(0x220)]=(this[_0x3a88ca(0x220)]+0x1)%0x80||0x1;const _0x49fdfa=setTimeout(()=>{const _0x529306=_0x3a88ca;delete this[_0x529306(0x1fb)][_0x41d988],_0x573199(new Error(_0x529306(0x1e2)));},_0x281c3b);this[_0x3a88ca(0x1fb)][_0x41d988]=_0xbeab57=>{if(!(_0xbeab57 instanceof Error))clearTimeout(_0x49fdfa);_0x573199(_0xbeab57);};}const _0x2226cd=Buffer[_0x3a88ca(0x20e)]([Buffer[_0x3a88ca(0x1ed)]([_0x41d988|0x80,_0x1f830c[_0x3a88ca(0x1f3)]]),_0x1f830c,this[_0x3a88ca(0x20d)](_0x3aba17)]);this[_0x3a88ca(0x1ff)](_0x3a88ca(0x1eb),_0x2226cd);}['handle'](_0x334fb8){const _0x103c43=a2_0x4b41a9;var _0x1ca8d7,_0x423fa7;const _0x44af54=_0x334fb8[0x0],_0x3e6b9b=(_0x44af54&0x80)!==0x0,_0x439bc1=_0x44af54&0xf,_0x29b9cc=_0x334fb8[0x1],_0x6328e2=(_0x29b9cc&0x80)!==0x0;let _0x4faff4=_0x29b9cc&0x7f,_0x51df4d=0x2;if(_0x4faff4===0x7e)_0x4faff4=_0x334fb8['readUInt16BE'](_0x51df4d),_0x51df4d+=0x2;else _0x4faff4===0x7f&&(_0x4faff4=Number(_0x334fb8[_0x103c43(0x217)](_0x51df4d)),_0x51df4d+=0x8);const _0x3b16d7=_0x6328e2?_0x334fb8[_0x103c43(0x210)](_0x51df4d,_0x51df4d+0x4):Buffer[_0x103c43(0x209)](0x0);if(_0x6328e2)_0x51df4d+=0x4;let _0x334373=_0x334fb8[_0x103c43(0x210)](_0x51df4d,_0x51df4d+_0x4faff4);if(_0x6328e2){const _0x49b7b8=Buffer[_0x103c43(0x209)](_0x334373[_0x103c43(0x1f3)]);for(let _0x412d10=0x0;_0x412d10<_0x334373['length'];_0x412d10++)_0x49b7b8[_0x412d10]=_0x334373[_0x412d10]^_0x3b16d7[_0x412d10%0x4];_0x334373=_0x49b7b8;}switch(_0x439bc1){case 0x1:this[_0x103c43(0x1f9)](_0x103c43(0x1fc),new Error(_0x103c43(0x1e6)+_0x334373[_0x103c43(0x1da)]('utf-8')));break;case 0x2:{if(this[_0x103c43(0x1f8)]===_0x103c43(0x1ca)){const _0xaf7787=this[_0x103c43(0x1d6)](_0x334373);this['raise'](_0x103c43(0x1ca),_0xaf7787),this[_0x103c43(0x1f8)]=_0x103c43(0x211),this[_0x103c43(0x1ff)]('binary',Buffer[_0x103c43(0x209)](0x0));return;}const _0xe2ff3=_0x334373[_0x103c43(0x1dc)](0x0),_0x1d82ac=_0xe2ff3&0x7f,_0x4518b0=(_0xe2ff3&0x80)!==0x0;if(_0x4518b0){const _0xc376b=_0x334373[_0x103c43(0x1dc)](0x1),_0x7f596a=_0x334373[_0x103c43(0x210)](0x2,0x2+_0xc376b)[_0x103c43(0x1da)]('utf-8');if([_0x103c43(0x1ca),'open','error','close','*']['includes'](_0x7f596a)){this['raise'](_0x103c43(0x1fc),new Error('Received\x20a\x20request\x20with\x20eventName\x20'+_0x7f596a+';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?'));return;}const _0x4ea657=this[_0x103c43(0x1d6)](_0x334373[_0x103c43(0x210)](0x2+_0xc376b)),_0x118a3c=(_0x1ca8d7=this['handlers'][_0x7f596a])!==null&&_0x1ca8d7!==void 0x0?_0x1ca8d7:[];let _0x396d8c=![];for(const _0x170f35 of _0x118a3c){const _0x49b826=_0x170f35[_0x103c43(0x1d4)](undefined,_0x4ea657);if(!_0x396d8c&&_0x49b826!==undefined&&_0x1d82ac!==0x0){_0x396d8c=!![];const _0x4bda1e=Buffer[_0x103c43(0x20e)]([Buffer[_0x103c43(0x1ed)]([_0x1d82ac&0x7f]),this[_0x103c43(0x20d)](_0x49b826)]);this[_0x103c43(0x1ff)]('binary',_0x4bda1e);}}const _0x5a6728=(_0x423fa7=this[_0x103c43(0x1d9)]['*'])!==null&&_0x423fa7!==void 0x0?_0x423fa7:[];for(const _0x2dd9df of _0x5a6728)_0x2dd9df['call'](undefined,_0x7f596a,_0x4ea657);if(!_0x396d8c&&_0x1d82ac!==0x0)this['raise'](_0x103c43(0x1fc),new Error(_0x103c43(0x21c)+_0x7f596a+_0x103c43(0x213)));return;}const _0x430be1=this[_0x103c43(0x1fb)][_0x1d82ac];if(_0x430be1==undefined){this[_0x103c43(0x1f9)](_0x103c43(0x1fc),new Error(_0x103c43(0x1cb)+_0x1d82ac+_0x103c43(0x1e3)));return;}const _0x5f23fd=this['decode'](_0x334373[_0x103c43(0x210)](0x1));_0x430be1[_0x103c43(0x1d4)](undefined,_0x5f23fd);break;}case 0x9:this[_0x103c43(0x1ff)](_0x103c43(0x1c7),_0x334373);break;case 0xa:const _0x923ddc=_0x334373[_0x103c43(0x1da)](_0x103c43(0x218)),_0x29a453=this[_0x103c43(0x219)][_0x923ddc];if(_0x29a453==undefined){this[_0x103c43(0x1f9)](_0x103c43(0x1fc),new Error(_0x103c43(0x1ce)));return;}_0x29a453();break;case 0x8:if(this[_0x103c43(0x1f8)]==='closing')return;let _0x28b1bf=0x3e8,_0x207db6='';_0x334373[_0x103c43(0x1f3)]>=0x2&&(_0x28b1bf=_0x334373[_0x103c43(0x212)](0x0),_0x207db6=_0x334373[_0x103c43(0x210)](0x2)[_0x103c43(0x1da)](_0x103c43(0x218)));this[_0x103c43(0x214)](_0x28b1bf,_0x207db6,null);break;default:this[_0x103c43(0x1f9)]('error',new Error(_0x103c43(0x1dd)+_0x439bc1));}}['encode'](_0x34b49d){const _0x4d98d4=a2_0x4b41a9;return Buffer[_0x4d98d4(0x1ed)](JSON[_0x4d98d4(0x20c)](_0x34b49d),_0x4d98d4(0x218));}[a2_0x4b41a9(0x1d6)](_0x135328){const _0x37b19e=a2_0x4b41a9;return JSON[_0x37b19e(0x1ee)](_0x135328['toString'](_0x37b19e(0x218)));}['checkHeartbeat'](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x428ff9,_0x432d47)=>{const _0x4004cf=a2_0x3d78,_0x31eeea=crypto_1[_0x4004cf(0x20f)][_0x4004cf(0x1fa)](),_0x4939a5=setTimeout(()=>{const _0x28fcd5=_0x4004cf;delete this[_0x28fcd5(0x219)][_0x31eeea],this['disconnect'](0x3e8,'',null),_0x428ff9(![]);},this[_0x4004cf(0x20b)]);this[_0x4004cf(0x219)][_0x31eeea]=()=>{const _0x5a8588=_0x4004cf;delete this['pingRequests'][_0x31eeea],clearTimeout(_0x4939a5),_0x428ff9(!![]),setTimeout(()=>{const _0xecb518=a2_0x3d78;if(this['status']!==_0xecb518(0x211))return;this[_0xecb518(0x1df)]();},this[_0x5a8588(0x1ea)]);},this[_0x4004cf(0x1ff)](_0x4004cf(0x21f),Buffer['from'](_0x31eeea));});});}['on'](_0x561d1f,_0x3b6568){const _0x145242=a2_0x4b41a9;if(this[_0x145242(0x1d9)][_0x561d1f]==undefined)this['handlers'][_0x561d1f]=[];this['handlers'][_0x561d1f]['push'](_0x3b6568);}[a2_0x4b41a9(0x1e9)](_0x3a73d0,_0x37d3da){const _0x56ac7a=a2_0x4b41a9;if(_0x37d3da==undefined){this[_0x56ac7a(0x1d9)][_0x3a73d0]=[];return;}const _0x4084bd=this[_0x56ac7a(0x1d9)][_0x3a73d0],_0x1ea7ba=(_0x4084bd!==null&&_0x4084bd!==void 0x0?_0x4084bd:[])[_0x56ac7a(0x1d8)](_0x1eb561=>_0x1eb561===_0x37d3da);if(_0x1ea7ba===-0x1)throw new Error(_0x56ac7a(0x1d1)+_0x3a73d0+_0x56ac7a(0x203));_0x4084bd[_0x56ac7a(0x1f1)](_0x1ea7ba,0x1);}['raise'](_0x4336fa,_0x1ab344){const _0xf9f739=a2_0x4b41a9;var _0x423bd2,_0x137c5f;const _0x43653e=(_0x423bd2=this[_0xf9f739(0x1d9)][_0x4336fa])!==null&&_0x423bd2!==void 0x0?_0x423bd2:[];for(const _0x227abd of _0x43653e)_0x227abd(_0x1ab344);const _0x478f99=(_0x137c5f=this[_0xf9f739(0x1d9)]['*'])!==null&&_0x137c5f!==void 0x0?_0x137c5f:[];for(const _0x3d8d98 of _0x478f99)_0x3d8d98(_0x4336fa,_0x1ab344);}static[a2_0x4b41a9(0x1d5)](_0x59ad58,_0x43f371){const _0x2df3c3=a2_0x4b41a9,_0x25db62=_0x59ad58[_0x2df3c3(0x207)][_0x2df3c3(0x21e)];if(_0x25db62==undefined)return _0x43f371[_0x2df3c3(0x1de)](),null;const _0x3d1173=crypto_1['default'][_0x2df3c3(0x1e8)]('sha1');_0x3d1173[_0x2df3c3(0x221)](_0x25db62+_0x2df3c3(0x1fd));const _0x8fa8ef=_0x3d1173[_0x2df3c3(0x215)](_0x2df3c3(0x202)),_0x50978e=[_0x2df3c3(0x1d3),'Upgrade:\x20websocket','Connection:\x20Upgrade',_0x2df3c3(0x1cd)+_0x8fa8ef];return _0x43f371[_0x2df3c3(0x216)](_0x50978e[_0x2df3c3(0x1d7)]('\x0d\x0a')+_0x2df3c3(0x1f0)),new Socket(_0x43f371);}}exports['default']=Socket;