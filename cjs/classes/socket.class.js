'use strict';function a2_0x2448(){const _0x6e33ea=['\x20but\x20no\x20pending\x20request\x20was\x20found','__esModule','concat','raise','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','default','from','join','700188RicVPG','4440BVHoVG','update','decode','length','text','2774106zdqOwA','10chOqjU','close','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','apply','Received\x20a\x20response\x20for\x20the\x20id\x20','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','Received\x20message\x20with\x20unsupported\x20opcode:\x20','7YriBhy','send','handle','value','end','readUInt16BE','binary','1530UrQrBo','Received\x20a\x20request\x20with\x20eventName\x20','done','Timeout','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','next','emit','Received\x20non-standard\x20text\x20message:\x20','base64','error','sha1','__awaiter','write','handlers','Connection:\x20Upgrade','ping','1905JQxotu','disconnect','readUInt8','crypto','copy','throw','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','open','data','pingInterval','fromUpgradeRequest','requestId','readBigUInt64BE','closed','socket','writeUInt16BE','status','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','pendingRequests','\x0d\x0a\x0d\x0a','stringify','once','push','toString','626597SKDgsh','Upgrade:\x20websocket','utf-8','pingRequests','handshake','defineProperty','slice','\x20but\x20no\x20handler\x20return\x20a\x20result','alloc','3186492tsBFcD','checkHeartbeat','887685jxrDpO','createHash','findIndex','then','encode'];a2_0x2448=function(){return _0x6e33ea;};return a2_0x2448();}const a2_0xd3ed61=a2_0x43bd;(function(_0x33727f,_0x22e543){const _0x52cb18=a2_0x43bd,_0x2cfb2f=_0x33727f();while(!![]){try{const _0xfa25eb=parseInt(_0x52cb18(0x203))/0x1+-parseInt(_0x52cb18(0x231))/0x2*(parseInt(_0x52cb18(0x1eb))/0x3)+parseInt(_0x52cb18(0x20c))/0x4+-parseInt(_0x52cb18(0x20e))/0x5+parseInt(_0x52cb18(0x21b))/0x6+parseInt(_0x52cb18(0x22a))/0x7*(-parseInt(_0x52cb18(0x21c))/0x8)+-parseInt(_0x52cb18(0x221))/0x9*(parseInt(_0x52cb18(0x222))/0xa);if(_0xfa25eb===_0x22e543)break;else _0x2cfb2f['push'](_0x2cfb2f['shift']());}catch(_0x3193fe){_0x2cfb2f['push'](_0x2cfb2f['shift']());}}}(a2_0x2448,0x8aa09));function a2_0x43bd(_0x5cda9b,_0x25fe37){const _0x244888=a2_0x2448();return a2_0x43bd=function(_0x43bd46,_0x4664dd){_0x43bd46=_0x43bd46-0x1dc;let _0x181a5c=_0x244888[_0x43bd46];return _0x181a5c;},a2_0x43bd(_0x5cda9b,_0x25fe37);}var __awaiter=this&&this[a2_0xd3ed61(0x1e6)]||function(_0x4d4468,_0x5da79c,_0x3a297c,_0x313033){function _0x83fdbb(_0x52a2fe){return _0x52a2fe instanceof _0x3a297c?_0x52a2fe:new _0x3a297c(function(_0x44c701){_0x44c701(_0x52a2fe);});}return new(_0x3a297c||(_0x3a297c=Promise))(function(_0xd4b2e6,_0x434014){const _0x70ef77=a2_0x43bd;function _0x14a481(_0x238ca0){const _0x445119=a2_0x43bd;try{_0x9244a8(_0x313033[_0x445119(0x1e0)](_0x238ca0));}catch(_0x27995b){_0x434014(_0x27995b);}}function _0x2c5b2c(_0x1a586c){const _0xc4b1a8=a2_0x43bd;try{_0x9244a8(_0x313033[_0xc4b1a8(0x1f0)](_0x1a586c));}catch(_0x4ea66a){_0x434014(_0x4ea66a);}}function _0x9244a8(_0x563b78){const _0x50d706=a2_0x43bd;_0x563b78[_0x50d706(0x1dd)]?_0xd4b2e6(_0x563b78[_0x50d706(0x22d)]):_0x83fdbb(_0x563b78[_0x50d706(0x22d)])[_0x50d706(0x211)](_0x14a481,_0x2c5b2c);}_0x9244a8((_0x313033=_0x313033[_0x70ef77(0x225)](_0x4d4468,_0x5da79c||[]))[_0x70ef77(0x1e0)]());});},__importDefault=this&&this['__importDefault']||function(_0x430647){return _0x430647&&_0x430647['__esModule']?_0x430647:{'default':_0x430647};};Object[a2_0xd3ed61(0x208)](exports,a2_0xd3ed61(0x214),{'value':!![]});const crypto_1=__importDefault(require(a2_0xd3ed61(0x1ee)));class Socket{constructor(_0x3f1706){const _0x360475=a2_0xd3ed61;this['socket']=_0x3f1706,this['status']='handshake',this[_0x360475(0x1f4)]=0x5*0x3e8,this['pingTimeout']=0x2*0x3e8,this[_0x360475(0x206)]={},this[_0x360475(0x1f6)]=0x1,this[_0x360475(0x1fd)]={},this['locals']={},this[_0x360475(0x1e8)]={},this['socket']['on'](_0x360475(0x1f3),_0x12fada=>this[_0x360475(0x22c)](_0x12fada)),this[_0x360475(0x1f9)]['on'](_0x360475(0x1e4),_0x41729a=>this[_0x360475(0x216)](_0x360475(0x1e4),_0x41729a)),this['socket']['on'](_0x360475(0x223),()=>{}),this[_0x360475(0x20d)]();const _0x18f958=this[_0x360475(0x212)]({'pingInterval':this['pingInterval']});this[_0x360475(0x22b)](_0x360475(0x230),_0x18f958);}[a2_0xd3ed61(0x1ec)](){return __awaiter(this,arguments,void 0x0,function*(_0xaa3252=0x3e8,_0x555f8a='',_0x3d6bce=0x1388){return new Promise((_0x14597c,_0x150c76)=>{const _0x288295=a2_0x43bd,_0x569ce1=Buffer[_0x288295(0x219)](_0x555f8a,'utf-8'),_0xdf9604=Buffer[_0x288295(0x20b)](0x2+_0x569ce1['length']);_0xdf9604[_0x288295(0x1fa)](_0xaa3252,0x0),_0x569ce1[_0x288295(0x1ef)](_0xdf9604,0x2);const _0x4a653d=_0xdf9604[_0x288295(0x21f)],_0x216f67=_0x4a653d<0x7e?_0x4a653d:_0x4a653d<0x10000?0x7e:0x7f,_0x2809b6=_0x216f67===0x7e?Buffer['from']([0x88,0x7e,_0x4a653d>>0x8&0xff,_0x4a653d&0xff]):_0x216f67===0x7f?Buffer[_0x288295(0x219)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x4a653d>>0x8&0xff,_0x4a653d&0xff]):Buffer[_0x288295(0x219)]([0x88,_0x4a653d]),_0x6e6f42=Buffer[_0x288295(0x215)]([_0x2809b6,_0xdf9604]);this['socket'][_0x288295(0x1e7)](_0x6e6f42),this['status']='closing';if(_0x3d6bce===null)this[_0x288295(0x1fb)]=_0x288295(0x1f8),this[_0x288295(0x1f9)]['end'](),this[_0x288295(0x216)]('close',{'code':_0xaa3252,'reason':_0x555f8a}),_0x14597c();else{let _0x4fd56c=!![];this[_0x288295(0x1f9)][_0x288295(0x200)](_0x288295(0x1f3),_0x1571c8=>{const _0x114c34=_0x288295;if(!_0x4fd56c)return;_0x1571c8[0x0]===0x88?(this[_0x114c34(0x1fb)]=_0x114c34(0x1f8),this[_0x114c34(0x1f9)][_0x114c34(0x22e)](),this[_0x114c34(0x216)](_0x114c34(0x223),{'code':_0xaa3252,'reason':_0x555f8a}),_0x14597c()):_0x150c76(new Error(_0x114c34(0x217)));}),setTimeout(()=>{const _0x5bd625=_0x288295;_0x4fd56c=![],_0x150c76(new Error(_0x5bd625(0x224))),this[_0x5bd625(0x1f9)][_0x5bd625(0x22e)]();},_0x3d6bce);}});});}[a2_0xd3ed61(0x22b)](_0x275214,_0xd950de){const _0x4b8c1b=a2_0xd3ed61;let _0x1d4725,_0x1b4709;switch(_0x275214){case _0x4b8c1b(0x220):_0x1d4725=Buffer[_0x4b8c1b(0x219)](_0xd950de,'utf-8'),_0x1b4709=0x1;break;case'binary':_0x1d4725=_0xd950de,_0x1b4709=0x2;break;case _0x4b8c1b(0x1ea):_0x1d4725=_0xd950de,_0x1b4709=0x9;break;case'pong':_0x1d4725=_0xd950de,_0x1b4709=0xa;break;}const _0x1ee264=[];if(_0x1d4725[_0x4b8c1b(0x21f)]<0x7e)_0x1ee264['push'](_0x1d4725[_0x4b8c1b(0x21f)]);else{if(_0x1d4725['length']<0x10000)_0x1ee264[_0x4b8c1b(0x201)](0x7e,_0x1d4725['length']>>0x8&0xff,_0x1d4725[_0x4b8c1b(0x21f)]&0xff);else{_0x1ee264[_0x4b8c1b(0x201)](0x7f);for(let _0x69f2ef=0x7;_0x69f2ef>=0x0;_0x69f2ef--)_0x1ee264[_0x4b8c1b(0x201)](_0x1d4725[_0x4b8c1b(0x21f)]>>_0x69f2ef*0x8&0xff);}}const _0x3b5f6b=Buffer['concat']([Buffer['from']([0x80|_0x1b4709,..._0x1ee264]),_0x1d4725]);this['socket'][_0x4b8c1b(0x1e7)](_0x3b5f6b);}[a2_0xd3ed61(0x1e1)](_0x437876,_0x27c348,_0x18a7c0,_0x4a6cd2=0x32*0x3e8){const _0x49bfb3=a2_0xd3ed61;if(this['socket']==undefined||this[_0x49bfb3(0x1fb)]!=='open')throw new Error('The\x20websocket\x20is\x20not\x20connected');if(['handshake','open',_0x49bfb3(0x1e4),_0x49bfb3(0x223)]['includes'](_0x437876))throw new Error(_0x49bfb3(0x1fc));const _0x5945c0=_0x18a7c0==undefined?0x0:this['requestId'],_0x21d1a6=Buffer[_0x49bfb3(0x219)](_0x437876,_0x49bfb3(0x205));if(_0x21d1a6[_0x49bfb3(0x21f)]>0xff)throw new Error(_0x49bfb3(0x227));if(_0x18a7c0!=undefined){this[_0x49bfb3(0x1f6)]=(this['requestId']+0x1)%0x80||0x1;const _0x3dd524=setTimeout(()=>{const _0x3800c2=_0x49bfb3;delete this[_0x3800c2(0x1fd)][_0x5945c0],_0x18a7c0(new Error(_0x3800c2(0x1de)));},_0x4a6cd2);this[_0x49bfb3(0x1fd)][_0x5945c0]=_0x3ff272=>{if(!(_0x3ff272 instanceof Error))clearTimeout(_0x3dd524);_0x18a7c0(_0x3ff272);};}const _0x3afa72=Buffer[_0x49bfb3(0x215)]([Buffer[_0x49bfb3(0x219)]([_0x5945c0|0x80,_0x21d1a6[_0x49bfb3(0x21f)]]),_0x21d1a6,this[_0x49bfb3(0x212)](_0x27c348)]);this['send'](_0x49bfb3(0x230),_0x3afa72);}[a2_0xd3ed61(0x22c)](_0x46970c){const _0xeac805=a2_0xd3ed61;var _0x5083a2;const _0x484ed1=_0x46970c[0x0],_0x402fca=(_0x484ed1&0x80)!==0x0,_0x778d1f=_0x484ed1&0xf,_0x16bc7b=_0x46970c[0x1],_0x7fb515=(_0x16bc7b&0x80)!==0x0;let _0x54da3c=_0x16bc7b&0x7f,_0x577bcf=0x2;if(_0x54da3c===0x7e)_0x54da3c=_0x46970c[_0xeac805(0x22f)](_0x577bcf),_0x577bcf+=0x2;else _0x54da3c===0x7f&&(_0x54da3c=Number(_0x46970c[_0xeac805(0x1f7)](_0x577bcf)),_0x577bcf+=0x8);const _0x27fd29=_0x7fb515?_0x46970c[_0xeac805(0x209)](_0x577bcf,_0x577bcf+0x4):Buffer[_0xeac805(0x20b)](0x0);if(_0x7fb515)_0x577bcf+=0x4;let _0x3b94b0=_0x46970c[_0xeac805(0x209)](_0x577bcf,_0x577bcf+_0x54da3c);if(_0x7fb515){const _0xfe0963=Buffer[_0xeac805(0x20b)](_0x3b94b0['length']);for(let _0x23e4f5=0x0;_0x23e4f5<_0x3b94b0[_0xeac805(0x21f)];_0x23e4f5++)_0xfe0963[_0x23e4f5]=_0x3b94b0[_0x23e4f5]^_0x27fd29[_0x23e4f5%0x4];_0x3b94b0=_0xfe0963;}switch(_0x778d1f){case 0x1:this[_0xeac805(0x216)](_0xeac805(0x1e4),new Error(_0xeac805(0x1e2)+_0x3b94b0['toString'](_0xeac805(0x205))));break;case 0x2:{if(this['status']==='handshake'){const _0x1553d0=this[_0xeac805(0x21e)](_0x3b94b0);this[_0xeac805(0x216)](_0xeac805(0x207),_0x1553d0),this['status']=_0xeac805(0x1f2),this[_0xeac805(0x22b)](_0xeac805(0x230),Buffer['alloc'](0x0));return;}const _0x33ab64=_0x3b94b0[_0xeac805(0x1ed)](0x0),_0x475f6e=_0x33ab64&0x7f,_0x570e95=(_0x33ab64&0x80)!==0x0;if(_0x570e95){const _0x181155=_0x3b94b0[_0xeac805(0x1ed)](0x1),_0x2f4aa9=_0x3b94b0[_0xeac805(0x209)](0x2,0x2+_0x181155)[_0xeac805(0x202)](_0xeac805(0x205));if([_0xeac805(0x207),'open',_0xeac805(0x1e4),'close']['includes'](_0x2f4aa9)){this['raise'](_0xeac805(0x1e4),new Error(_0xeac805(0x1dc)+_0x2f4aa9+';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?'));return;}const _0x519a=this[_0xeac805(0x21e)](_0x3b94b0[_0xeac805(0x209)](0x2+_0x181155)),_0x1ce119=(_0x5083a2=this['handlers'][_0x2f4aa9])!==null&&_0x5083a2!==void 0x0?_0x5083a2:[];let _0x313e3f=![];for(const _0x51a55f of _0x1ce119){const _0x415a34=_0x51a55f['call'](undefined,_0x519a);if(!_0x313e3f&&_0x415a34!==undefined&&_0x475f6e!==0x0){_0x313e3f=!![];const _0x174090=Buffer['concat']([Buffer[_0xeac805(0x219)]([_0x475f6e&0x7f]),this[_0xeac805(0x212)](_0x415a34)]);this[_0xeac805(0x22b)](_0xeac805(0x230),_0x174090);}}if(!_0x313e3f&&_0x475f6e!==0x0)this['raise'](_0xeac805(0x1e4),new Error(_0xeac805(0x228)+_0x2f4aa9+_0xeac805(0x20a)));return;}const _0x33d192=this['pendingRequests'][_0x475f6e];if(_0x33d192==undefined){this[_0xeac805(0x216)](_0xeac805(0x1e4),new Error(_0xeac805(0x226)+_0x475f6e+_0xeac805(0x213)));return;}const _0x402e31=this['decode'](_0x3b94b0[_0xeac805(0x209)](0x1));_0x33d192['call'](undefined,_0x402e31);break;}case 0x9:this[_0xeac805(0x22b)]('pong',_0x3b94b0);break;case 0xa:const _0x137bf2=_0x3b94b0[_0xeac805(0x202)](_0xeac805(0x205)),_0x31bf59=this[_0xeac805(0x206)][_0x137bf2];if(_0x31bf59==undefined){this[_0xeac805(0x216)](_0xeac805(0x1e4),new Error('Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping'));return;}_0x31bf59();break;case 0x8:if(this[_0xeac805(0x1fb)]==='closing')return;let _0x873235=0x3e8,_0x5def98='';_0x3b94b0[_0xeac805(0x21f)]>=0x2&&(_0x873235=_0x3b94b0['readUInt16BE'](0x0),_0x5def98=_0x3b94b0[_0xeac805(0x209)](0x2)[_0xeac805(0x202)]('utf-8'));this[_0xeac805(0x1ec)](_0x873235,_0x5def98,null);break;default:this[_0xeac805(0x216)](_0xeac805(0x1e4),new Error(_0xeac805(0x229)+_0x778d1f));}}['encode'](_0x428127){const _0x225bf6=a2_0xd3ed61;return Buffer[_0x225bf6(0x219)](JSON[_0x225bf6(0x1ff)](_0x428127),_0x225bf6(0x205));}['decode'](_0x2dc8e9){const _0x370c6b=a2_0xd3ed61;return JSON['parse'](_0x2dc8e9[_0x370c6b(0x202)](_0x370c6b(0x205)));}[a2_0xd3ed61(0x20d)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x241d86,_0x1f200c)=>{const _0x57eb4b=a2_0x43bd,_0x2b406f=crypto_1[_0x57eb4b(0x218)]['randomUUID'](),_0x5ac76c=setTimeout(()=>{const _0x469182=_0x57eb4b;delete this[_0x469182(0x206)][_0x2b406f],this[_0x469182(0x1ec)](0x3e8,'',null),_0x241d86(![]);},this['pingTimeout']);this[_0x57eb4b(0x206)][_0x2b406f]=()=>{const _0x64136d=_0x57eb4b;delete this[_0x64136d(0x206)][_0x2b406f],clearTimeout(_0x5ac76c),_0x241d86(!![]),setTimeout(()=>{if(this['status']!=='open')return;this['checkHeartbeat']();},this[_0x64136d(0x1f4)]);},this[_0x57eb4b(0x22b)]('ping',Buffer[_0x57eb4b(0x219)](_0x2b406f));});});}['on'](_0x2fff48,_0x39a31e){const _0x2c1437=a2_0xd3ed61;if(this['handlers'][_0x2fff48]==undefined)this['handlers'][_0x2fff48]=[];this[_0x2c1437(0x1e8)][_0x2fff48]['push'](_0x39a31e);}['off'](_0x3d8e9c,_0x3fc27b){const _0x46b510=a2_0xd3ed61;if(_0x3fc27b==undefined){this[_0x46b510(0x1e8)][_0x3d8e9c]=[];return;}const _0xf2f2c0=this[_0x46b510(0x1e8)][_0x3d8e9c],_0x4aa7d7=(_0xf2f2c0!==null&&_0xf2f2c0!==void 0x0?_0xf2f2c0:[])[_0x46b510(0x210)](_0x3ddd39=>_0x3ddd39===_0x3fc27b);if(_0x4aa7d7===-0x1)throw new Error(_0x46b510(0x1f1)+_0x3d8e9c+_0x46b510(0x1df));_0xf2f2c0['splice'](_0x4aa7d7,0x1);}[a2_0xd3ed61(0x216)](_0x4524e0,_0x36022d){var _0x5ac72a;const _0x5294b8=(_0x5ac72a=this['handlers'][_0x4524e0])!==null&&_0x5ac72a!==void 0x0?_0x5ac72a:[];for(const _0x23567d of _0x5294b8){_0x23567d(_0x36022d);}}static[a2_0xd3ed61(0x1f5)](_0x528c70,_0xbc8348){const _0x241c6c=a2_0xd3ed61,_0x2c7f1d=_0x528c70['headers']['sec-websocket-key'];if(_0x2c7f1d==undefined)return _0xbc8348['destroy'](),null;const _0x18dc87=crypto_1[_0x241c6c(0x218)][_0x241c6c(0x20f)](_0x241c6c(0x1e5));_0x18dc87[_0x241c6c(0x21d)](_0x2c7f1d+'258EAFA5-E914-47DA-95CA-C5AB0DC85B11');const _0x3dbaa4=_0x18dc87['digest'](_0x241c6c(0x1e3)),_0x5ad07b=['HTTP/1.1\x20101\x20Switching\x20Protocols',_0x241c6c(0x204),_0x241c6c(0x1e9),'Sec-WebSocket-Accept:\x20'+_0x3dbaa4];return _0xbc8348['write'](_0x5ad07b[_0x241c6c(0x21a)]('\x0d\x0a')+_0x241c6c(0x1fe)),new Socket(_0xbc8348);}}exports[a2_0xd3ed61(0x218)]=Socket;