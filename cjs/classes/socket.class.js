'use strict';function a2_0x50d3(_0x42eb58,_0x2c0f7c){const _0x2e64ca=a2_0x2e64();return a2_0x50d3=function(_0x50d3e5,_0x1e7752){_0x50d3e5=_0x50d3e5-0x197;let _0x375c0f=_0x2e64ca[_0x50d3e5];return _0x375c0f;},a2_0x50d3(_0x42eb58,_0x2c0f7c);}const a2_0x25440d=a2_0x50d3;function a2_0x2e64(){const _0x43631e=['raise','default','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','\x20but\x20no\x20pending\x20request\x20was\x20found','next','closing','then','handlers','readUInt8','includes','Upgrade:\x20websocket','Received\x20a\x20response\x20for\x20the\x20id\x20','closed','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','\x20but\x20no\x20handler\x20return\x20a\x20result','data','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','once','410776YkVgky','Received\x20message\x20with\x20unsupported\x20opcode:\x20','from','pingInterval','createHash','push','close','6538IhAmVN','pingRequests','257268lKEzHW','length','open','splice','crypto','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','call','__importDefault','readUInt16BE',';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?','ping','5055980uGJCjB','46DpRQjZ','7xVNiQb','disconnect','socket','833394UkWRpJ','The\x20websocket\x20is\x20not\x20connected','pingTimeout','off','decode','end','error','writeUInt16BE','readBigUInt64BE','27xtErbs','pong','write','utf-8','throw','\x0d\x0a\x0d\x0a','1281070CxfMvZ','value','apply','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','pendingRequests','copy','Sec-WebSocket-Accept:\x20','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','concat','HTTP/1.1\x20101\x20Switching\x20Protocols','Timeout','sha1','send','__awaiter','status','handle','__esModule','emit','alloc','Received\x20non-standard\x20text\x20message:\x20','slice','update','checkHeartbeat','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','toString','encode','handshake','binary','stringify','text','fromUpgradeRequest','103560GIgHiJ','requestId'];a2_0x2e64=function(){return _0x43631e;};return a2_0x2e64();}(function(_0xa237e7,_0x286ff9){const _0x376e63=a2_0x50d3,_0x34e206=_0xa237e7();while(!![]){try{const _0x58a250=-parseInt(_0x376e63(0x199))/0x1*(parseInt(_0x376e63(0x1e7))/0x2)+-parseInt(_0x376e63(0x1e9))/0x3+-parseInt(_0x376e63(0x1cb))/0x4+parseInt(_0x376e63(0x1ac))/0x5+-parseInt(_0x376e63(0x19d))/0x6*(parseInt(_0x376e63(0x19a))/0x7)+-parseInt(_0x376e63(0x1e0))/0x8*(parseInt(_0x376e63(0x1a6))/0x9)+parseInt(_0x376e63(0x198))/0xa;if(_0x58a250===_0x286ff9)break;else _0x34e206['push'](_0x34e206['shift']());}catch(_0x27623a){_0x34e206['push'](_0x34e206['shift']());}}}(a2_0x2e64,0x32804));var __awaiter=this&&this[a2_0x25440d(0x1b9)]||function(_0x32bf6d,_0x1b84f1,_0x30f0c1,_0x216f50){function _0x4a4ccf(_0x13070f){return _0x13070f instanceof _0x30f0c1?_0x13070f:new _0x30f0c1(function(_0x4720fa){_0x4720fa(_0x13070f);});}return new(_0x30f0c1||(_0x30f0c1=Promise))(function(_0x400d9d,_0x18afc4){const _0x4a2d16=a2_0x50d3;function _0x1e88db(_0x2b44e9){const _0x3100f9=a2_0x50d3;try{_0x2a44d0(_0x216f50[_0x3100f9(0x1d1)](_0x2b44e9));}catch(_0x52b8ed){_0x18afc4(_0x52b8ed);}}function _0x411422(_0x4f01b6){const _0x11ebea=a2_0x50d3;try{_0x2a44d0(_0x216f50[_0x11ebea(0x1aa)](_0x4f01b6));}catch(_0x1f2245){_0x18afc4(_0x1f2245);}}function _0x2a44d0(_0x18aafd){const _0x158787=a2_0x50d3;_0x18aafd['done']?_0x400d9d(_0x18aafd[_0x158787(0x1ad)]):_0x4a4ccf(_0x18aafd[_0x158787(0x1ad)])[_0x158787(0x1d3)](_0x1e88db,_0x411422);}_0x2a44d0((_0x216f50=_0x216f50[_0x4a2d16(0x1ae)](_0x32bf6d,_0x1b84f1||[]))[_0x4a2d16(0x1d1)]());});},__importDefault=this&&this[a2_0x25440d(0x1f1)]||function(_0x1d0123){const _0x8ab7b4=a2_0x25440d;return _0x1d0123&&_0x1d0123[_0x8ab7b4(0x1bc)]?_0x1d0123:{'default':_0x1d0123};};Object['defineProperty'](exports,a2_0x25440d(0x1bc),{'value':!![]});const crypto_1=__importDefault(require(a2_0x25440d(0x1ed)));class Socket{constructor(_0x2b9c21){const _0xd6a696=a2_0x25440d;this[_0xd6a696(0x19c)]=_0x2b9c21,this[_0xd6a696(0x1ba)]=_0xd6a696(0x1c6),this['pingInterval']=0x5*0x3e8,this['pingTimeout']=0x2*0x3e8,this[_0xd6a696(0x1e8)]={},this[_0xd6a696(0x1cc)]=0x1,this[_0xd6a696(0x1b0)]={},this[_0xd6a696(0x1dc)]={},this['handlers']={},this[_0xd6a696(0x19c)]['on']('data',_0x598059=>this[_0xd6a696(0x1bb)](_0x598059)),this[_0xd6a696(0x19c)]['on'](_0xd6a696(0x1a3),_0x2b5eee=>this[_0xd6a696(0x1cd)](_0xd6a696(0x1a3),_0x2b5eee)),this[_0xd6a696(0x19c)]['on']('close',()=>{}),this[_0xd6a696(0x1c2)]();const _0x485989=this[_0xd6a696(0x1c5)]({'pingInterval':this[_0xd6a696(0x1e3)]});this[_0xd6a696(0x1b8)](_0xd6a696(0x1c7),_0x485989);}[a2_0x25440d(0x19b)](){return __awaiter(this,arguments,void 0x0,function*(_0x56cbfd=0x3e8,_0x1e6108='',_0x1e5565=0x1388){return new Promise((_0x5f510e,_0x48fd54)=>{const _0x2a9391=a2_0x50d3,_0x505c22=Buffer['from'](_0x1e6108,'utf-8'),_0x43f3fd=Buffer[_0x2a9391(0x1be)](0x2+_0x505c22['length']);_0x43f3fd[_0x2a9391(0x1a4)](_0x56cbfd,0x0),_0x505c22[_0x2a9391(0x1b1)](_0x43f3fd,0x2);const _0x3a14a0=_0x43f3fd[_0x2a9391(0x1ea)],_0x2864d5=_0x3a14a0<0x7e?_0x3a14a0:_0x3a14a0<0x10000?0x7e:0x7f,_0x2ed838=_0x2864d5===0x7e?Buffer[_0x2a9391(0x1e2)]([0x88,0x7e,_0x3a14a0>>0x8&0xff,_0x3a14a0&0xff]):_0x2864d5===0x7f?Buffer[_0x2a9391(0x1e2)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x3a14a0>>0x8&0xff,_0x3a14a0&0xff]):Buffer[_0x2a9391(0x1e2)]([0x88,_0x3a14a0]),_0xf9492e=Buffer['concat']([_0x2ed838,_0x43f3fd]);this['socket'][_0x2a9391(0x1a8)](_0xf9492e),this[_0x2a9391(0x1ba)]='closing';if(_0x1e5565===null)this[_0x2a9391(0x1ba)]=_0x2a9391(0x1d9),this[_0x2a9391(0x19c)][_0x2a9391(0x1a2)](),this['raise'](_0x2a9391(0x1e6),{'code':_0x56cbfd,'reason':_0x1e6108}),_0x5f510e();else{let _0x25f4ce=!![];this[_0x2a9391(0x19c)][_0x2a9391(0x1df)]('data',_0x50e4d3=>{const _0x31bae7=_0x2a9391;if(!_0x25f4ce)return;_0x50e4d3[0x0]===0x88?(this[_0x31bae7(0x1ba)]=_0x31bae7(0x1d9),this[_0x31bae7(0x19c)][_0x31bae7(0x1a2)](),this[_0x31bae7(0x1cd)](_0x31bae7(0x1e6),{'code':_0x56cbfd,'reason':_0x1e6108}),_0x5f510e()):_0x48fd54(new Error(_0x31bae7(0x1cf)));}),setTimeout(()=>{const _0x2cacf9=_0x2a9391;_0x25f4ce=![],_0x48fd54(new Error(_0x2cacf9(0x1c3))),this[_0x2cacf9(0x19c)][_0x2cacf9(0x1a2)]();},_0x1e5565);}});});}[a2_0x25440d(0x1b8)](_0x5fe1d2,_0xca9999){const _0x144280=a2_0x25440d;let _0x394f38,_0x2ee03f;switch(_0x5fe1d2){case _0x144280(0x1c9):_0x394f38=Buffer['from'](_0xca9999,_0x144280(0x1a9)),_0x2ee03f=0x1;break;case'binary':_0x394f38=_0xca9999,_0x2ee03f=0x2;break;case _0x144280(0x197):_0x394f38=_0xca9999,_0x2ee03f=0x9;break;case _0x144280(0x1a7):_0x394f38=_0xca9999,_0x2ee03f=0xa;break;}const _0x41453e=[];if(_0x394f38[_0x144280(0x1ea)]<0x7e)_0x41453e['push'](_0x394f38['length']);else{if(_0x394f38['length']<0x10000)_0x41453e['push'](0x7e,_0x394f38[_0x144280(0x1ea)]>>0x8&0xff,_0x394f38[_0x144280(0x1ea)]&0xff);else{_0x41453e['push'](0x7f);for(let _0x39c993=0x7;_0x39c993>=0x0;_0x39c993--)_0x41453e['push'](_0x394f38[_0x144280(0x1ea)]>>_0x39c993*0x8&0xff);}}const _0x5360b4=Buffer[_0x144280(0x1b4)]([Buffer[_0x144280(0x1e2)]([0x80|_0x2ee03f,..._0x41453e]),_0x394f38]);this[_0x144280(0x19c)][_0x144280(0x1a8)](_0x5360b4);}[a2_0x25440d(0x1bd)](_0x3fe209,_0x487b3b,_0x2a2f0f,_0x333b15=0x32*0x3e8){const _0x146d02=a2_0x25440d;if(this['socket']==undefined||this[_0x146d02(0x1ba)]!==_0x146d02(0x1eb))throw new Error(_0x146d02(0x19e));if(['handshake',_0x146d02(0x1eb),_0x146d02(0x1a3),'close'][_0x146d02(0x1d6)](_0x3fe209))throw new Error(_0x146d02(0x1dd));const _0x5f4a0c=_0x2a2f0f==undefined?0x0:this[_0x146d02(0x1cc)],_0x2fe87a=Buffer['from'](_0x3fe209,'utf-8');if(_0x2fe87a[_0x146d02(0x1ea)]>0xff)throw new Error(_0x146d02(0x1af));if(_0x2a2f0f!=undefined){this[_0x146d02(0x1cc)]=(this[_0x146d02(0x1cc)]+0x1)%0x80||0x1;const _0x318b06=setTimeout(()=>{const _0x10cf66=_0x146d02;delete this[_0x10cf66(0x1b0)][_0x5f4a0c],_0x2a2f0f(new Error(_0x10cf66(0x1b6)));},_0x333b15);this[_0x146d02(0x1b0)][_0x5f4a0c]=_0x53ea8e=>{if(!(_0x53ea8e instanceof Error))clearTimeout(_0x318b06);_0x2a2f0f(_0x53ea8e);};}const _0x1b2b46=Buffer[_0x146d02(0x1b4)]([Buffer[_0x146d02(0x1e2)]([_0x5f4a0c|0x80,_0x2fe87a['length']]),_0x2fe87a,this[_0x146d02(0x1c5)](_0x487b3b)]);this[_0x146d02(0x1b8)](_0x146d02(0x1c7),_0x1b2b46);}[a2_0x25440d(0x1bb)](_0x439471){const _0x43a18e=a2_0x25440d;var _0x13a773;const _0x3b7208=_0x439471[0x0],_0x29b11c=(_0x3b7208&0x80)!==0x0,_0x333289=_0x3b7208&0xf,_0x39057e=_0x439471[0x1],_0x5aec1b=(_0x39057e&0x80)!==0x0;let _0x46bd1e=_0x39057e&0x7f,_0x20cfd7=0x2;if(_0x46bd1e===0x7e)_0x46bd1e=_0x439471[_0x43a18e(0x1f2)](_0x20cfd7),_0x20cfd7+=0x2;else _0x46bd1e===0x7f&&(_0x46bd1e=Number(_0x439471[_0x43a18e(0x1a5)](_0x20cfd7)),_0x20cfd7+=0x8);const _0x268582=_0x5aec1b?_0x439471['slice'](_0x20cfd7,_0x20cfd7+0x4):Buffer[_0x43a18e(0x1be)](0x0);if(_0x5aec1b)_0x20cfd7+=0x4;let _0xd34150=_0x439471[_0x43a18e(0x1c0)](_0x20cfd7,_0x20cfd7+_0x46bd1e);if(_0x5aec1b){const _0x2bec2b=Buffer[_0x43a18e(0x1be)](_0xd34150[_0x43a18e(0x1ea)]);for(let _0x31af3b=0x0;_0x31af3b<_0xd34150[_0x43a18e(0x1ea)];_0x31af3b++)_0x2bec2b[_0x31af3b]=_0xd34150[_0x31af3b]^_0x268582[_0x31af3b%0x4];_0xd34150=_0x2bec2b;}switch(_0x333289){case 0x1:this[_0x43a18e(0x1cd)](_0x43a18e(0x1a3),new Error(_0x43a18e(0x1bf)+_0xd34150['toString'](_0x43a18e(0x1a9))));break;case 0x2:{if(this['status']===_0x43a18e(0x1c6)){const _0x247737=this['decode'](_0xd34150);this[_0x43a18e(0x1cd)]('handshake',_0x247737),this[_0x43a18e(0x1ba)]=_0x43a18e(0x1eb),this[_0x43a18e(0x1b8)](_0x43a18e(0x1c7),Buffer['alloc'](0x0));return;}const _0x334471=_0xd34150[_0x43a18e(0x1d5)](0x0),_0xc6336f=_0x334471&0x7f,_0x4d81de=(_0x334471&0x80)!==0x0;if(_0x4d81de){const _0xdd3406=_0xd34150[_0x43a18e(0x1d5)](0x1),_0x296690=_0xd34150[_0x43a18e(0x1c0)](0x2,0x2+_0xdd3406)['toString'](_0x43a18e(0x1a9));if(['handshake',_0x43a18e(0x1eb),_0x43a18e(0x1a3),_0x43a18e(0x1e6)][_0x43a18e(0x1d6)](_0x296690)){this['raise']('error',new Error('Received\x20a\x20request\x20with\x20eventName\x20'+_0x296690+_0x43a18e(0x1f3)));return;}const _0x27b8b3=this[_0x43a18e(0x1a1)](_0xd34150['slice'](0x2+_0xdd3406)),_0x23b86c=(_0x13a773=this[_0x43a18e(0x1d4)][_0x296690])!==null&&_0x13a773!==void 0x0?_0x13a773:[];let _0x373cd2=![];for(const _0x43ad19 of _0x23b86c){const _0x2996aa=_0x43ad19[_0x43a18e(0x1f0)](undefined,_0x27b8b3);if(!_0x373cd2&&_0x2996aa!==undefined&&_0xc6336f!==0x0){_0x373cd2=!![];const _0x366ed2=Buffer[_0x43a18e(0x1b4)]([Buffer['from']([_0xc6336f&0x7f]),this[_0x43a18e(0x1c5)](_0x2996aa)]);this[_0x43a18e(0x1b8)]('binary',_0x366ed2);}}if(!_0x373cd2&&_0xc6336f!==0x0)this['raise']('error',new Error(_0x43a18e(0x1da)+_0x296690+_0x43a18e(0x1db)));return;}const _0x513b12=this[_0x43a18e(0x1b0)][_0xc6336f];if(_0x513b12==undefined){this[_0x43a18e(0x1cd)](_0x43a18e(0x1a3),new Error(_0x43a18e(0x1d8)+_0xc6336f+_0x43a18e(0x1d0)));return;}const _0x1522fb=this['decode'](_0xd34150[_0x43a18e(0x1c0)](0x1));_0x513b12[_0x43a18e(0x1f0)](undefined,_0x1522fb);break;}case 0x9:this[_0x43a18e(0x1b8)](_0x43a18e(0x1a7),_0xd34150);break;case 0xa:const _0x155249=_0xd34150[_0x43a18e(0x1c4)](_0x43a18e(0x1a9)),_0x32e648=this[_0x43a18e(0x1e8)][_0x155249];if(_0x32e648==undefined){this[_0x43a18e(0x1cd)](_0x43a18e(0x1a3),new Error(_0x43a18e(0x1ef)));return;}_0x32e648();break;case 0x8:if(this[_0x43a18e(0x1ba)]===_0x43a18e(0x1d2))return;let _0x4aca30=0x3e8,_0x19b902='';_0xd34150[_0x43a18e(0x1ea)]>=0x2&&(_0x4aca30=_0xd34150[_0x43a18e(0x1f2)](0x0),_0x19b902=_0xd34150[_0x43a18e(0x1c0)](0x2)[_0x43a18e(0x1c4)](_0x43a18e(0x1a9)));this[_0x43a18e(0x19b)](_0x4aca30,_0x19b902,null);break;default:this[_0x43a18e(0x1cd)](_0x43a18e(0x1a3),new Error(_0x43a18e(0x1e1)+_0x333289));}}[a2_0x25440d(0x1c5)](_0x396339){const _0x2bf4cd=a2_0x25440d;return Buffer[_0x2bf4cd(0x1e2)](JSON[_0x2bf4cd(0x1c8)](_0x396339),_0x2bf4cd(0x1a9));}[a2_0x25440d(0x1a1)](_0x41cf08){const _0x380c83=a2_0x25440d;return JSON['parse'](_0x41cf08[_0x380c83(0x1c4)](_0x380c83(0x1a9)));}[a2_0x25440d(0x1c2)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0xfb0d4b,_0xc61df6)=>{const _0x211cd9=a2_0x50d3,_0x19d6b2=crypto_1[_0x211cd9(0x1ce)]['randomUUID'](),_0x5a03f6=setTimeout(()=>{const _0x57c3e4=_0x211cd9;delete this[_0x57c3e4(0x1e8)][_0x19d6b2],this[_0x57c3e4(0x19b)](0x3e8,'',null),_0xfb0d4b(![]);},this[_0x211cd9(0x19f)]);this['pingRequests'][_0x19d6b2]=()=>{const _0x19f5fb=_0x211cd9;delete this[_0x19f5fb(0x1e8)][_0x19d6b2],clearTimeout(_0x5a03f6),_0xfb0d4b(!![]),setTimeout(()=>{const _0x2bfc2a=_0x19f5fb;if(this[_0x2bfc2a(0x1ba)]!==_0x2bfc2a(0x1eb))return;this[_0x2bfc2a(0x1c2)]();},this[_0x19f5fb(0x1e3)]);},this['send'](_0x211cd9(0x197),Buffer[_0x211cd9(0x1e2)](_0x19d6b2));});});}['on'](_0x1be6ea,_0x3feff6){const _0x105e10=a2_0x25440d;if(this[_0x105e10(0x1d4)][_0x1be6ea]==undefined)this[_0x105e10(0x1d4)][_0x1be6ea]=[];this[_0x105e10(0x1d4)][_0x1be6ea][_0x105e10(0x1e5)](_0x3feff6);}[a2_0x25440d(0x1a0)](_0x5aae06,_0x555477){const _0x3f277c=a2_0x25440d;if(_0x555477==undefined){this[_0x3f277c(0x1d4)][_0x5aae06]=[];return;}const _0x237f10=this['handlers'][_0x5aae06],_0x2b399a=(_0x237f10!==null&&_0x237f10!==void 0x0?_0x237f10:[])['findIndex'](_0x25acbb=>_0x25acbb===_0x555477);if(_0x2b399a===-0x1)throw new Error(_0x3f277c(0x1ee)+_0x5aae06+_0x3f277c(0x1b3));_0x237f10[_0x3f277c(0x1ec)](_0x2b399a,0x1);}['raise'](_0x39140a,_0x51099b){const _0x5c3246=a2_0x25440d;var _0x1a2693;const _0x197230=(_0x1a2693=this[_0x5c3246(0x1d4)][_0x39140a])!==null&&_0x1a2693!==void 0x0?_0x1a2693:[];for(const _0x3c0106 of _0x197230){_0x3c0106(_0x51099b);}}static[a2_0x25440d(0x1ca)](_0xdcd878,_0x34dac6){const _0x1c587c=a2_0x25440d,_0x37c857=_0xdcd878['headers']['sec-websocket-key'];if(_0x37c857==undefined)return _0x34dac6['destroy'](),null;const _0xd1d957=crypto_1[_0x1c587c(0x1ce)][_0x1c587c(0x1e4)](_0x1c587c(0x1b7));_0xd1d957[_0x1c587c(0x1c1)](_0x37c857+_0x1c587c(0x1de));const _0x4afa26=_0xd1d957['digest']('base64'),_0x2ec844=[_0x1c587c(0x1b5),_0x1c587c(0x1d7),'Connection:\x20Upgrade',_0x1c587c(0x1b2)+_0x4afa26];return _0x34dac6['write'](_0x2ec844['join']('\x0d\x0a')+_0x1c587c(0x1ab)),new Socket(_0x34dac6);}}exports['default']=Socket;