'use strict';function a2_0xb99a(){const _0x5ccc81=['emit','pong','requestId','alloc','default','The\x20websocket\x20is\x20not\x20connected','HTTP/1.1\x20101\x20Switching\x20Protocols','data','write','close','encode','Received\x20non-standard\x20text\x20message:\x20','decode','stringify','writeUInt16BE','Received\x20a\x20request\x20with\x20eventName\x20','socket','__esModule','raise','from','length','done','checkHeartbeat','open','copy','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','ping','closing','162881vtQgjz','parse','handlers','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','Received\x20message\x20with\x20unsupported\x20opcode:\x20','Upgrade:\x20websocket','headers','disconnect','readUInt8','2497jSsNwX','findIndex','send','4KgOSkt','closed','digest','1143HyEwPg','off','crypto','9GDdgAu','defineProperty','once','readUInt16BE','\x0d\x0a\x0d\x0a','\x20but\x20no\x20pending\x20request\x20was\x20found','Sec-WebSocket-Accept:\x20','binary','pingInterval','utf-8','9513yJnMIr','error','3126SppDkS','handshake','__awaiter','Received\x20a\x20response\x20for\x20the\x20id\x20','concat','139010vSsBTN','end','join','73210GayEjR','splice','2887090CtBNmT','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','status','throw','next','8340lYHcio','update','includes','pendingRequests','pingTimeout','\x20but\x20no\x20handler\x20return\x20a\x20result','base64','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','createHash','874864OENFWS','slice','handle','apply','pingRequests','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','toString','push'];a2_0xb99a=function(){return _0x5ccc81;};return a2_0xb99a();}const a2_0x232c7c=a2_0x2269;(function(_0xef25a2,_0x33d930){const _0x42147d=a2_0x2269,_0x431eb3=_0xef25a2();while(!![]){try{const _0x599f1f=parseInt(_0x42147d(0x1fa))/0x1+-parseInt(_0x42147d(0x21d))/0x2*(parseInt(_0x42147d(0x20c))/0x3)+-parseInt(_0x42147d(0x206))/0x4*(-parseInt(_0x42147d(0x222))/0x5)+parseInt(_0x42147d(0x218))/0x6*(-parseInt(_0x42147d(0x216))/0x7)+-parseInt(_0x42147d(0x231))/0x8+parseInt(_0x42147d(0x209))/0x9*(parseInt(_0x42147d(0x220))/0xa)+-parseInt(_0x42147d(0x203))/0xb*(parseInt(_0x42147d(0x227))/0xc);if(_0x599f1f===_0x33d930)break;else _0x431eb3['push'](_0x431eb3['shift']());}catch(_0x19092a){_0x431eb3['push'](_0x431eb3['shift']());}}}(a2_0xb99a,0x76bf5));var __awaiter=this&&this[a2_0x232c7c(0x21a)]||function(_0x4eaa76,_0x18af0a,_0x519c65,_0x473209){function _0x415efa(_0x3f41fb){return _0x3f41fb instanceof _0x519c65?_0x3f41fb:new _0x519c65(function(_0x5752aa){_0x5752aa(_0x3f41fb);});}return new(_0x519c65||(_0x519c65=Promise))(function(_0x2c8d6d,_0x398382){const _0x446bf3=a2_0x2269;function _0x545d46(_0xa5d114){const _0x5de623=a2_0x2269;try{_0x1a046a(_0x473209[_0x5de623(0x226)](_0xa5d114));}catch(_0x3b6887){_0x398382(_0x3b6887);}}function _0x216015(_0x3edccf){const _0xd66781=a2_0x2269;try{_0x1a046a(_0x473209[_0xd66781(0x225)](_0x3edccf));}catch(_0x1c8bfc){_0x398382(_0x1c8bfc);}}function _0x1a046a(_0x59b9d1){const _0x436284=a2_0x2269;_0x59b9d1[_0x436284(0x1f3)]?_0x2c8d6d(_0x59b9d1['value']):_0x415efa(_0x59b9d1['value'])['then'](_0x545d46,_0x216015);}_0x1a046a((_0x473209=_0x473209[_0x446bf3(0x234)](_0x4eaa76,_0x18af0a||[]))[_0x446bf3(0x226)]());});},__importDefault=this&&this['__importDefault']||function(_0x286aa9){const _0x456030=a2_0x232c7c;return _0x286aa9&&_0x286aa9[_0x456030(0x1ef)]?_0x286aa9:{'default':_0x286aa9};};Object[a2_0x232c7c(0x20d)](exports,a2_0x232c7c(0x1ef),{'value':!![]});const crypto_1=__importDefault(require(a2_0x232c7c(0x20b)));function a2_0x2269(_0x21c2cc,_0x240695){const _0xb99a20=a2_0xb99a();return a2_0x2269=function(_0x226926,_0x8cb04e){_0x226926=_0x226926-0x1e7;let _0x397cef=_0xb99a20[_0x226926];return _0x397cef;},a2_0x2269(_0x21c2cc,_0x240695);}class Socket{constructor(_0x473181){const _0x661db1=a2_0x232c7c;this[_0x661db1(0x1ee)]=_0x473181,this[_0x661db1(0x224)]='handshake',this[_0x661db1(0x214)]=0x5*0x3e8,this[_0x661db1(0x22b)]=0x2*0x3e8,this[_0x661db1(0x235)]={},this['requestId']=0x1,this['pendingRequests']={},this['locals']={},this[_0x661db1(0x1fc)]={},this[_0x661db1(0x1ee)]['on'](_0x661db1(0x240),_0x1bc9e1=>this[_0x661db1(0x233)](_0x1bc9e1)),this['socket']['on'](_0x661db1(0x217),_0x59b874=>this[_0x661db1(0x1f0)]('error',_0x59b874)),this['socket']['on'](_0x661db1(0x1e7),()=>{}),this[_0x661db1(0x1f4)]();const _0x51bf55=this[_0x661db1(0x1e8)]({'pingInterval':this[_0x661db1(0x214)]});this[_0x661db1(0x205)](_0x661db1(0x213),_0x51bf55);}[a2_0x232c7c(0x201)](){return __awaiter(this,arguments,void 0x0,function*(_0x1e76f4=0x3e8,_0x559585='',_0x304745=0x1388){return new Promise((_0x14abd7,_0x22478e)=>{const _0x58242d=a2_0x2269,_0x41a589=Buffer['from'](_0x559585,_0x58242d(0x215)),_0x4edcf6=Buffer['alloc'](0x2+_0x41a589['length']);_0x4edcf6[_0x58242d(0x1ec)](_0x1e76f4,0x0),_0x41a589[_0x58242d(0x1f6)](_0x4edcf6,0x2);const _0xdbcc21=_0x4edcf6['length'],_0x1c3805=_0xdbcc21<0x7e?_0xdbcc21:_0xdbcc21<0x10000?0x7e:0x7f,_0x5a8238=_0x1c3805===0x7e?Buffer['from']([0x88,0x7e,_0xdbcc21>>0x8&0xff,_0xdbcc21&0xff]):_0x1c3805===0x7f?Buffer[_0x58242d(0x1f1)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0xdbcc21>>0x8&0xff,_0xdbcc21&0xff]):Buffer[_0x58242d(0x1f1)]([0x88,_0xdbcc21]),_0x271c3f=Buffer[_0x58242d(0x21c)]([_0x5a8238,_0x4edcf6]);this[_0x58242d(0x1ee)]['write'](_0x271c3f),this[_0x58242d(0x224)]=_0x58242d(0x1f9);if(_0x304745===null)this[_0x58242d(0x224)]=_0x58242d(0x207),this[_0x58242d(0x1ee)][_0x58242d(0x21e)](),this[_0x58242d(0x1f0)](_0x58242d(0x1e7),{'code':_0x1e76f4,'reason':_0x559585}),_0x14abd7();else{let _0x51629e=!![];this[_0x58242d(0x1ee)][_0x58242d(0x20e)](_0x58242d(0x240),_0x7249be=>{const _0xa7aec2=_0x58242d;if(!_0x51629e)return;_0x7249be[0x0]===0x88?(this[_0xa7aec2(0x224)]=_0xa7aec2(0x207),this[_0xa7aec2(0x1ee)][_0xa7aec2(0x21e)](),this[_0xa7aec2(0x1f0)](_0xa7aec2(0x1e7),{'code':_0x1e76f4,'reason':_0x559585}),_0x14abd7()):_0x22478e(new Error('Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.'));}),setTimeout(()=>{const _0x572f10=_0x58242d;_0x51629e=![],_0x22478e(new Error(_0x572f10(0x22e))),this[_0x572f10(0x1ee)][_0x572f10(0x21e)]();},_0x304745);}});});}[a2_0x232c7c(0x205)](_0x17ed12,_0x284da1){const _0x3b091b=a2_0x232c7c;let _0x2c4ac5,_0x4fa6c7;switch(_0x17ed12){case'text':_0x2c4ac5=Buffer[_0x3b091b(0x1f1)](_0x284da1,_0x3b091b(0x215)),_0x4fa6c7=0x1;break;case'binary':_0x2c4ac5=_0x284da1,_0x4fa6c7=0x2;break;case _0x3b091b(0x1f8):_0x2c4ac5=_0x284da1,_0x4fa6c7=0x9;break;case _0x3b091b(0x23a):_0x2c4ac5=_0x284da1,_0x4fa6c7=0xa;break;}const _0x38d43c=[];if(_0x2c4ac5['length']<0x7e)_0x38d43c[_0x3b091b(0x238)](_0x2c4ac5['length']);else{if(_0x2c4ac5[_0x3b091b(0x1f2)]<0x10000)_0x38d43c[_0x3b091b(0x238)](0x7e,_0x2c4ac5['length']>>0x8&0xff,_0x2c4ac5[_0x3b091b(0x1f2)]&0xff);else{_0x38d43c[_0x3b091b(0x238)](0x7f);for(let _0x4ad5e3=0x7;_0x4ad5e3>=0x0;_0x4ad5e3--)_0x38d43c[_0x3b091b(0x238)](_0x2c4ac5['length']>>_0x4ad5e3*0x8&0xff);}}const _0x579ba8=Buffer[_0x3b091b(0x21c)]([Buffer[_0x3b091b(0x1f1)]([0x80|_0x4fa6c7,..._0x38d43c]),_0x2c4ac5]);this[_0x3b091b(0x1ee)][_0x3b091b(0x241)](_0x579ba8);}[a2_0x232c7c(0x239)](_0x5edd93,_0x4cf137,_0x5911d0,_0x1c205f=0x32*0x3e8){const _0x1582ba=a2_0x232c7c;if(this['socket']==undefined||this['status']!==_0x1582ba(0x1f5))throw new Error(_0x1582ba(0x23e));if(['handshake','open',_0x1582ba(0x217),_0x1582ba(0x1e7)][_0x1582ba(0x229)](_0x5edd93))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close');const _0x3c4b42=_0x5911d0==undefined?0x0:this[_0x1582ba(0x23b)],_0x2c6149=Buffer[_0x1582ba(0x1f1)](_0x5edd93,_0x1582ba(0x215));if(_0x2c6149[_0x1582ba(0x1f2)]>0xff)throw new Error(_0x1582ba(0x223));if(_0x5911d0!=undefined){this['requestId']=(this[_0x1582ba(0x23b)]+0x1)%0x80||0x1;const _0x5b6db7=setTimeout(()=>{delete this['pendingRequests'][_0x3c4b42],_0x5911d0(new Error('Timeout'));},_0x1c205f);this[_0x1582ba(0x22a)][_0x3c4b42]=_0x56033d=>{if(!(_0x56033d instanceof Error))clearTimeout(_0x5b6db7);_0x5911d0(_0x56033d);};}const _0x953337=Buffer[_0x1582ba(0x21c)]([Buffer[_0x1582ba(0x1f1)]([_0x3c4b42|0x80,_0x2c6149[_0x1582ba(0x1f2)]]),_0x2c6149,this[_0x1582ba(0x1e8)](_0x4cf137)]);this[_0x1582ba(0x205)](_0x1582ba(0x213),_0x953337);}[a2_0x232c7c(0x233)](_0x2cb697){const _0x200bec=a2_0x232c7c;var _0x597b8e;const _0x24fb28=_0x2cb697[0x0],_0x31b05e=(_0x24fb28&0x80)!==0x0,_0x2f0d9a=_0x24fb28&0xf,_0x456894=_0x2cb697[0x1],_0x1116bd=(_0x456894&0x80)!==0x0;let _0x4ce424=_0x456894&0x7f,_0x21c667=0x2;if(_0x4ce424===0x7e)_0x4ce424=_0x2cb697['readUInt16BE'](_0x21c667),_0x21c667+=0x2;else _0x4ce424===0x7f&&(_0x4ce424=Number(_0x2cb697['readBigUInt64BE'](_0x21c667)),_0x21c667+=0x8);const _0x3976e3=_0x1116bd?_0x2cb697[_0x200bec(0x232)](_0x21c667,_0x21c667+0x4):Buffer[_0x200bec(0x23c)](0x0);if(_0x1116bd)_0x21c667+=0x4;let _0x2095d2=_0x2cb697[_0x200bec(0x232)](_0x21c667,_0x21c667+_0x4ce424);if(_0x1116bd){const _0x2c2414=Buffer[_0x200bec(0x23c)](_0x2095d2[_0x200bec(0x1f2)]);for(let _0x1105ff=0x0;_0x1105ff<_0x2095d2['length'];_0x1105ff++)_0x2c2414[_0x1105ff]=_0x2095d2[_0x1105ff]^_0x3976e3[_0x1105ff%0x4];_0x2095d2=_0x2c2414;}switch(_0x2f0d9a){case 0x1:this['raise'](_0x200bec(0x217),new Error(_0x200bec(0x1e9)+_0x2095d2['toString'](_0x200bec(0x215))));break;case 0x2:{if(this[_0x200bec(0x224)]==='handshake'){const _0x3c4cda=this['decode'](_0x2095d2);this[_0x200bec(0x1f0)]('handshake',_0x3c4cda),this['status']=_0x200bec(0x1f5),this[_0x200bec(0x205)]('binary',Buffer[_0x200bec(0x23c)](0x0));return;}const _0x49e7cc=_0x2095d2['readUInt8'](0x0),_0x568868=_0x49e7cc&0x7f,_0x1ddf3d=(_0x49e7cc&0x80)!==0x0;if(_0x1ddf3d){const _0x4a5a34=_0x2095d2[_0x200bec(0x202)](0x1),_0xf8e778=_0x2095d2[_0x200bec(0x232)](0x2,0x2+_0x4a5a34)['toString'](_0x200bec(0x215));if([_0x200bec(0x219),_0x200bec(0x1f5),_0x200bec(0x217),_0x200bec(0x1e7)][_0x200bec(0x229)](_0xf8e778)){this[_0x200bec(0x1f0)](_0x200bec(0x217),new Error(_0x200bec(0x1ed)+_0xf8e778+';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?'));return;}const _0x19a9a9=this[_0x200bec(0x1ea)](_0x2095d2[_0x200bec(0x232)](0x2+_0x4a5a34)),_0xb092af=(_0x597b8e=this[_0x200bec(0x1fc)][_0xf8e778])!==null&&_0x597b8e!==void 0x0?_0x597b8e:[];let _0x7bc319=![];for(const _0x1e05eb of _0xb092af){const _0x147f0e=_0x1e05eb['call'](undefined,_0x19a9a9);if(!_0x7bc319&&_0x147f0e!==undefined&&_0x568868!==0x0){_0x7bc319=!![];const _0x1f6391=Buffer['concat']([Buffer[_0x200bec(0x1f1)]([_0x568868&0x7f]),this['encode'](_0x147f0e)]);this[_0x200bec(0x205)](_0x200bec(0x213),_0x1f6391);}}if(!_0x7bc319&&_0x568868!==0x0)this[_0x200bec(0x1f0)](_0x200bec(0x217),new Error('Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20'+_0xf8e778+_0x200bec(0x22c)));return;}const _0x4b324a=this['pendingRequests'][_0x568868];if(_0x4b324a==undefined){this[_0x200bec(0x1f0)]('error',new Error(_0x200bec(0x21b)+_0x568868+_0x200bec(0x211)));return;}const _0x31c038=this[_0x200bec(0x1ea)](_0x2095d2[_0x200bec(0x232)](0x1));_0x4b324a['call'](undefined,_0x31c038);break;}case 0x9:this[_0x200bec(0x205)](_0x200bec(0x23a),_0x2095d2);break;case 0xa:const _0x3c849f=_0x2095d2[_0x200bec(0x237)](_0x200bec(0x215)),_0x6e3d48=this[_0x200bec(0x235)][_0x3c849f];if(_0x6e3d48==undefined){this[_0x200bec(0x1f0)](_0x200bec(0x217),new Error(_0x200bec(0x1f7)));return;}_0x6e3d48();break;case 0x8:if(this[_0x200bec(0x224)]===_0x200bec(0x1f9))return;let _0x402c63=0x3e8,_0x56e815='';_0x2095d2[_0x200bec(0x1f2)]>=0x2&&(_0x402c63=_0x2095d2[_0x200bec(0x20f)](0x0),_0x56e815=_0x2095d2[_0x200bec(0x232)](0x2)['toString'](_0x200bec(0x215)));this[_0x200bec(0x201)](_0x402c63,_0x56e815,null);break;default:this[_0x200bec(0x1f0)](_0x200bec(0x217),new Error(_0x200bec(0x1fe)+_0x2f0d9a));}}[a2_0x232c7c(0x1e8)](_0x4e53e8){const _0x21eea1=a2_0x232c7c;return Buffer[_0x21eea1(0x1f1)](JSON[_0x21eea1(0x1eb)](_0x4e53e8),_0x21eea1(0x215));}[a2_0x232c7c(0x1ea)](_0x65d1b1){const _0x546893=a2_0x232c7c;return JSON[_0x546893(0x1fb)](_0x65d1b1[_0x546893(0x237)]('utf-8'));}[a2_0x232c7c(0x1f4)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x2c9026,_0x54b2d3)=>{const _0x56785a=a2_0x2269,_0x2f6406=crypto_1[_0x56785a(0x23d)]['randomUUID'](),_0x10b920=setTimeout(()=>{const _0x492261=_0x56785a;delete this[_0x492261(0x235)][_0x2f6406],this['disconnect'](0x3e8,'',null),_0x2c9026(![]);},this[_0x56785a(0x22b)]);this['pingRequests'][_0x2f6406]=()=>{delete this['pingRequests'][_0x2f6406],clearTimeout(_0x10b920),_0x2c9026(!![]),setTimeout(()=>{const _0x522e80=a2_0x2269;if(this[_0x522e80(0x224)]!=='open')return;this['checkHeartbeat']();},this['pingInterval']);},this['send'](_0x56785a(0x1f8),Buffer[_0x56785a(0x1f1)](_0x2f6406));});});}['on'](_0x327eeb,_0x5c786d){const _0x1e1598=a2_0x232c7c;if(this[_0x1e1598(0x1fc)][_0x327eeb]==undefined)this[_0x1e1598(0x1fc)][_0x327eeb]=[];this[_0x1e1598(0x1fc)][_0x327eeb][_0x1e1598(0x238)](_0x5c786d);}[a2_0x232c7c(0x20a)](_0x4b70d6,_0x599e8f){const _0x33b1a7=a2_0x232c7c;if(_0x599e8f==undefined){this[_0x33b1a7(0x1fc)][_0x4b70d6]=[];return;}const _0xa46531=this[_0x33b1a7(0x1fc)][_0x4b70d6],_0x398b07=(_0xa46531!==null&&_0xa46531!==void 0x0?_0xa46531:[])[_0x33b1a7(0x204)](_0x48397d=>_0x48397d===_0x599e8f);if(_0x398b07===-0x1)throw new Error(_0x33b1a7(0x1fd)+_0x4b70d6+_0x33b1a7(0x236));_0xa46531[_0x33b1a7(0x221)](_0x398b07,0x1);}[a2_0x232c7c(0x1f0)](_0x499d67,_0x24d1a9){const _0x4d8ea3=a2_0x232c7c;var _0x4fcd65;const _0x229a3b=(_0x4fcd65=this[_0x4d8ea3(0x1fc)][_0x499d67])!==null&&_0x4fcd65!==void 0x0?_0x4fcd65:[];for(const _0x465779 of _0x229a3b){_0x465779(_0x24d1a9);}}static['fromUpgradeRequest'](_0x54c006,_0x3848f6){const _0x420a7f=a2_0x232c7c,_0x26b8a5=_0x54c006[_0x420a7f(0x200)]['sec-websocket-key'];if(_0x26b8a5==undefined)return _0x3848f6['destroy'](),null;const _0xca1560=crypto_1[_0x420a7f(0x23d)][_0x420a7f(0x230)]('sha1');_0xca1560[_0x420a7f(0x228)](_0x26b8a5+_0x420a7f(0x22f));const _0x18a8c6=_0xca1560[_0x420a7f(0x208)](_0x420a7f(0x22d)),_0x22b6c7=[_0x420a7f(0x23f),_0x420a7f(0x1ff),'Connection:\x20Upgrade',_0x420a7f(0x212)+_0x18a8c6];return _0x3848f6[_0x420a7f(0x241)](_0x22b6c7[_0x420a7f(0x21f)]('\x0d\x0a')+_0x420a7f(0x210)),new Socket(_0x3848f6);}}exports[a2_0x232c7c(0x23d)]=Socket;