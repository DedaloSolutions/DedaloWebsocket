'use strict';const a2_0x3e0b19=a2_0x3add;(function(_0x47731b,_0x40005a){const _0x45f706=a2_0x3add,_0x323e96=_0x47731b();while(!![]){try{const _0x441c57=-parseInt(_0x45f706(0x199))/0x1*(parseInt(_0x45f706(0x1b2))/0x2)+parseInt(_0x45f706(0x1b7))/0x3+-parseInt(_0x45f706(0x19b))/0x4+-parseInt(_0x45f706(0x1bb))/0x5*(parseInt(_0x45f706(0x178))/0x6)+parseInt(_0x45f706(0x177))/0x7*(-parseInt(_0x45f706(0x182))/0x8)+parseInt(_0x45f706(0x1ae))/0x9+-parseInt(_0x45f706(0x191))/0xa*(-parseInt(_0x45f706(0x187))/0xb);if(_0x441c57===_0x40005a)break;else _0x323e96['push'](_0x323e96['shift']());}catch(_0x2aa7bb){_0x323e96['push'](_0x323e96['shift']());}}}(a2_0x4f36,0x30240));function a2_0x4f36(){const _0x272af8=['binary','__esModule','pingInterval','decode','667728oXGjVr','defineProperty','requestId','createHash','5zhoAMM','throw','stringify','Connection:\x20Upgrade','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','closed','\x20but\x20no\x20handler\x20return\x20a\x20result','utf-8','writeUInt16BE','ping','HTTP/1.1\x20101\x20Switching\x20Protocols','update','value','sec-websocket-key','disconnect','checkHeartbeat','end','digest','handle','apply','3346cUpvzJ','1849908AIrenI','send','socket','off','close','readUInt8','pingTimeout','includes','join','Sec-WebSocket-Accept:\x20','4136STSnXO','default','copy','call','handshake','2563fqfaoT','alloc','readBigUInt64BE','next','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','randomUUID','push','from','closing','slice','21970xofWDS','pingRequests','then','headers','pendingRequests','toString','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','132307oxlpER','sha1','508320abtVkQ','pong','write','concat','Received\x20non-standard\x20text\x20message:\x20','findIndex','__importDefault','Upgrade:\x20websocket','fromUpgradeRequest','readUInt16BE','status','handlers','error','open','locals','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','length','encode','once','2497842pXlcVk','parse','done','raise','2xejAls'];a2_0x4f36=function(){return _0x272af8;};return a2_0x4f36();}var __awaiter=this&&this['__awaiter']||function(_0x4cb8a6,_0x303dbd,_0x1756be,_0x19dd17){function _0x50f1b5(_0xf77bac){return _0xf77bac instanceof _0x1756be?_0xf77bac:new _0x1756be(function(_0x1e3572){_0x1e3572(_0xf77bac);});}return new(_0x1756be||(_0x1756be=Promise))(function(_0x2c4005,_0xec6d6a){const _0x4e1c3e=a2_0x3add;function _0x2e609b(_0x3f5956){const _0x490e81=a2_0x3add;try{_0x48a45b(_0x19dd17[_0x490e81(0x18a)](_0x3f5956));}catch(_0x3dd70d){_0xec6d6a(_0x3dd70d);}}function _0x403e71(_0x3a3728){const _0x224b1f=a2_0x3add;try{_0x48a45b(_0x19dd17[_0x224b1f(0x1bc)](_0x3a3728));}catch(_0xd2be7e){_0xec6d6a(_0xd2be7e);}}function _0x48a45b(_0x582270){const _0x4ed36c=a2_0x3add;_0x582270[_0x4ed36c(0x1b0)]?_0x2c4005(_0x582270[_0x4ed36c(0x16f)]):_0x50f1b5(_0x582270[_0x4ed36c(0x16f)])[_0x4ed36c(0x193)](_0x2e609b,_0x403e71);}_0x48a45b((_0x19dd17=_0x19dd17[_0x4e1c3e(0x176)](_0x4cb8a6,_0x303dbd||[]))[_0x4e1c3e(0x18a)]());});},__importDefault=this&&this[a2_0x3e0b19(0x1a1)]||function(_0x5f783){const _0x10953e=a2_0x3e0b19;return _0x5f783&&_0x5f783[_0x10953e(0x1b4)]?_0x5f783:{'default':_0x5f783};};Object[a2_0x3e0b19(0x1b8)](exports,a2_0x3e0b19(0x1b4),{'value':!![]});const crypto_1=__importDefault(require('crypto'));class Socket{constructor(_0x13e75c){const _0x11747e=a2_0x3e0b19;this['socket']=_0x13e75c,this[_0x11747e(0x1a5)]=_0x11747e(0x186),this[_0x11747e(0x1b5)]=0x5*0x3e8,this[_0x11747e(0x17e)]=0x2*0x3e8,this[_0x11747e(0x192)]={},this[_0x11747e(0x1b9)]=0x1,this[_0x11747e(0x195)]={},this[_0x11747e(0x1a9)]={},this[_0x11747e(0x1a6)]={},this[_0x11747e(0x17a)]['on']('data',_0x5406be=>this[_0x11747e(0x175)](_0x5406be)),this[_0x11747e(0x17a)]['on'](_0x11747e(0x1a7),_0x567852=>this[_0x11747e(0x1b1)](_0x11747e(0x1a7),_0x567852)),this['socket']['on']('close',()=>{}),this[_0x11747e(0x172)]();const _0xd9898=this[_0x11747e(0x1ac)]({'pingInterval':this[_0x11747e(0x1b5)]});this[_0x11747e(0x179)](_0x11747e(0x1b3),_0xd9898);}['disconnect'](){return __awaiter(this,arguments,void 0x0,function*(_0x5ca05b=0x3e8,_0x131ecc='',_0x70c6fe=0x1388){return new Promise((_0x2cacc3,_0x39540f)=>{const _0x2269ad=a2_0x3add,_0x11a5c3=Buffer['from'](_0x131ecc,_0x2269ad(0x16a)),_0x432901=Buffer['alloc'](0x2+_0x11a5c3['length']);_0x432901[_0x2269ad(0x16b)](_0x5ca05b,0x0),_0x11a5c3[_0x2269ad(0x184)](_0x432901,0x2);const _0x5cc754=_0x432901[_0x2269ad(0x1ab)],_0x1fb631=_0x5cc754<0x7e?_0x5cc754:_0x5cc754<0x10000?0x7e:0x7f,_0x4cfe5e=_0x1fb631===0x7e?Buffer[_0x2269ad(0x18e)]([0x88,0x7e,_0x5cc754>>0x8&0xff,_0x5cc754&0xff]):_0x1fb631===0x7f?Buffer[_0x2269ad(0x18e)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x5cc754>>0x8&0xff,_0x5cc754&0xff]):Buffer[_0x2269ad(0x18e)]([0x88,_0x5cc754]),_0x76303a=Buffer['concat']([_0x4cfe5e,_0x432901]);this['socket']['write'](_0x76303a),this[_0x2269ad(0x1a5)]=_0x2269ad(0x18f);if(_0x70c6fe===null)this[_0x2269ad(0x1a5)]=_0x2269ad(0x168),this[_0x2269ad(0x17a)][_0x2269ad(0x173)](),this['raise']('close',{'code':_0x5ca05b,'reason':_0x131ecc}),_0x2cacc3();else{let _0x1610ea=!![];this['socket'][_0x2269ad(0x1ad)]('data',_0x5ece9b=>{const _0x2f0949=_0x2269ad;if(!_0x1610ea)return;_0x5ece9b[0x0]===0x88?(this['status']=_0x2f0949(0x168),this[_0x2f0949(0x17a)][_0x2f0949(0x173)](),this[_0x2f0949(0x1b1)](_0x2f0949(0x17c),{'code':_0x5ca05b,'reason':_0x131ecc}),_0x2cacc3()):_0x39540f(new Error(_0x2f0949(0x198)));}),setTimeout(()=>{const _0x2b0e60=_0x2269ad;_0x1610ea=![],_0x39540f(new Error(_0x2b0e60(0x1bf))),this[_0x2b0e60(0x17a)]['end']();},_0x70c6fe);}});});}['send'](_0x1a20a3,_0x3c92de){const _0x20da57=a2_0x3e0b19;let _0x284adb,_0x542515;switch(_0x1a20a3){case'text':_0x284adb=Buffer['from'](_0x3c92de,_0x20da57(0x16a)),_0x542515=0x1;break;case _0x20da57(0x1b3):_0x284adb=_0x3c92de,_0x542515=0x2;break;case _0x20da57(0x16c):_0x284adb=_0x3c92de,_0x542515=0x9;break;case _0x20da57(0x19c):_0x284adb=_0x3c92de,_0x542515=0xa;break;}const _0x122acf=[];if(_0x284adb[_0x20da57(0x1ab)]<0x7e)_0x122acf['push'](_0x284adb['length']);else{if(_0x284adb[_0x20da57(0x1ab)]<0x10000)_0x122acf[_0x20da57(0x18d)](0x7e,_0x284adb[_0x20da57(0x1ab)]>>0x8&0xff,_0x284adb[_0x20da57(0x1ab)]&0xff);else{_0x122acf[_0x20da57(0x18d)](0x7f);for(let _0x34108f=0x7;_0x34108f>=0x0;_0x34108f--)_0x122acf[_0x20da57(0x18d)](_0x284adb[_0x20da57(0x1ab)]>>_0x34108f*0x8&0xff);}}const _0x369cfd=Buffer[_0x20da57(0x19e)]([Buffer['from']([0x80|_0x542515,..._0x122acf]),_0x284adb]);this[_0x20da57(0x17a)][_0x20da57(0x19d)](_0x369cfd);}['emit'](_0x2ae5a1,_0x33578e,_0x348949,_0x1f4a76=0x32*0x3e8){const _0x43ddc9=a2_0x3e0b19;if(this['socket']==undefined||this['status']!=='open')throw new Error('The\x20websocket\x20is\x20not\x20connected');if([_0x43ddc9(0x186),_0x43ddc9(0x1a8),_0x43ddc9(0x1a7),_0x43ddc9(0x17c)][_0x43ddc9(0x17f)](_0x2ae5a1))throw new Error(_0x43ddc9(0x197));const _0x105d36=_0x348949==undefined?0x0:this[_0x43ddc9(0x1b9)],_0x19c195=Buffer[_0x43ddc9(0x18e)](_0x2ae5a1,_0x43ddc9(0x16a));if(_0x19c195['length']>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0x348949!=undefined){this[_0x43ddc9(0x1b9)]=(this[_0x43ddc9(0x1b9)]+0x1)%0x80||0x1;const _0x5e7656=setTimeout(()=>{const _0x1a0204=_0x43ddc9;delete this[_0x1a0204(0x195)][_0x105d36],_0x348949(new Error('Timeout'));},_0x1f4a76);this['pendingRequests'][_0x105d36]=_0x342913=>{if(!(_0x342913 instanceof Error))clearTimeout(_0x5e7656);_0x348949(_0x342913);};}const _0x5beef7=Buffer['concat']([Buffer[_0x43ddc9(0x18e)]([_0x105d36|0x80,_0x19c195[_0x43ddc9(0x1ab)]]),_0x19c195,this['encode'](_0x33578e)]);this[_0x43ddc9(0x179)](_0x43ddc9(0x1b3),_0x5beef7);}[a2_0x3e0b19(0x175)](_0x66f402){const _0x2e45a9=a2_0x3e0b19;var _0x1fb6c8;const _0x288555=_0x66f402[0x0],_0x4c6528=(_0x288555&0x80)!==0x0,_0xaf7c87=_0x288555&0xf,_0xe9d1b5=_0x66f402[0x1],_0x571234=(_0xe9d1b5&0x80)!==0x0;let _0x4ffbd8=_0xe9d1b5&0x7f,_0x3ebc23=0x2;if(_0x4ffbd8===0x7e)_0x4ffbd8=_0x66f402[_0x2e45a9(0x1a4)](_0x3ebc23),_0x3ebc23+=0x2;else _0x4ffbd8===0x7f&&(_0x4ffbd8=Number(_0x66f402[_0x2e45a9(0x189)](_0x3ebc23)),_0x3ebc23+=0x8);const _0x50ff55=_0x571234?_0x66f402[_0x2e45a9(0x190)](_0x3ebc23,_0x3ebc23+0x4):Buffer['alloc'](0x0);if(_0x571234)_0x3ebc23+=0x4;let _0xa3a6fa=_0x66f402['slice'](_0x3ebc23,_0x3ebc23+_0x4ffbd8);if(_0x571234){const _0x47f38b=Buffer[_0x2e45a9(0x188)](_0xa3a6fa[_0x2e45a9(0x1ab)]);for(let _0x140748=0x0;_0x140748<_0xa3a6fa[_0x2e45a9(0x1ab)];_0x140748++)_0x47f38b[_0x140748]=_0xa3a6fa[_0x140748]^_0x50ff55[_0x140748%0x4];_0xa3a6fa=_0x47f38b;}switch(_0xaf7c87){case 0x1:this[_0x2e45a9(0x1b1)](_0x2e45a9(0x1a7),new Error(_0x2e45a9(0x19f)+_0xa3a6fa[_0x2e45a9(0x196)](_0x2e45a9(0x16a))));break;case 0x2:{if(this[_0x2e45a9(0x1a5)]===_0x2e45a9(0x186)){const _0x53f6d2=this[_0x2e45a9(0x1b6)](_0xa3a6fa);this['raise']('handshake',_0x53f6d2),this[_0x2e45a9(0x1a5)]=_0x2e45a9(0x1a8),this[_0x2e45a9(0x179)](_0x2e45a9(0x1b3),Buffer['alloc'](0x0));return;}const _0x1a92f9=_0xa3a6fa[_0x2e45a9(0x17d)](0x0),_0x2a8abf=_0x1a92f9&0x7f,_0x2486fe=(_0x1a92f9&0x80)!==0x0;if(_0x2486fe){const _0x4eda53=_0xa3a6fa['readUInt8'](0x1),_0x573dd0=_0xa3a6fa[_0x2e45a9(0x190)](0x2,0x2+_0x4eda53)[_0x2e45a9(0x196)](_0x2e45a9(0x16a));if(['handshake','open',_0x2e45a9(0x1a7),_0x2e45a9(0x17c)][_0x2e45a9(0x17f)](_0x573dd0)){this['raise'](_0x2e45a9(0x1a7),new Error('Received\x20a\x20request\x20with\x20eventName\x20'+_0x573dd0+';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?'));return;}const _0xfb103=this[_0x2e45a9(0x1b6)](_0xa3a6fa[_0x2e45a9(0x190)](0x2+_0x4eda53)),_0x58e687=(_0x1fb6c8=this[_0x2e45a9(0x1a6)][_0x573dd0])!==null&&_0x1fb6c8!==void 0x0?_0x1fb6c8:[];let _0x1de8af=![];for(const _0x317732 of _0x58e687){const _0x1ceaa3=_0x317732[_0x2e45a9(0x185)](undefined,_0xfb103);if(!_0x1de8af&&_0x1ceaa3!==undefined&&_0x2a8abf!==0x0){_0x1de8af=!![];const _0x513bbe=Buffer[_0x2e45a9(0x19e)]([Buffer[_0x2e45a9(0x18e)]([_0x2a8abf&0x7f]),this[_0x2e45a9(0x1ac)](_0x1ceaa3)]);this[_0x2e45a9(0x179)](_0x2e45a9(0x1b3),_0x513bbe);}}if(!_0x1de8af&&_0x2a8abf!==0x0)this[_0x2e45a9(0x1b1)](_0x2e45a9(0x1a7),new Error('Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20'+_0x573dd0+_0x2e45a9(0x169)));return;}const _0xebc15c=this['pendingRequests'][_0x2a8abf];if(_0xebc15c==undefined){this['raise'](_0x2e45a9(0x1a7),new Error('Received\x20a\x20response\x20for\x20the\x20id\x20'+_0x2a8abf+'\x20but\x20no\x20pending\x20request\x20was\x20found'));return;}const _0xdadafd=this[_0x2e45a9(0x1b6)](_0xa3a6fa[_0x2e45a9(0x190)](0x1));_0xebc15c['call'](undefined,_0xdadafd);break;}case 0x9:this[_0x2e45a9(0x179)](_0x2e45a9(0x19c),_0xa3a6fa);break;case 0xa:const _0x114baf=_0xa3a6fa['toString'](_0x2e45a9(0x16a)),_0x486fb8=this[_0x2e45a9(0x192)][_0x114baf];if(_0x486fb8==undefined){this[_0x2e45a9(0x1b1)](_0x2e45a9(0x1a7),new Error('Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping'));return;}_0x486fb8();break;case 0x8:if(this[_0x2e45a9(0x1a5)]===_0x2e45a9(0x18f))return;let _0x125fa0=0x3e8,_0x4b00db='';_0xa3a6fa[_0x2e45a9(0x1ab)]>=0x2&&(_0x125fa0=_0xa3a6fa['readUInt16BE'](0x0),_0x4b00db=_0xa3a6fa[_0x2e45a9(0x190)](0x2)[_0x2e45a9(0x196)]('utf-8'));this[_0x2e45a9(0x171)](_0x125fa0,_0x4b00db,null);break;default:this[_0x2e45a9(0x1b1)](_0x2e45a9(0x1a7),new Error('Received\x20message\x20with\x20unsupported\x20opcode:\x20'+_0xaf7c87));}}['encode'](_0x1d3a5b){const _0x2bf9df=a2_0x3e0b19;return Buffer[_0x2bf9df(0x18e)](JSON[_0x2bf9df(0x1bd)](_0x1d3a5b),_0x2bf9df(0x16a));}['decode'](_0x2d39d8){const _0x239e38=a2_0x3e0b19;return JSON[_0x239e38(0x1af)](_0x2d39d8[_0x239e38(0x196)]('utf-8'));}[a2_0x3e0b19(0x172)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x1518dc,_0x5707a2)=>{const _0x47961b=a2_0x3add,_0x469b7c=crypto_1['default'][_0x47961b(0x18c)](),_0x5f38ee=setTimeout(()=>{const _0x223558=_0x47961b;delete this['pingRequests'][_0x469b7c],this[_0x223558(0x171)](0x3e8,'',null),_0x1518dc(![]);},this['pingTimeout']);this[_0x47961b(0x192)][_0x469b7c]=()=>{const _0x4e8a8c=_0x47961b;delete this[_0x4e8a8c(0x192)][_0x469b7c],clearTimeout(_0x5f38ee),_0x1518dc(!![]),setTimeout(()=>{const _0x128a12=_0x4e8a8c;if(this[_0x128a12(0x1a5)]!==_0x128a12(0x1a8))return;this[_0x128a12(0x172)]();},this[_0x4e8a8c(0x1b5)]);},this['send'](_0x47961b(0x16c),Buffer['from'](_0x469b7c));});});}['on'](_0x3e9686,_0x4f8af5){const _0x370240=a2_0x3e0b19;if(this[_0x370240(0x1a6)][_0x3e9686]==undefined)this[_0x370240(0x1a6)][_0x3e9686]=[];this['handlers'][_0x3e9686][_0x370240(0x18d)](_0x4f8af5);}[a2_0x3e0b19(0x17b)](_0xa4868b,_0x4e70dd){const _0x35827c=a2_0x3e0b19;if(_0x4e70dd==undefined){this[_0x35827c(0x1a6)][_0xa4868b]=[];return;}const _0x341190=this[_0x35827c(0x1a6)][_0xa4868b],_0x4b587f=(_0x341190!==null&&_0x341190!==void 0x0?_0x341190:[])[_0x35827c(0x1a0)](_0x253c62=>_0x253c62===_0x4e70dd);if(_0x4b587f===-0x1)throw new Error(_0x35827c(0x18b)+_0xa4868b+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x341190['splice'](_0x4b587f,0x1);}[a2_0x3e0b19(0x1b1)](_0x3bb836,_0x5f1a8d){const _0x5779e9=a2_0x3e0b19;var _0x6527d3;const _0x36b23f=(_0x6527d3=this[_0x5779e9(0x1a6)][_0x3bb836])!==null&&_0x6527d3!==void 0x0?_0x6527d3:[];for(const _0xc4f090 of _0x36b23f){_0xc4f090(_0x5f1a8d);}}static[a2_0x3e0b19(0x1a3)](_0x51de0f,_0x25813b){const _0x3390e5=a2_0x3e0b19,_0x2dcd84=_0x51de0f[_0x3390e5(0x194)][_0x3390e5(0x170)];if(_0x2dcd84==undefined)return _0x25813b['destroy'](),null;const _0x179418=crypto_1[_0x3390e5(0x183)][_0x3390e5(0x1ba)](_0x3390e5(0x19a));_0x179418[_0x3390e5(0x16e)](_0x2dcd84+_0x3390e5(0x1aa));const _0x22de62=_0x179418[_0x3390e5(0x174)]('base64'),_0x386283=[_0x3390e5(0x16d),_0x3390e5(0x1a2),_0x3390e5(0x1be),_0x3390e5(0x181)+_0x22de62];return _0x25813b[_0x3390e5(0x19d)](_0x386283[_0x3390e5(0x180)]('\x0d\x0a')+'\x0d\x0a\x0d\x0a'),new Socket(_0x25813b);}}function a2_0x3add(_0x11cd69,_0x1eeaeb){const _0x4f36ff=a2_0x4f36();return a2_0x3add=function(_0x3addaf,_0x4be1a2){_0x3addaf=_0x3addaf-0x168;let _0x22cea2=_0x4f36ff[_0x3addaf];return _0x22cea2;},a2_0x3add(_0x11cd69,_0x1eeaeb);}exports['default']=Socket;