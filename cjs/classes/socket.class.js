'use strict';const a3_0x119f05=a3_0x3737;(function(_0x3bb91d,_0x3668e2){const _0x206c5a=a3_0x3737,_0x203705=_0x3bb91d();while(!![]){try{const _0x318546=-parseInt(_0x206c5a(0x178))/0x1+parseInt(_0x206c5a(0x193))/0x2+-parseInt(_0x206c5a(0x16f))/0x3*(parseInt(_0x206c5a(0x160))/0x4)+parseInt(_0x206c5a(0x1ae))/0x5+parseInt(_0x206c5a(0x16c))/0x6+-parseInt(_0x206c5a(0x166))/0x7*(parseInt(_0x206c5a(0x195))/0x8)+parseInt(_0x206c5a(0x16d))/0x9;if(_0x318546===_0x3668e2)break;else _0x203705['push'](_0x203705['shift']());}catch(_0x509c47){_0x203705['push'](_0x203705['shift']());}}}(a3_0x234e,0xcb5f5));var __awaiter=this&&this[a3_0x119f05(0x1b1)]||function(_0x41f550,_0x2619ac,_0x43049c,_0x426c41){function _0x5677a7(_0x3a974c){return _0x3a974c instanceof _0x43049c?_0x3a974c:new _0x43049c(function(_0x22820c){_0x22820c(_0x3a974c);});}return new(_0x43049c||(_0x43049c=Promise))(function(_0x22c14e,_0x6feb7f){const _0x47c7de=a3_0x3737;function _0x454ab7(_0x293a14){const _0x100e68=a3_0x3737;try{_0x4cf49b(_0x426c41[_0x100e68(0x19a)](_0x293a14));}catch(_0xea71f1){_0x6feb7f(_0xea71f1);}}function _0x48138b(_0x188337){const _0x3f4a54=a3_0x3737;try{_0x4cf49b(_0x426c41[_0x3f4a54(0x180)](_0x188337));}catch(_0x5acb56){_0x6feb7f(_0x5acb56);}}function _0x4cf49b(_0x5172f8){const _0x1924fe=a3_0x3737;_0x5172f8[_0x1924fe(0x177)]?_0x22c14e(_0x5172f8['value']):_0x5677a7(_0x5172f8[_0x1924fe(0x15d)])[_0x1924fe(0x194)](_0x454ab7,_0x48138b);}_0x4cf49b((_0x426c41=_0x426c41[_0x47c7de(0x18d)](_0x41f550,_0x2619ac||[]))[_0x47c7de(0x19a)]());});},__importDefault=this&&this[a3_0x119f05(0x19d)]||function(_0x492bb8){const _0x404377=a3_0x119f05;return _0x492bb8&&_0x492bb8[_0x404377(0x1a3)]?_0x492bb8:{'default':_0x492bb8};};function a3_0x3737(_0x1c2dd8,_0x27b689){const _0x234e0f=a3_0x234e();return a3_0x3737=function(_0x373713,_0x3dda60){_0x373713=_0x373713-0x15a;let _0x165b23=_0x234e0f[_0x373713];return _0x165b23;},a3_0x3737(_0x1c2dd8,_0x27b689);}Object[a3_0x119f05(0x17e)](exports,a3_0x119f05(0x1a3),{'value':!![]});function a3_0x234e(){const _0x2bb1b6=['258EAFA5-E914-47DA-95CA-C5AB0DC85B11','_status','status','update','default','defineProperty','includes','throw','readUInt16BE','handshake','pingRequests','digest','handlers','pingTimeout','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','writeUInt16BE','Timeout','findIndex','closing','once','apply','toString','data','close','requestId','join','1618434ZXONKe','then','19032WXhKzO','encode','end','length','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','next','checkHeartbeat','splice','__importDefault','call','NaN','text','from','stringify','__esModule','sha1','concat','fromUpgradeRequest','error','headers','write','ping','copy','Connection:\x20Upgrade','binary','647270nnHlKw','pingInterval','raise','__awaiter','utf-8','handle','Sec-WebSocket-Accept:\x20','open','push','value','sec-websocket-key','pendingRequests','8vcUeZH','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','decode','disconnect','pong','Received\x20non-standard\x20text\x20message:\x20','1939pNnIaS','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','off','emit','slice','alloc','7446444UtJeei','13938156gOrJtE','socket','1729203JDXSce','send','createHash','crypto','readBigUInt64BE','set','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','closed','done','1083631OpSPmt'];a3_0x234e=function(){return _0x2bb1b6;};return a3_0x234e();}const crypto_1=__importDefault(require(a3_0x119f05(0x172)));class Socket{constructor(_0x32441e){const _0x46463f=a3_0x119f05;this['socket']=_0x32441e,this[_0x46463f(0x17a)]=_0x46463f(0x182),this[_0x46463f(0x1af)]=0x5*0x3e8,this[_0x46463f(0x186)]=0x2*0x3e8,this['pingRequests']={},this[_0x46463f(0x191)]=0x1,this[_0x46463f(0x15f)]={},this['data']={},this[_0x46463f(0x185)]={},this[_0x46463f(0x16e)]['on'](_0x46463f(0x18f),_0x4812c1=>this[_0x46463f(0x1b3)](_0x4812c1)),this[_0x46463f(0x16e)]['on'](_0x46463f(0x1a7),_0x3bcaf2=>this[_0x46463f(0x1b0)]('error',_0x3bcaf2));const _0x48bc4c=this[_0x46463f(0x196)]({'pingInterval':this[_0x46463f(0x1af)]});this[_0x46463f(0x170)](_0x46463f(0x1ad),_0x48bc4c);}[a3_0x119f05(0x163)](){return __awaiter(this,arguments,void 0x0,function*(_0x3faaae=0x3e8,_0x15b84d='',_0x591710=0x1388){return new Promise((_0x3c73f1,_0x2479e3)=>{const _0x3c69a8=a3_0x3737,_0x2fd244=Buffer[_0x3c69a8(0x1a1)](_0x15b84d,'utf-8'),_0x3feb81=Buffer[_0x3c69a8(0x16b)](0x2+_0x2fd244[_0x3c69a8(0x198)]);_0x3feb81[_0x3c69a8(0x188)](_0x3faaae,0x0),_0x2fd244[_0x3c69a8(0x1ab)](_0x3feb81,0x2);const _0x47c45=_0x3feb81[_0x3c69a8(0x198)],_0x3ab6ed=_0x47c45<0x7e?_0x47c45:_0x47c45<0x10000?0x7e:0x7f,_0x582e80=_0x3ab6ed===0x7e?Buffer[_0x3c69a8(0x1a1)]([0x88,0x7e,_0x47c45>>0x8&0xff,_0x47c45&0xff]):_0x3ab6ed===0x7f?Buffer[_0x3c69a8(0x1a1)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x47c45>>0x8&0xff,_0x47c45&0xff]):Buffer[_0x3c69a8(0x1a1)]([0x88,_0x47c45]),_0x4b1237=Buffer[_0x3c69a8(0x1a5)]([_0x582e80,_0x3feb81]);this[_0x3c69a8(0x16e)][_0x3c69a8(0x1a9)](_0x4b1237),this['_status']=_0x3c69a8(0x18b);if(_0x591710===null)this['socket'][_0x3c69a8(0x197)](),this[_0x3c69a8(0x17b)]!==_0x3c69a8(0x176)&&(this['raise'](_0x3c69a8(0x190),{'code':_0x3faaae,'reason':_0x15b84d}),this[_0x3c69a8(0x17a)]=_0x3c69a8(0x176)),_0x3c73f1();else{let _0x2a8de5=!![];this['socket'][_0x3c69a8(0x18c)]('data',_0x42783f=>{const _0x1de533=_0x3c69a8;if(!_0x2a8de5)return;_0x42783f[0x0]===0x88?(this[_0x1de533(0x17a)]='closed',this[_0x1de533(0x16e)]['end'](),this[_0x1de533(0x1b0)](_0x1de533(0x190),{'code':_0x3faaae,'reason':_0x15b84d}),_0x3c73f1()):_0x2479e3(new Error('Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.'));}),setTimeout(()=>{const _0x262633=_0x3c69a8;_0x2a8de5=![],_0x2479e3(new Error(_0x262633(0x175))),this[_0x262633(0x16e)][_0x262633(0x197)]();},_0x591710);}});});}get[a3_0x119f05(0x17b)](){const _0x1e0edf=a3_0x119f05;return this[_0x1e0edf(0x17a)];}[a3_0x119f05(0x170)](_0x250edd,_0x16197b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x491cf2=a3_0x3737;let _0x5f0f01,_0x5a440e;switch(_0x250edd){case _0x491cf2(0x1a0):_0x5f0f01=Buffer['from'](_0x16197b,'utf-8'),_0x5a440e=0x1;break;case'binary':_0x5f0f01=_0x16197b,_0x5a440e=0x2;break;case _0x491cf2(0x1aa):_0x5f0f01=_0x16197b,_0x5a440e=0x9;break;case _0x491cf2(0x164):_0x5f0f01=_0x16197b,_0x5a440e=0xa;break;}const _0x3952c7=[];if(_0x5f0f01[_0x491cf2(0x198)]<0x7e)_0x3952c7['push'](_0x5f0f01[_0x491cf2(0x198)]);else{if(_0x5f0f01[_0x491cf2(0x198)]<0x10000)_0x3952c7[_0x491cf2(0x15c)](0x7e,_0x5f0f01[_0x491cf2(0x198)]>>0x8&0xff,_0x5f0f01['length']&0xff);else{_0x3952c7[_0x491cf2(0x15c)](0x7f);for(let _0x3ddcc9=0x7;_0x3ddcc9>=0x0;_0x3ddcc9--)_0x3952c7[_0x491cf2(0x15c)](_0x5f0f01[_0x491cf2(0x198)]>>_0x3ddcc9*0x8&0xff);}}const _0x5f0679=Buffer[_0x491cf2(0x1a5)]([Buffer[_0x491cf2(0x1a1)]([0x80|_0x5a440e,..._0x3952c7]),_0x5f0f01]);return new Promise((_0xeb4eb1,_0x228d96)=>{const _0x4a40c1=_0x491cf2;this['socket'][_0x4a40c1(0x1a9)](_0x5f0679,undefined,_0x457aa9=>{if(_0x457aa9!=undefined)return _0x228d96(_0x457aa9);_0xeb4eb1();});});});}[a3_0x119f05(0x169)](_0x34ab31,_0x348a8f,_0x35b0a3){return __awaiter(this,arguments,void 0x0,function*(_0x49b72d,_0x38a03e,_0x115c97,_0x389b36=0x5*0x3e8){const _0x42b30d=a3_0x3737;if(this[_0x42b30d(0x16e)]==undefined||this['status']!==_0x42b30d(0x15b))throw new Error('The\x20websocket\x20is\x20not\x20connected');if([_0x42b30d(0x182),_0x42b30d(0x15b),_0x42b30d(0x1a7),_0x42b30d(0x190),'*']['includes'](_0x49b72d))throw new Error(_0x42b30d(0x199));const _0x25f109=new TextEncoder()[_0x42b30d(0x196)](_0x49b72d);if(_0x25f109['length']>0xff)throw new Error(_0x42b30d(0x167));const _0x78cc41=this[_0x42b30d(0x191)];if(_0x115c97!=undefined){this['requestId']=(this[_0x42b30d(0x191)]+0x1)%0x100;const _0x2f75ee=setTimeout(()=>{const _0x40aa0e=_0x42b30d;delete this[_0x40aa0e(0x15f)][_0x78cc41],_0x115c97(new Error(_0x40aa0e(0x189)));},_0x389b36);this[_0x42b30d(0x15f)][_0x78cc41]=_0x1aab5e=>{if(!(_0x1aab5e instanceof Error))clearTimeout(_0x2f75ee);_0x115c97(_0x1aab5e);};}const _0x22538d=this[_0x42b30d(0x196)](_0x38a03e),_0x223100=new Uint8Array(0x2+(_0x115c97==undefined?0x0:0x1)+_0x25f109[_0x42b30d(0x198)]+_0x22538d[_0x42b30d(0x198)]);_0x223100[0x0]=_0x115c97==undefined?0x2:0x3;if(_0x115c97!=undefined)_0x223100[0x1]=_0x78cc41;return _0x223100[0x1+(_0x115c97!=undefined?0x1:0x0)]=_0x25f109[_0x42b30d(0x198)],_0x223100[_0x42b30d(0x174)](_0x25f109,0x2+(_0x115c97!=undefined?0x1:0x0)),_0x223100[_0x42b30d(0x174)](_0x22538d,0x2+(_0x115c97!=undefined?0x1:0x0)+_0x25f109[_0x42b30d(0x198)]),this[_0x42b30d(0x170)](_0x42b30d(0x1ad),_0x223100);});}[a3_0x119f05(0x1b3)](_0x2e508b){const _0x1bf7d7=a3_0x119f05;var _0x591654,_0x34cf9f;const _0x13af9a=_0x2e508b[0x0],_0x49bcce=(_0x13af9a&0x80)!==0x0,_0x406c5e=_0x13af9a&0xf,_0x430c33=_0x2e508b[0x1],_0x4d3c94=(_0x430c33&0x80)!==0x0;let _0x4fa499=_0x430c33&0x7f,_0x11da68=0x2;if(_0x4fa499===0x7e)_0x4fa499=_0x2e508b[_0x1bf7d7(0x181)](_0x11da68),_0x11da68+=0x2;else _0x4fa499===0x7f&&(_0x4fa499=Number(_0x2e508b[_0x1bf7d7(0x173)](_0x11da68)),_0x11da68+=0x8);const _0x4b4b94=_0x4d3c94?_0x2e508b[_0x1bf7d7(0x16a)](_0x11da68,_0x11da68+0x4):Buffer['alloc'](0x0);if(_0x4d3c94)_0x11da68+=0x4;let _0x381261=_0x2e508b[_0x1bf7d7(0x16a)](_0x11da68,_0x11da68+_0x4fa499);if(_0x4d3c94){const _0x11b5d4=Buffer[_0x1bf7d7(0x16b)](_0x381261[_0x1bf7d7(0x198)]);for(let _0x4b4f7e=0x0;_0x4b4f7e<_0x381261[_0x1bf7d7(0x198)];_0x4b4f7e++)_0x11b5d4[_0x4b4f7e]=_0x381261[_0x4b4f7e]^_0x4b4b94[_0x4b4f7e%0x4];_0x381261=_0x11b5d4;}switch(_0x406c5e){case 0x1:this['raise']('error',new Error(_0x1bf7d7(0x165)+_0x381261['toString'](_0x1bf7d7(0x1b2))));break;case 0x2:{if(this['_status']==='handshake'){const _0x2b2da9=this['decode'](_0x381261);this[_0x1bf7d7(0x1b0)](_0x1bf7d7(0x182),_0x2b2da9),this[_0x1bf7d7(0x17a)]=_0x1bf7d7(0x15b),this[_0x1bf7d7(0x170)](_0x1bf7d7(0x1ad),Buffer[_0x1bf7d7(0x16b)](0x0)),this[_0x1bf7d7(0x19b)]();return;}const _0x18d2ec=_0x381261[0x0];switch(_0x18d2ec){case 0x0:{_0x381261[0x0]=0x1,this[_0x1bf7d7(0x170)](_0x1bf7d7(0x1ad),_0x381261);break;}case 0x1:{const _0x19f815=_0x381261[_0x1bf7d7(0x16a)](0x1)[_0x1bf7d7(0x18e)](_0x1bf7d7(0x1b2)),_0x102b4f=this[_0x1bf7d7(0x183)][_0x19f815];if(_0x102b4f==undefined){this[_0x1bf7d7(0x1b0)](_0x1bf7d7(0x1a7),new Error(_0x1bf7d7(0x187)));return;}_0x102b4f();break;}case 0x2:case 0x3:{const _0x22ccba=_0x18d2ec===0x2?Number[_0x1bf7d7(0x19f)]:_0x381261[0x1],_0x2a35f8=_0x18d2ec===0x2?0x0:0x1,_0x2b168d=_0x381261[0x1+_0x2a35f8],_0x1f35ca=new TextDecoder()[_0x1bf7d7(0x162)](_0x381261[_0x1bf7d7(0x16a)](0x2+_0x2a35f8,0x2+_0x2a35f8+_0x2b168d));if([_0x1bf7d7(0x182),_0x1bf7d7(0x15b),_0x1bf7d7(0x1a7),_0x1bf7d7(0x190),'*'][_0x1bf7d7(0x17f)](_0x1f35ca))return;const _0x391f34=this[_0x1bf7d7(0x162)](_0x381261['slice'](0x2+_0x2a35f8+_0x2b168d)),_0x316ee0=(_0x591654=this[_0x1bf7d7(0x185)][_0x1f35ca])!==null&&_0x591654!==void 0x0?_0x591654:[];let _0x2d40c1=![];for(const _0x36f528 of _0x316ee0){const _0x5e1c88=_0x36f528['call'](undefined,_0x391f34);if(!_0x2d40c1&&_0x5e1c88!==undefined&&_0x22ccba!==0x0){_0x2d40c1=!![];const _0x57da1f=Buffer[_0x1bf7d7(0x1a5)]([Buffer[_0x1bf7d7(0x1a1)]([0x4,_0x22ccba]),this[_0x1bf7d7(0x196)](_0x5e1c88)]);this['send'](_0x1bf7d7(0x1ad),_0x57da1f);}}const _0x1b6880=(_0x34cf9f=this[_0x1bf7d7(0x185)]['*'])!==null&&_0x34cf9f!==void 0x0?_0x34cf9f:[];for(const _0x53c1a8 of _0x1b6880)_0x53c1a8[_0x1bf7d7(0x19e)](undefined,_0x1f35ca,_0x391f34);if(!_0x2d40c1&&_0x18d2ec===0x3){}break;}case 0x4:{const _0x22efda=_0x381261[0x1],_0x2d0dd4=this[_0x1bf7d7(0x15f)][_0x22efda];if(_0x2d0dd4==undefined)return;const _0x40684b=this[_0x1bf7d7(0x162)](_0x381261[_0x1bf7d7(0x16a)](0x2));_0x2d0dd4(_0x40684b);break;}}break;}case 0x9:this[_0x1bf7d7(0x170)](_0x1bf7d7(0x164),_0x381261);break;case 0xa:break;case 0x8:if(this[_0x1bf7d7(0x17a)]===_0x1bf7d7(0x18b))return;let _0x270713=0x3e8,_0x5b525d='';_0x381261[_0x1bf7d7(0x198)]>=0x2&&(_0x270713=_0x381261[_0x1bf7d7(0x181)](0x0),_0x5b525d=_0x381261[_0x1bf7d7(0x16a)](0x2)[_0x1bf7d7(0x18e)](_0x1bf7d7(0x1b2)));this['disconnect'](_0x270713,_0x5b525d,null);break;default:this['raise'](_0x1bf7d7(0x1a7),new Error('Received\x20message\x20with\x20unsupported\x20opcode:\x20'+_0x406c5e));}}[a3_0x119f05(0x196)](_0x27fca0){const _0x146fe4=a3_0x119f05;return Buffer[_0x146fe4(0x1a1)](JSON[_0x146fe4(0x1a2)](_0x27fca0),'utf-8');}[a3_0x119f05(0x162)](_0x3e30ea){const _0xaf2989=a3_0x119f05;return JSON['parse'](_0x3e30ea['toString'](_0xaf2989(0x1b2)));}[a3_0x119f05(0x19b)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x1f6dd2,_0x338167)=>{const _0x4395c4=a3_0x3737;if(this[_0x4395c4(0x17a)]!==_0x4395c4(0x15b))return;const _0xdbc08=crypto_1['default']['randomUUID'](),_0x3b429a=setTimeout(()=>{const _0x349262=_0x4395c4;delete this[_0x349262(0x183)][_0xdbc08];if(![_0x349262(0x18b),'closed'][_0x349262(0x17f)](this[_0x349262(0x17b)]))this['disconnect'](0x3e8,'',null);_0x1f6dd2(![]);},this[_0x4395c4(0x186)]);this['pingRequests'][_0xdbc08]=()=>{const _0xa0f6a9=_0x4395c4;delete this['pingRequests'][_0xdbc08],clearTimeout(_0x3b429a),_0x1f6dd2(!![]),setTimeout(()=>{const _0x53edf9=a3_0x3737;if(this[_0x53edf9(0x17a)]!==_0x53edf9(0x15b))return;this['checkHeartbeat']();},this[_0xa0f6a9(0x1af)]);},this[_0x4395c4(0x170)](_0x4395c4(0x1ad),Buffer['concat']([Buffer['from']([0x0]),Buffer[_0x4395c4(0x1a1)](_0xdbc08)]));});});}['on'](_0x10b077,_0x245f9a){const _0x334782=a3_0x119f05;if(this['handlers'][_0x10b077]==undefined)this[_0x334782(0x185)][_0x10b077]=[];this[_0x334782(0x185)][_0x10b077]['push'](_0x245f9a);}[a3_0x119f05(0x168)](_0xfb5df6,_0x31c3ac){const _0x5b8139=a3_0x119f05;if(_0x31c3ac==undefined){this['handlers'][_0xfb5df6]=[];return;}const _0x4d76dd=this[_0x5b8139(0x185)][_0xfb5df6],_0x17d802=(_0x4d76dd!==null&&_0x4d76dd!==void 0x0?_0x4d76dd:[])[_0x5b8139(0x18a)](_0x1f5ba9=>_0x1f5ba9===_0x31c3ac);if(_0x17d802===-0x1)throw new Error('Attempted\x20to\x20remove\x20an\x20handler\x20for\x20'+_0xfb5df6+_0x5b8139(0x161));_0x4d76dd[_0x5b8139(0x19c)](_0x17d802,0x1);}[a3_0x119f05(0x1b0)](_0x313dff,_0x490583){const _0x4749e2=a3_0x119f05;var _0x4fddc9,_0x1a618d;const _0x5afa61=(_0x4fddc9=this[_0x4749e2(0x185)][_0x313dff])!==null&&_0x4fddc9!==void 0x0?_0x4fddc9:[];for(const _0x324573 of _0x5afa61)_0x324573(_0x490583);const _0xef070b=(_0x1a618d=this[_0x4749e2(0x185)]['*'])!==null&&_0x1a618d!==void 0x0?_0x1a618d:[];for(const _0x15ba3c of _0xef070b)_0x15ba3c(_0x313dff,_0x490583);}static[a3_0x119f05(0x1a6)](_0x126f5d,_0x31bb77){const _0x4422fa=a3_0x119f05,_0x58f7e2=_0x126f5d[_0x4422fa(0x1a8)][_0x4422fa(0x15e)];if(_0x58f7e2==undefined)return _0x31bb77['destroy'](),null;const _0x24c3eb=crypto_1[_0x4422fa(0x17d)][_0x4422fa(0x171)](_0x4422fa(0x1a4));_0x24c3eb[_0x4422fa(0x17c)](_0x58f7e2+_0x4422fa(0x179));const _0x5c84ea=_0x24c3eb[_0x4422fa(0x184)]('base64'),_0x5096c5=['HTTP/1.1\x20101\x20Switching\x20Protocols','Upgrade:\x20websocket',_0x4422fa(0x1ac),_0x4422fa(0x15a)+_0x5c84ea];return _0x31bb77[_0x4422fa(0x1a9)](_0x5096c5[_0x4422fa(0x192)]('\x0d\x0a')+'\x0d\x0a\x0d\x0a'),new Socket(_0x31bb77);}}exports['default']=Socket;