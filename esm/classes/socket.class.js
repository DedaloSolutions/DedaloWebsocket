const a11_0x250c3f=a11_0x1de4;function a11_0x1de4(_0x4daf7a,_0x2dbf63){const _0x1faa05=a11_0x1faa();return a11_0x1de4=function(_0x1de4aa,_0xeb9a8d){_0x1de4aa=_0x1de4aa-0x145;let _0x12b255=_0x1faa05[_0x1de4aa];return _0x12b255;},a11_0x1de4(_0x4daf7a,_0x2dbf63);}function a11_0x1faa(){const _0x39985b=['pingInterval','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','Received\x20emit\x20from\x20client\x20for\x20a\x20reserved\x20event:\x20','createHash','closing','throw','713932trLNMe','writeUInt16BE','utf-8','writeUInt8','digest','push','No\x20handler\x20returns\x20a\x20value\x20for\x20event\x20','readUInt8','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','receive','786BbuRNg','concat','headers','33eekmXt','pingId','Received\x20non-standard\x20text\x20message:\x20','1572205MgztYU','10754490wgbaFx','value','stringify','handlers','splice','Received\x20message\x20with\x20unsupported\x20opcode:\x20','requestId','subarray','close','Sec-WebSocket-Accept:\x20','Upgrade:\x20websocket','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','once','pingTimeout','drain','ping','off','pingRequests','encode','The\x20websocket\x20is\x20already\x20disconnected','Connection:\x20Upgrade','decode','error','data','disconnect','18UbIvSD','\x20but\x20to\x20pending\x20request\x20was\x20found','binary','join','67109SiQUXS',',\x20that\x20requires\x20a\x20response.','Received\x20a\x20response\x20for\x20id\x20','1029378QUZtdu','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','sha1','\x0d\x0a\x0d\x0a','socket','__awaiter','237807vqkpAc','apply','text','send','write','toString','destroy','pendingRequests','copy','emit','handshake','then','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','926692hgeolV','findIndex','sec-websocket-key','alloc','344MQbDiB','length','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','readUInt16BE','checkHeartbeat','raise','_status','from','call','next','open','update','slice','pong','The\x20websocket\x20is\x20not\x20connected','closed'];a11_0x1faa=function(){return _0x39985b;};return a11_0x1faa();}(function(_0x336c93,_0x332415){const _0x3a9da2=a11_0x1de4,_0x5076a4=_0x336c93();while(!![]){try{const _0x269646=parseInt(_0x3a9da2(0x183))/0x1+-parseInt(_0x3a9da2(0x196))/0x2+-parseInt(_0x3a9da2(0x17c))/0x3*(parseInt(_0x3a9da2(0x152))/0x4)+parseInt(_0x3a9da2(0x162))/0x5+parseInt(_0x3a9da2(0x15c))/0x6*(-parseInt(_0x3a9da2(0x180))/0x7)+parseInt(_0x3a9da2(0x19a))/0x8*(-parseInt(_0x3a9da2(0x189))/0x9)+-parseInt(_0x3a9da2(0x163))/0xa*(-parseInt(_0x3a9da2(0x15f))/0xb);if(_0x269646===_0x332415)break;else _0x5076a4['push'](_0x5076a4['shift']());}catch(_0x23d5b9){_0x5076a4['push'](_0x5076a4['shift']());}}}(a11_0x1faa,0x9d2fc));var __awaiter=this&&this[a11_0x250c3f(0x188)]||function(_0x4f6887,_0x417123,_0x329f23,_0x431f1a){function _0x22492a(_0x13bd8d){return _0x13bd8d instanceof _0x329f23?_0x13bd8d:new _0x329f23(function(_0x2ef589){_0x2ef589(_0x13bd8d);});}return new(_0x329f23||(_0x329f23=Promise))(function(_0x398fac,_0x575b4e){const _0x42d4b6=a11_0x1de4;function _0x332506(_0x555f93){try{_0xe01925(_0x431f1a['next'](_0x555f93));}catch(_0x12c667){_0x575b4e(_0x12c667);}}function _0x192cef(_0x1d295c){const _0x25d004=a11_0x1de4;try{_0xe01925(_0x431f1a[_0x25d004(0x151)](_0x1d295c));}catch(_0x12a986){_0x575b4e(_0x12a986);}}function _0xe01925(_0x4b0302){const _0x241a09=a11_0x1de4;_0x4b0302['done']?_0x398fac(_0x4b0302[_0x241a09(0x164)]):_0x22492a(_0x4b0302[_0x241a09(0x164)])[_0x241a09(0x194)](_0x332506,_0x192cef);}_0xe01925((_0x431f1a=_0x431f1a[_0x42d4b6(0x18a)](_0x4f6887,_0x417123||[]))[_0x42d4b6(0x145)]());});};import a11_0x25095b from'crypto';export default class Socket{constructor(_0x49a40f){const _0x3c418f=a11_0x250c3f;this[_0x3c418f(0x187)]=_0x49a40f,this['_status']='handshake',this[_0x3c418f(0x14c)]=0x5*0x3e8,this[_0x3c418f(0x170)]=0x2*0x3e8,this[_0x3c418f(0x174)]={},this[_0x3c418f(0x160)]=0x1,this[_0x3c418f(0x169)]=0x1,this['pendingRequests']={},this[_0x3c418f(0x166)]={},this['socket']['on'](_0x3c418f(0x17a),_0x4a8e12=>this['receive'](_0x4a8e12)),this[_0x3c418f(0x187)]['on'](_0x3c418f(0x179),_0x5b1735=>this[_0x3c418f(0x19f)]('error',_0x5b1735)),this[_0x3c418f(0x18c)](_0x3c418f(0x17e),this[_0x3c418f(0x175)]({'pingInterval':this[_0x3c418f(0x14c)]}));}[a11_0x250c3f(0x17b)](){return __awaiter(this,arguments,void 0x0,function*(_0x4bfd1d=0x3e8,_0x1be5c3='',_0x330d53=0x1388){return new Promise((_0x497782,_0x5ca745)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x192c99=a11_0x1de4;if(this[_0x192c99(0x1a0)]===_0x192c99(0x150)||this[_0x192c99(0x1a0)]===_0x192c99(0x14b))return _0x5ca745(new Error(_0x192c99(0x176)));const _0xb21985=Buffer[_0x192c99(0x1a1)](_0x1be5c3,_0x192c99(0x154)),_0x19ba77=Buffer['alloc'](0x2+_0xb21985[_0x192c99(0x19b)]);_0x19ba77[_0x192c99(0x153)](_0x4bfd1d,0x0),_0xb21985[_0x192c99(0x191)](_0x19ba77,0x2);const _0x2b390c=_0x19ba77[_0x192c99(0x19b)],_0x1e2b06=_0x2b390c<0x7e?_0x2b390c:_0x2b390c<0x10000?0x7e:0x7f,_0x4113db=_0x1e2b06===0x7e?Buffer['from']([0x88,0x7e,_0x2b390c>>0x8&0xff,_0x2b390c&0xff]):_0x1e2b06===0x7f?Buffer[_0x192c99(0x1a1)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x2b390c>>0x8&0xff,_0x2b390c&0xff]):Buffer['from']([0x88,_0x2b390c]),_0x1d3038=Buffer[_0x192c99(0x15d)]([_0x4113db,_0x19ba77]);this['socket'][_0x192c99(0x18d)](_0x1d3038),this[_0x192c99(0x1a0)]=_0x192c99(0x150),this['socket'][_0x192c99(0x16f)]('data',_0x17860d=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x46c18a=_0x192c99;if(this[_0x46c18a(0x1a0)]===_0x46c18a(0x14b))return;_0x17860d[0x0]===0x88?(this[_0x46c18a(0x16b)](_0x4bfd1d,_0x1be5c3),_0x497782()):_0x5ca745(new Error(_0x46c18a(0x14d)));})),_0x330d53>0x0?setTimeout(()=>{const _0x3c7624=_0x192c99;this[_0x3c7624(0x16b)](_0x4bfd1d,_0x1be5c3),_0x5ca745(new Error(_0x3c7624(0x19c)));},_0x330d53):(this['close'](_0x4bfd1d,_0x1be5c3),_0x497782());}));});}['close'](){return __awaiter(this,arguments,void 0x0,function*(_0x126f94=0x3e8,_0x59430b=''){const _0x59b16e=a11_0x1de4;if(this[_0x59b16e(0x1a0)]===_0x59b16e(0x14b))return;this[_0x59b16e(0x1a0)]='closed',yield new Promise(_0x22f127=>this[_0x59b16e(0x187)]['end'](()=>_0x22f127())),this['raise'](_0x59b16e(0x16b),{'code':_0x126f94,'reason':_0x59430b});});}get['status'](){return this['_status'];}[a11_0x250c3f(0x19e)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x383475,_0xe9ef5f)=>{const _0x39ab87=a11_0x1de4;if(this['_status']!==_0x39ab87(0x146))return;const _0x51f695=this['pingId'];this[_0x39ab87(0x160)]=(this[_0x39ab87(0x160)]+0x1)%0x100;const _0x429d5f=setTimeout(()=>{const _0x4485f4=_0x39ab87;delete this[_0x4485f4(0x174)][_0x51f695],this[_0x4485f4(0x16b)](),_0x383475(![]);},this[_0x39ab87(0x170)]);this[_0x39ab87(0x174)][_0x51f695]=()=>{const _0x211d82=_0x39ab87;delete this[_0x211d82(0x174)][_0x51f695],clearTimeout(_0x429d5f),_0x383475(!![]),setTimeout(()=>{const _0x180e31=_0x211d82;if(this['_status']!=='open')return;this[_0x180e31(0x19e)]();},this[_0x211d82(0x14c)]);};const _0x28950d=Buffer['alloc'](0x2);_0x28950d[_0x39ab87(0x155)](0x0,0x0),_0x28950d[_0x39ab87(0x155)](_0x51f695,0x1),this['send'](_0x39ab87(0x17e),_0x28950d);});});}[a11_0x250c3f(0x15b)](_0xb9b602){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x57b75a=a11_0x1de4;var _0x272d9f;if(this['_status']==='closed')return;const _0x29749e=_0xb9b602[0x0],_0x39e68c=(_0x29749e&0x80)!==0x0,_0xe5a65d=_0x29749e&0xf,_0x52cd30=_0xb9b602[0x1],_0x21ad40=(_0x52cd30&0x80)!==0x0;let _0x3ecf02=_0x52cd30&0x7f,_0x36c12c=0x2;if(_0x3ecf02===0x7e)_0x3ecf02=_0xb9b602[_0x57b75a(0x19d)](_0x36c12c),_0x36c12c+=0x2;else _0x3ecf02===0x7f&&(_0x3ecf02=Number(_0xb9b602['readBigUInt64BE'](_0x36c12c)),_0x36c12c+=0x8);const _0x3846a8=_0x21ad40?_0xb9b602[_0x57b75a(0x16a)](_0x36c12c,_0x36c12c+0x4):Buffer['alloc'](0x0);if(_0x21ad40)_0x36c12c+=0x4;let _0x37e181=_0xb9b602[_0x57b75a(0x16a)](_0x36c12c,_0x36c12c+_0x3ecf02);if(_0x21ad40){const _0x35917b=Buffer[_0x57b75a(0x199)](_0x37e181[_0x57b75a(0x19b)]);for(let _0x50dc0d=0x0;_0x50dc0d<_0x37e181[_0x57b75a(0x19b)];_0x50dc0d++)_0x35917b[_0x50dc0d]=_0x37e181[_0x50dc0d]^_0x3846a8[_0x50dc0d%0x4];_0x37e181=_0x35917b;}switch(_0xe5a65d){case 0x1:this['raise'](_0x57b75a(0x179),new Error(_0x57b75a(0x161)+_0x37e181['toString'](_0x57b75a(0x154))));break;case 0x2:{if(this[_0x57b75a(0x1a0)]==='handshake'){const _0x3fdf7b=this[_0x57b75a(0x178)](_0x37e181);this[_0x57b75a(0x19f)]('handshake',_0x3fdf7b),this[_0x57b75a(0x193)]=_0x3fdf7b,this[_0x57b75a(0x1a0)]=_0x57b75a(0x146),this[_0x57b75a(0x19e)]();return;}const _0xc04f1f=_0x37e181[_0x57b75a(0x159)](0x0);switch(_0xc04f1f){case 0x0:{const _0x1af077=_0x37e181[_0x57b75a(0x16a)](0x1),_0x26e02c=Buffer['alloc'](0x1+_0x1af077[_0x57b75a(0x19b)]);_0x26e02c[_0x57b75a(0x155)](0x1,0x0),_0x1af077['copy'](_0x26e02c,0x1),this[_0x57b75a(0x18c)]('binary',_0x26e02c);break;}case 0x1:{const _0x75b78a=_0x37e181['readUInt8'](0x1),_0x1c7487=this['pingRequests'][_0x75b78a];if(_0x1c7487==undefined){this['raise'](_0x57b75a(0x179),new Error(_0x57b75a(0x195)));break;}_0x1c7487();break;}case 0x2:{const _0x40cbf8=_0x37e181[_0x57b75a(0x159)](0x1),_0x5b69c7=_0x37e181[_0x57b75a(0x159)](0x2),_0x12f32d=_0x37e181[_0x57b75a(0x16a)](0x3,0x3+_0x5b69c7)[_0x57b75a(0x18e)](_0x57b75a(0x154));if([_0x57b75a(0x193),'open','error','close','*']['includes'](_0x12f32d)){this[_0x57b75a(0x19f)](_0x57b75a(0x179),new Error(_0x57b75a(0x14e)+_0x12f32d));break;}const _0x44a8ac=_0x37e181['subarray'](0x3+_0x5b69c7),_0x39cfea=this['decode'](_0x44a8ac),_0x3b2c68=(_0x272d9f=this[_0x57b75a(0x166)][_0x12f32d])!==null&&_0x272d9f!==void 0x0?_0x272d9f:[];let _0x1582e2;for(const _0x5ddd4c of _0x3b2c68){const _0xaaf9e=yield _0x5ddd4c['call'](undefined,_0x39cfea);if(_0x1582e2===undefined)_0x1582e2=_0xaaf9e;}if(_0x40cbf8!==0x0){if(_0x1582e2===undefined)this[_0x57b75a(0x19f)](_0x57b75a(0x179),new Error(_0x57b75a(0x158)+_0x12f32d+_0x57b75a(0x181)));const _0x3bf8dc=this[_0x57b75a(0x175)](_0x1582e2!==null&&_0x1582e2!==void 0x0?_0x1582e2:null),_0x1792ce=Buffer[_0x57b75a(0x199)](0x2+_0x3bf8dc[_0x57b75a(0x19b)]);_0x1792ce[_0x57b75a(0x155)](0x3,0x0),_0x1792ce[_0x57b75a(0x155)](_0x40cbf8,0x1),_0x3bf8dc['copy'](_0x1792ce,0x2),yield this[_0x57b75a(0x18c)]('binary',_0x1792ce);}break;}case 0x3:{const _0x2a216f=_0x37e181[_0x57b75a(0x159)](0x1),_0x52d355=this[_0x57b75a(0x190)][_0x2a216f];if(_0x52d355==undefined){this[_0x57b75a(0x19f)](_0x57b75a(0x179),new Error(_0x57b75a(0x182)+_0x2a216f+_0x57b75a(0x17d)));break;}const _0x399592=this[_0x57b75a(0x178)](_0x37e181[_0x57b75a(0x16a)](0x2));_0x52d355(_0x399592);break;}}break;}case 0x9:{this['send'](_0x57b75a(0x149),_0x37e181);break;}case 0xa:{break;}case 0x8:{if(this[_0x57b75a(0x1a0)]===_0x57b75a(0x150))return;let _0x3fde26=0x3e8,_0x40bee2='';_0x37e181[_0x57b75a(0x19b)]>=0x2&&(_0x3fde26=_0x37e181['readUInt16BE'](0x0),_0x40bee2=_0x37e181[_0x57b75a(0x148)](0x2)[_0x57b75a(0x18e)]('utf-8'));this[_0x57b75a(0x17b)](_0x3fde26,_0x40bee2,0x0);break;}default:this[_0x57b75a(0x19f)](_0x57b75a(0x179),new Error(_0x57b75a(0x168)+_0xe5a65d));}if(_0xb9b602[_0x57b75a(0x19b)]>_0x36c12c+_0x3ecf02)this[_0x57b75a(0x15b)](_0xb9b602['subarray'](_0x36c12c+_0x3ecf02));});}[a11_0x250c3f(0x18c)](_0x4adcf3,_0x35d885){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5c1ae3=a11_0x1de4;let _0x3fbddc,_0x328684;switch(_0x4adcf3){case _0x5c1ae3(0x18b):_0x3fbddc=Buffer[_0x5c1ae3(0x1a1)](_0x35d885,_0x5c1ae3(0x154)),_0x328684=0x1;break;case _0x5c1ae3(0x17e):_0x3fbddc=_0x35d885,_0x328684=0x2;break;case _0x5c1ae3(0x172):_0x3fbddc=_0x35d885,_0x328684=0x9;break;case'pong':_0x3fbddc=_0x35d885,_0x328684=0xa;break;}const _0x3a73c6=[];if(_0x3fbddc[_0x5c1ae3(0x19b)]<0x7e)_0x3a73c6['push'](_0x3fbddc[_0x5c1ae3(0x19b)]);else{if(_0x3fbddc[_0x5c1ae3(0x19b)]<0x10000)_0x3a73c6[_0x5c1ae3(0x157)](0x7e,_0x3fbddc['length']>>0x8&0xff,_0x3fbddc[_0x5c1ae3(0x19b)]&0xff);else{_0x3a73c6[_0x5c1ae3(0x157)](0x7f);for(let _0x383c1d=0x7;_0x383c1d>=0x0;_0x383c1d--)_0x3a73c6[_0x5c1ae3(0x157)](_0x3fbddc[_0x5c1ae3(0x19b)]>>_0x383c1d*0x8&0xff);}}const _0x39db4c=Buffer[_0x5c1ae3(0x15d)]([Buffer[_0x5c1ae3(0x1a1)]([0x80|_0x328684,..._0x3a73c6]),_0x3fbddc]);return new Promise((_0x36fdb3,_0x35d09b)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x1d38af=_0x5c1ae3,_0x599f4e=this[_0x1d38af(0x187)][_0x1d38af(0x18d)](_0x39db4c,undefined,_0x5b4ec2=>{if(_0x5b4ec2==undefined)return;_0x35d09b(_0x5b4ec2);});if(!_0x599f4e)yield new Promise(_0x36f7e6=>this[_0x1d38af(0x187)]['once'](_0x1d38af(0x171),_0x36f7e6));_0x36fdb3();}));});}[a11_0x250c3f(0x175)](_0x138712){const _0x20de96=a11_0x250c3f;return Buffer['from'](JSON[_0x20de96(0x165)](_0x138712),_0x20de96(0x154));}[a11_0x250c3f(0x178)](_0x363e3b){return JSON['parse'](_0x363e3b['toString']('utf-8'));}[a11_0x250c3f(0x192)](_0x2fa72b,_0x4a454a,_0x56faff){return __awaiter(this,arguments,void 0x0,function*(_0x3c01fd,_0x361e7d,_0x14a0d7,_0x2dd971=0x5*0x3e8){const _0x2dd5fd=a11_0x1de4;if(this['socket']==undefined||this['status']!=='open')throw new Error(_0x2dd5fd(0x14a));if([_0x2dd5fd(0x193),_0x2dd5fd(0x146),'error',_0x2dd5fd(0x16b),'*']['includes'](_0x3c01fd))throw new Error(_0x2dd5fd(0x184));const _0x4fe211=Buffer[_0x2dd5fd(0x1a1)](_0x3c01fd,_0x2dd5fd(0x154));if(_0x4fe211[_0x2dd5fd(0x19b)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');const _0x38b62f=_0x14a0d7==undefined?0x0:this[_0x2dd5fd(0x169)];if(_0x14a0d7!=undefined){this[_0x2dd5fd(0x169)]=(this[_0x2dd5fd(0x169)]+0x1)%0x100||0x1;const _0x407455=setTimeout(()=>{const _0xab9664=_0x2dd5fd;delete this[_0xab9664(0x190)][_0x38b62f],_0x14a0d7[_0xab9664(0x1a2)](undefined,new Error('Timeout'));},_0x2dd971);this[_0x2dd5fd(0x190)][_0x38b62f]=_0x5e34a8=>{const _0x54717e=_0x2dd5fd;clearTimeout(_0x407455),_0x14a0d7[_0x54717e(0x1a2)](undefined,_0x5e34a8);};}const _0x429c81=this[_0x2dd5fd(0x175)](_0x361e7d),_0x2a9f79=Buffer[_0x2dd5fd(0x199)](0x3+_0x4fe211['length']+_0x429c81[_0x2dd5fd(0x19b)]);return _0x2a9f79[_0x2dd5fd(0x155)](0x2,0x0),_0x2a9f79[_0x2dd5fd(0x155)](_0x38b62f,0x1),_0x2a9f79['writeUInt8'](_0x4fe211['length'],0x2),_0x4fe211[_0x2dd5fd(0x191)](_0x2a9f79,0x3),_0x429c81['copy'](_0x2a9f79,0x3+_0x4fe211[_0x2dd5fd(0x19b)]),this['send'](_0x2dd5fd(0x17e),_0x2a9f79);});}['on'](_0x6147d8,_0x2854e6){const _0x1a26d3=a11_0x250c3f;if(this[_0x1a26d3(0x166)][_0x6147d8]==undefined)this[_0x1a26d3(0x166)][_0x6147d8]=[];this['handlers'][_0x6147d8]['push'](_0x2854e6);}[a11_0x250c3f(0x173)](_0x4f075b,_0x4233eb){const _0x16ee08=a11_0x250c3f;if(_0x4233eb==undefined){this[_0x16ee08(0x166)][_0x4f075b]=[];return;}const _0x165c54=this[_0x16ee08(0x166)][_0x4f075b],_0x106ada=(_0x165c54!==null&&_0x165c54!==void 0x0?_0x165c54:[])[_0x16ee08(0x197)](_0x74c17=>_0x74c17===_0x4233eb);if(_0x106ada===-0x1)throw new Error(_0x16ee08(0x15a)+_0x4f075b+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x165c54[_0x16ee08(0x167)](_0x106ada,0x1);}['raise'](_0x4f9588,_0x18b455){const _0x218674=a11_0x250c3f;var _0xb45600;const _0x330b30=(_0xb45600=this[_0x218674(0x166)][_0x4f9588])!==null&&_0xb45600!==void 0x0?_0xb45600:[];for(const _0x375018 of _0x330b30)_0x375018(_0x18b455);}static['fromUpgradeRequest'](_0x6b6b2b,_0x108ba0){const _0x1b85b9=a11_0x250c3f,_0x5747c8=_0x6b6b2b[_0x1b85b9(0x15e)][_0x1b85b9(0x198)];if(_0x5747c8==undefined)return _0x108ba0[_0x1b85b9(0x18f)](),null;const _0x22e2ad=a11_0x25095b[_0x1b85b9(0x14f)](_0x1b85b9(0x185))[_0x1b85b9(0x147)](_0x5747c8+_0x1b85b9(0x16e))[_0x1b85b9(0x156)]('base64'),_0x259128=['HTTP/1.1\x20101\x20Switching\x20Protocols',_0x1b85b9(0x16d),_0x1b85b9(0x177),_0x1b85b9(0x16c)+_0x22e2ad];return _0x108ba0[_0x1b85b9(0x18d)](_0x259128[_0x1b85b9(0x17f)]('\x0d\x0a')+_0x1b85b9(0x186)),new Socket(_0x108ba0);}}