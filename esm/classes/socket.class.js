const a9_0x34b303=a9_0x4ac3;function a9_0x4ac3(_0x19cb25,_0x4ef0ef){const _0x7b66eb=a9_0x7b66();return a9_0x4ac3=function(_0x4ac3c4,_0x307552){_0x4ac3c4=_0x4ac3c4-0x1be;let _0x4799c6=_0x7b66eb[_0x4ac3c4];return _0x4799c6;},a9_0x4ac3(_0x19cb25,_0x4ef0ef);}function a9_0x7b66(){const _0x37eb18=['Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','HTTP/1.1\x20101\x20Switching\x20Protocols','error','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','join','push','text','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','311lbIoWa','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','3764849NHjKVJ','includes','value','disconnect','38chduyh','base64','decode','The\x20websocket\x20is\x20not\x20connected','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','15363yOlhXb','checkHeartbeat','readUInt8','requestId','length','utf-8','__awaiter','Timeout','raise','readBigUInt64BE','copy','closing','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','Received\x20non-standard\x20text\x20message:\x20','once','randomUUID','ping','closed','Upgrade:\x20websocket','slice','then','pendingRequests','12TydDOJ','data','encode','24798MjYUcP','367905hhBGda','socket','createHash','alloc','writeUInt16BE','status','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','next','throw','35UJEgBF','concat','handle','close','handlers','pingRequests','handshake','update','782470zAqxHB','toString','3233350GHYFkQ','headers','binary','4LiFMJy','call','\x20but\x20no\x20handler\x20return\x20a\x20result','splice','write','pingTimeout','readUInt16BE','Received\x20a\x20request\x20with\x20eventName\x20','findIndex','end','pingInterval','Sec-WebSocket-Accept:\x20','from','send','pong','920HvrZlR','open'];a9_0x7b66=function(){return _0x37eb18;};return a9_0x7b66();}(function(_0x30f540,_0x25379d){const _0x2f7265=a9_0x4ac3,_0x55d1a6=_0x30f540();while(!![]){try{const _0x5a30f5=parseInt(_0x2f7265(0x1e1))/0x1*(parseInt(_0x2f7265(0x1e7))/0x2)+parseInt(_0x2f7265(0x206))/0x3*(parseInt(_0x2f7265(0x1c8))/0x4)+-parseInt(_0x2f7265(0x1c3))/0x5+-parseInt(_0x2f7265(0x205))/0x6*(parseInt(_0x2f7265(0x20f))/0x7)+parseInt(_0x2f7265(0x1d7))/0x8*(parseInt(_0x2f7265(0x1ec))/0x9)+-parseInt(_0x2f7265(0x1c5))/0xa+-parseInt(_0x2f7265(0x1e3))/0xb*(-parseInt(_0x2f7265(0x202))/0xc);if(_0x5a30f5===_0x25379d)break;else _0x55d1a6['push'](_0x55d1a6['shift']());}catch(_0x5ce43b){_0x55d1a6['push'](_0x55d1a6['shift']());}}}(a9_0x7b66,0x28ad6));var __awaiter=this&&this[a9_0x34b303(0x1f2)]||function(_0x162e92,_0x9c6cf1,_0x4389b8,_0x1aebea){function _0x282c21(_0x1033ba){return _0x1033ba instanceof _0x4389b8?_0x1033ba:new _0x4389b8(function(_0x2b92e6){_0x2b92e6(_0x1033ba);});}return new(_0x4389b8||(_0x4389b8=Promise))(function(_0x5b5737,_0x495966){const _0x4c2bb1=a9_0x4ac3;function _0x26aa92(_0x336f1f){const _0x4f8478=a9_0x4ac3;try{_0x4f05ec(_0x1aebea[_0x4f8478(0x20d)](_0x336f1f));}catch(_0x1fd81e){_0x495966(_0x1fd81e);}}function _0x382981(_0x536a57){const _0x35363f=a9_0x4ac3;try{_0x4f05ec(_0x1aebea[_0x35363f(0x20e)](_0x536a57));}catch(_0x533e05){_0x495966(_0x533e05);}}function _0x4f05ec(_0x56145e){const _0x4650c7=a9_0x4ac3;_0x56145e['done']?_0x5b5737(_0x56145e['value']):_0x282c21(_0x56145e[_0x4650c7(0x1e5)])[_0x4650c7(0x200)](_0x26aa92,_0x382981);}_0x4f05ec((_0x1aebea=_0x1aebea['apply'](_0x162e92,_0x9c6cf1||[]))[_0x4c2bb1(0x20d)]());});};import a9_0x4e3c90 from'crypto';export default class Socket{constructor(_0x2e861d){const _0x14d70b=a9_0x34b303;this[_0x14d70b(0x207)]=_0x2e861d,this['status']=_0x14d70b(0x1c1),this[_0x14d70b(0x1d2)]=0x5*0x3e8,this[_0x14d70b(0x1cd)]=0x2*0x3e8,this[_0x14d70b(0x1c0)]={},this[_0x14d70b(0x1ef)]=0x1,this[_0x14d70b(0x201)]={},this[_0x14d70b(0x203)]={},this[_0x14d70b(0x1bf)]={},this[_0x14d70b(0x207)]['on'](_0x14d70b(0x203),_0x1454e9=>this[_0x14d70b(0x211)](_0x1454e9)),this[_0x14d70b(0x207)]['on']('error',_0x589652=>this[_0x14d70b(0x1f4)](_0x14d70b(0x1db),_0x589652)),this[_0x14d70b(0x207)]['on'](_0x14d70b(0x1be),()=>{}),this['checkHeartbeat']();const _0x241651=this['encode']({'pingInterval':this[_0x14d70b(0x1d2)]});this[_0x14d70b(0x1d5)](_0x14d70b(0x1c7),_0x241651);}['disconnect'](){return __awaiter(this,arguments,void 0x0,function*(_0x258415=0x3e8,_0xb1734d='',_0x4b264a=0x1388){return new Promise((_0x5c0da9,_0x5e7f0f)=>{const _0x2075ef=a9_0x4ac3,_0x492df0=Buffer['from'](_0xb1734d,_0x2075ef(0x1f1)),_0xb72691=Buffer[_0x2075ef(0x209)](0x2+_0x492df0[_0x2075ef(0x1f0)]);_0xb72691[_0x2075ef(0x20a)](_0x258415,0x0),_0x492df0[_0x2075ef(0x1f6)](_0xb72691,0x2);const _0x4a7e15=_0xb72691['length'],_0x4d16ca=_0x4a7e15<0x7e?_0x4a7e15:_0x4a7e15<0x10000?0x7e:0x7f,_0xa6ac45=_0x4d16ca===0x7e?Buffer[_0x2075ef(0x1d4)]([0x88,0x7e,_0x4a7e15>>0x8&0xff,_0x4a7e15&0xff]):_0x4d16ca===0x7f?Buffer[_0x2075ef(0x1d4)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x4a7e15>>0x8&0xff,_0x4a7e15&0xff]):Buffer[_0x2075ef(0x1d4)]([0x88,_0x4a7e15]),_0xad7d7c=Buffer[_0x2075ef(0x210)]([_0xa6ac45,_0xb72691]);this[_0x2075ef(0x207)][_0x2075ef(0x1cc)](_0xad7d7c),this[_0x2075ef(0x20b)]=_0x2075ef(0x1f7);if(_0x4b264a===null)this[_0x2075ef(0x20b)]=_0x2075ef(0x1fd),this[_0x2075ef(0x207)][_0x2075ef(0x1d1)](),this['raise']('close',{'code':_0x258415,'reason':_0xb1734d}),_0x5c0da9();else{let _0x193df9=!![];this[_0x2075ef(0x207)][_0x2075ef(0x1fa)](_0x2075ef(0x203),_0x38ae7a=>{const _0x59760e=_0x2075ef;if(!_0x193df9)return;_0x38ae7a[0x0]===0x88?(this[_0x59760e(0x20b)]=_0x59760e(0x1fd),this[_0x59760e(0x207)][_0x59760e(0x1d1)](),this[_0x59760e(0x1f4)](_0x59760e(0x1be),{'code':_0x258415,'reason':_0xb1734d}),_0x5c0da9()):_0x5e7f0f(new Error(_0x59760e(0x20c)));}),setTimeout(()=>{const _0x80e6ce=_0x2075ef;_0x193df9=![],_0x5e7f0f(new Error('Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.')),this[_0x80e6ce(0x207)][_0x80e6ce(0x1d1)]();},_0x4b264a);}});});}[a9_0x34b303(0x1d5)](_0x27a94e,_0x28652f){const _0x257ac3=a9_0x34b303;let _0x595892,_0x5bcfd8;switch(_0x27a94e){case _0x257ac3(0x1df):_0x595892=Buffer['from'](_0x28652f,_0x257ac3(0x1f1)),_0x5bcfd8=0x1;break;case _0x257ac3(0x1c7):_0x595892=_0x28652f,_0x5bcfd8=0x2;break;case _0x257ac3(0x1fc):_0x595892=_0x28652f,_0x5bcfd8=0x9;break;case'pong':_0x595892=_0x28652f,_0x5bcfd8=0xa;break;}const _0x1e5d8a=[];if(_0x595892[_0x257ac3(0x1f0)]<0x7e)_0x1e5d8a[_0x257ac3(0x1de)](_0x595892[_0x257ac3(0x1f0)]);else{if(_0x595892[_0x257ac3(0x1f0)]<0x10000)_0x1e5d8a[_0x257ac3(0x1de)](0x7e,_0x595892[_0x257ac3(0x1f0)]>>0x8&0xff,_0x595892[_0x257ac3(0x1f0)]&0xff);else{_0x1e5d8a[_0x257ac3(0x1de)](0x7f);for(let _0x2e5ffe=0x7;_0x2e5ffe>=0x0;_0x2e5ffe--)_0x1e5d8a[_0x257ac3(0x1de)](_0x595892[_0x257ac3(0x1f0)]>>_0x2e5ffe*0x8&0xff);}}const _0x45f87d=Buffer['concat']([Buffer[_0x257ac3(0x1d4)]([0x80|_0x5bcfd8,..._0x1e5d8a]),_0x595892]);this[_0x257ac3(0x207)][_0x257ac3(0x1cc)](_0x45f87d);}['emit'](_0xa5c861,_0x199601,_0x5891fb,_0x55f877=0x32*0x3e8){const _0x54c064=a9_0x34b303;if(this[_0x54c064(0x207)]==undefined||this['status']!==_0x54c064(0x1d8))throw new Error(_0x54c064(0x1ea));if([_0x54c064(0x1c1),_0x54c064(0x1d8),_0x54c064(0x1db),'close']['includes'](_0xa5c861))throw new Error(_0x54c064(0x1d9));const _0xc560fc=_0x5891fb==undefined?0x0:this[_0x54c064(0x1ef)],_0x1e2371=Buffer[_0x54c064(0x1d4)](_0xa5c861,_0x54c064(0x1f1));if(_0x1e2371[_0x54c064(0x1f0)]>0xff)throw new Error(_0x54c064(0x1e0));if(_0x5891fb!=undefined){this[_0x54c064(0x1ef)]=(this[_0x54c064(0x1ef)]+0x1)%0x80||0x1;const _0x4f1366=setTimeout(()=>{const _0x326b5a=_0x54c064;delete this[_0x326b5a(0x201)][_0xc560fc],_0x5891fb(new Error(_0x326b5a(0x1f3)));},_0x55f877);this[_0x54c064(0x201)][_0xc560fc]=_0x2feb23=>{if(!(_0x2feb23 instanceof Error))clearTimeout(_0x4f1366);_0x5891fb(_0x2feb23);};}const _0xaecb88=Buffer['concat']([Buffer['from']([_0xc560fc|0x80,_0x1e2371[_0x54c064(0x1f0)]]),_0x1e2371,this[_0x54c064(0x204)](_0x199601)]);this[_0x54c064(0x1d5)](_0x54c064(0x1c7),_0xaecb88);}[a9_0x34b303(0x211)](_0x33de8d){const _0x19eb57=a9_0x34b303;var _0x4bfddc;const _0xd511f2=_0x33de8d[0x0],_0x58075f=(_0xd511f2&0x80)!==0x0,_0x3b30a7=_0xd511f2&0xf,_0x51f329=_0x33de8d[0x1],_0x59c5ee=(_0x51f329&0x80)!==0x0;let _0x9a4777=_0x51f329&0x7f,_0x425964=0x2;if(_0x9a4777===0x7e)_0x9a4777=_0x33de8d['readUInt16BE'](_0x425964),_0x425964+=0x2;else _0x9a4777===0x7f&&(_0x9a4777=Number(_0x33de8d[_0x19eb57(0x1f5)](_0x425964)),_0x425964+=0x8);const _0x51e199=_0x59c5ee?_0x33de8d['slice'](_0x425964,_0x425964+0x4):Buffer[_0x19eb57(0x209)](0x0);if(_0x59c5ee)_0x425964+=0x4;let _0x4179ae=_0x33de8d[_0x19eb57(0x1ff)](_0x425964,_0x425964+_0x9a4777);if(_0x59c5ee){const _0x3366ab=Buffer[_0x19eb57(0x209)](_0x4179ae[_0x19eb57(0x1f0)]);for(let _0x19b3e2=0x0;_0x19b3e2<_0x4179ae['length'];_0x19b3e2++)_0x3366ab[_0x19b3e2]=_0x4179ae[_0x19b3e2]^_0x51e199[_0x19b3e2%0x4];_0x4179ae=_0x3366ab;}switch(_0x3b30a7){case 0x1:this['raise']('error',new Error(_0x19eb57(0x1f9)+_0x4179ae[_0x19eb57(0x1c4)](_0x19eb57(0x1f1))));break;case 0x2:{if(this['status']==='handshake'){const _0x32a1e0=this[_0x19eb57(0x1e9)](_0x4179ae);this['raise']('handshake',_0x32a1e0),this['status']=_0x19eb57(0x1d8),this[_0x19eb57(0x1d5)](_0x19eb57(0x1c7),Buffer['alloc'](0x0));return;}const _0x23fd41=_0x4179ae[_0x19eb57(0x1ee)](0x0),_0x493013=_0x23fd41&0x7f,_0xe5b078=(_0x23fd41&0x80)!==0x0;if(_0xe5b078){const _0x20b691=_0x4179ae[_0x19eb57(0x1ee)](0x1),_0x1aa0d4=_0x4179ae['slice'](0x2,0x2+_0x20b691)[_0x19eb57(0x1c4)](_0x19eb57(0x1f1));if([_0x19eb57(0x1c1),'open',_0x19eb57(0x1db),_0x19eb57(0x1be)][_0x19eb57(0x1e4)](_0x1aa0d4)){this['raise'](_0x19eb57(0x1db),new Error(_0x19eb57(0x1cf)+_0x1aa0d4+';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?'));return;}const _0x44c622=this[_0x19eb57(0x1e9)](_0x4179ae['slice'](0x2+_0x20b691)),_0x797ca9=(_0x4bfddc=this[_0x19eb57(0x1bf)][_0x1aa0d4])!==null&&_0x4bfddc!==void 0x0?_0x4bfddc:[];let _0x36f72b=![];for(const _0x19e52b of _0x797ca9){const _0x4c7a10=_0x19e52b[_0x19eb57(0x1c9)](undefined,_0x44c622);if(!_0x36f72b&&_0x4c7a10!==undefined&&_0x493013!==0x0){_0x36f72b=!![];const _0x5680a0=Buffer['concat']([Buffer['from']([_0x493013&0x7f]),this[_0x19eb57(0x204)](_0x4c7a10)]);this['send'](_0x19eb57(0x1c7),_0x5680a0);}}if(!_0x36f72b&&_0x493013!==0x0)this[_0x19eb57(0x1f4)](_0x19eb57(0x1db),new Error(_0x19eb57(0x1dc)+_0x1aa0d4+_0x19eb57(0x1ca)));return;}const _0x2cbeff=this[_0x19eb57(0x201)][_0x493013];if(_0x2cbeff==undefined){this[_0x19eb57(0x1f4)](_0x19eb57(0x1db),new Error('Received\x20a\x20response\x20for\x20the\x20id\x20'+_0x493013+'\x20but\x20no\x20pending\x20request\x20was\x20found'));return;}const _0x4c48a7=this[_0x19eb57(0x1e9)](_0x4179ae[_0x19eb57(0x1ff)](0x1));_0x2cbeff[_0x19eb57(0x1c9)](undefined,_0x4c48a7);break;}case 0x9:this[_0x19eb57(0x1d5)](_0x19eb57(0x1d6),_0x4179ae);break;case 0xa:const _0x53d9f6=_0x4179ae[_0x19eb57(0x1c4)](_0x19eb57(0x1f1)),_0x510fc2=this[_0x19eb57(0x1c0)][_0x53d9f6];if(_0x510fc2==undefined){this['raise']('error',new Error(_0x19eb57(0x1eb)));return;}_0x510fc2();break;case 0x8:if(this[_0x19eb57(0x20b)]===_0x19eb57(0x1f7))return;let _0x551180=0x3e8,_0x1aac85='';_0x4179ae['length']>=0x2&&(_0x551180=_0x4179ae[_0x19eb57(0x1ce)](0x0),_0x1aac85=_0x4179ae[_0x19eb57(0x1ff)](0x2)[_0x19eb57(0x1c4)](_0x19eb57(0x1f1)));this['disconnect'](_0x551180,_0x1aac85,null);break;default:this[_0x19eb57(0x1f4)](_0x19eb57(0x1db),new Error('Received\x20message\x20with\x20unsupported\x20opcode:\x20'+_0x3b30a7));}}[a9_0x34b303(0x204)](_0x2e7034){const _0x346e81=a9_0x34b303;return Buffer[_0x346e81(0x1d4)](JSON['stringify'](_0x2e7034),_0x346e81(0x1f1));}['decode'](_0x512f27){const _0x4b2950=a9_0x34b303;return JSON['parse'](_0x512f27[_0x4b2950(0x1c4)](_0x4b2950(0x1f1)));}[a9_0x34b303(0x1ed)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x55c418,_0x3a0fd9)=>{const _0xc3bc32=a9_0x4ac3,_0x2d2079=a9_0x4e3c90[_0xc3bc32(0x1fb)](),_0x14758b=setTimeout(()=>{const _0x1ddf06=_0xc3bc32;delete this['pingRequests'][_0x2d2079],this[_0x1ddf06(0x1e6)](0x3e8,'',null),_0x55c418(![]);},this['pingTimeout']);this[_0xc3bc32(0x1c0)][_0x2d2079]=()=>{const _0x2dd606=_0xc3bc32;delete this[_0x2dd606(0x1c0)][_0x2d2079],clearTimeout(_0x14758b),_0x55c418(!![]),setTimeout(()=>{const _0x4f8894=_0x2dd606;if(this['status']!==_0x4f8894(0x1d8))return;this[_0x4f8894(0x1ed)]();},this[_0x2dd606(0x1d2)]);},this[_0xc3bc32(0x1d5)](_0xc3bc32(0x1fc),Buffer[_0xc3bc32(0x1d4)](_0x2d2079));});});}['on'](_0x53cdc6,_0x4e8179){const _0x17e9df=a9_0x34b303;if(this[_0x17e9df(0x1bf)][_0x53cdc6]==undefined)this[_0x17e9df(0x1bf)][_0x53cdc6]=[];this[_0x17e9df(0x1bf)][_0x53cdc6][_0x17e9df(0x1de)](_0x4e8179);}['off'](_0x3a3af5,_0x1821a2){const _0x342e3d=a9_0x34b303;if(_0x1821a2==undefined){this['handlers'][_0x3a3af5]=[];return;}const _0x2d3197=this['handlers'][_0x3a3af5],_0x4a1943=(_0x2d3197!==null&&_0x2d3197!==void 0x0?_0x2d3197:[])[_0x342e3d(0x1d0)](_0x4ca05b=>_0x4ca05b===_0x1821a2);if(_0x4a1943===-0x1)throw new Error(_0x342e3d(0x1f8)+_0x3a3af5+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x2d3197[_0x342e3d(0x1cb)](_0x4a1943,0x1);}[a9_0x34b303(0x1f4)](_0x2b934a,_0x637705){const _0x1047dd=a9_0x34b303;var _0x358151;const _0x398d38=(_0x358151=this[_0x1047dd(0x1bf)][_0x2b934a])!==null&&_0x358151!==void 0x0?_0x358151:[];for(const _0x103f6c of _0x398d38){_0x103f6c(_0x637705);}}static['fromUpgradeRequest'](_0x633001,_0x2ed81e){const _0x3fddbe=a9_0x34b303,_0x2fbceb=_0x633001[_0x3fddbe(0x1c6)]['sec-websocket-key'];if(_0x2fbceb==undefined)return _0x2ed81e['destroy'](),null;const _0x37c0ba=a9_0x4e3c90[_0x3fddbe(0x208)]('sha1');_0x37c0ba[_0x3fddbe(0x1c2)](_0x2fbceb+_0x3fddbe(0x1e2));const _0x27fb53=_0x37c0ba['digest'](_0x3fddbe(0x1e8)),_0xf817ab=[_0x3fddbe(0x1da),_0x3fddbe(0x1fe),'Connection:\x20Upgrade',_0x3fddbe(0x1d3)+_0x27fb53];return _0x2ed81e[_0x3fddbe(0x1cc)](_0xf817ab[_0x3fddbe(0x1dd)]('\x0d\x0a')+'\x0d\x0a\x0d\x0a'),new Socket(_0x2ed81e);}}