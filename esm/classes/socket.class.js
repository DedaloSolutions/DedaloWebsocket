const a11_0x12c6f6=a11_0x558b;function a11_0xa7dd(){const _0x37bdde=['NaN','toString','1730styCuG','Connection:\x20Upgrade','467054WKZgBi','close','1301948dOUAGx','pingRequests','set','closed','length','Upgrade:\x20websocket','error','write','then','\x0d\x0a\x0d\x0a','off','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','pendingRequests','parse','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','10312DdwxrP','pingInterval','requestId','1771xdpRLP','Received\x20non-standard\x20text\x20message:\x20','3415295aokjTx','sha1','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','readBigUInt64BE','sec-websocket-key','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','The\x20websocket\x20is\x20not\x20connected','slice','__awaiter','apply','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','72567WoBGzE','encode','alloc','randomUUID','handle','status','utf-8','value','decode','concat','ping','end','1372974lbQKIo','from','emit','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','handlers','text','handshake','readUInt16BE','raise','HTTP/1.1\x20101\x20Switching\x20Protocols','3nHQSsC','pong','headers','socket','call','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','push','createHash','data','_status','binary','next','closing','Timeout','disconnect','once','throw','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','606120Xpfftl','includes','open','pingTimeout','checkHeartbeat','send'];a11_0xa7dd=function(){return _0x37bdde;};return a11_0xa7dd();}(function(_0x239ebe,_0x1c17d6){const _0x4f76bf=a11_0x558b,_0x22b785=_0x239ebe();while(!![]){try{const _0x4458e3=-parseInt(_0x4f76bf(0x1d8))/0x1+parseInt(_0x4f76bf(0x1fe))/0x2+-parseInt(_0x4f76bf(0x1e2))/0x3*(parseInt(_0x4f76bf(0x200))/0x4)+parseInt(_0x4f76bf(0x214))/0x5+-parseInt(_0x4f76bf(0x1f4))/0x6+-parseInt(_0x4f76bf(0x212))/0x7*(-parseInt(_0x4f76bf(0x20f))/0x8)+parseInt(_0x4f76bf(0x1cc))/0x9*(parseInt(_0x4f76bf(0x1fc))/0xa);if(_0x4458e3===_0x1c17d6)break;else _0x22b785['push'](_0x22b785['shift']());}catch(_0x1971dc){_0x22b785['push'](_0x22b785['shift']());}}}(a11_0xa7dd,0xcc9e9));var __awaiter=this&&this[a11_0x12c6f6(0x1c9)]||function(_0x159065,_0x38efc3,_0x123e38,_0x170c14){function _0x4232e1(_0x2d711f){return _0x2d711f instanceof _0x123e38?_0x2d711f:new _0x123e38(function(_0x4d5ece){_0x4d5ece(_0x2d711f);});}return new(_0x123e38||(_0x123e38=Promise))(function(_0x1f2137,_0x177e9e){const _0x501bcc=a11_0x558b;function _0x469a1e(_0x169787){const _0x3db888=a11_0x558b;try{_0x14390b(_0x170c14[_0x3db888(0x1ed)](_0x169787));}catch(_0x309e5b){_0x177e9e(_0x309e5b);}}function _0x10385b(_0x213e39){const _0x161f52=a11_0x558b;try{_0x14390b(_0x170c14[_0x161f52(0x1f2)](_0x213e39));}catch(_0x12f019){_0x177e9e(_0x12f019);}}function _0x14390b(_0x1d04f7){const _0x572290=a11_0x558b;_0x1d04f7['done']?_0x1f2137(_0x1d04f7['value']):_0x4232e1(_0x1d04f7[_0x572290(0x1d3)])[_0x572290(0x208)](_0x469a1e,_0x10385b);}_0x14390b((_0x170c14=_0x170c14[_0x501bcc(0x1ca)](_0x159065,_0x38efc3||[]))[_0x501bcc(0x1ed)]());});};import a11_0x26369b from'crypto';function a11_0x558b(_0x74c50f,_0x58c0a4){const _0xa7dde3=a11_0xa7dd();return a11_0x558b=function(_0x558b9e,_0x10a8b7){_0x558b9e=_0x558b9e-0x1c9;let _0x108177=_0xa7dde3[_0x558b9e];return _0x108177;},a11_0x558b(_0x74c50f,_0x58c0a4);}export default class Socket{constructor(_0x3715f6){const _0x537e22=a11_0x12c6f6;this[_0x537e22(0x1e5)]=_0x3715f6,this['_status']='handshake',this[_0x537e22(0x210)]=0x5*0x3e8,this[_0x537e22(0x1f7)]=0x2*0x3e8,this[_0x537e22(0x201)]={},this['requestId']=0x1,this[_0x537e22(0x20c)]={},this[_0x537e22(0x1ea)]={},this[_0x537e22(0x1dc)]={},this[_0x537e22(0x1e5)]['on'](_0x537e22(0x1ea),_0x1d7b1b=>this[_0x537e22(0x1d0)](_0x1d7b1b)),this[_0x537e22(0x1e5)]['on'](_0x537e22(0x206),_0x334227=>this[_0x537e22(0x1e0)](_0x537e22(0x206),_0x334227));const _0x41afbf=this[_0x537e22(0x1cd)]({'pingInterval':this[_0x537e22(0x210)]});this['send']('binary',_0x41afbf);}[a11_0x12c6f6(0x1f0)](){return __awaiter(this,arguments,void 0x0,function*(_0x192502=0x3e8,_0x3b0854='',_0x3715db=0x1388){return new Promise((_0x4d00e3,_0x4309fc)=>{const _0x2fd73b=a11_0x558b,_0x1c95bf=Buffer[_0x2fd73b(0x1d9)](_0x3b0854,_0x2fd73b(0x1d2)),_0x4c2eed=Buffer['alloc'](0x2+_0x1c95bf[_0x2fd73b(0x204)]);_0x4c2eed['writeUInt16BE'](_0x192502,0x0),_0x1c95bf['copy'](_0x4c2eed,0x2);const _0x270f47=_0x4c2eed['length'],_0x23eb72=_0x270f47<0x7e?_0x270f47:_0x270f47<0x10000?0x7e:0x7f,_0x2bd5b2=_0x23eb72===0x7e?Buffer[_0x2fd73b(0x1d9)]([0x88,0x7e,_0x270f47>>0x8&0xff,_0x270f47&0xff]):_0x23eb72===0x7f?Buffer[_0x2fd73b(0x1d9)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x270f47>>0x8&0xff,_0x270f47&0xff]):Buffer[_0x2fd73b(0x1d9)]([0x88,_0x270f47]),_0x56c0ce=Buffer['concat']([_0x2bd5b2,_0x4c2eed]);this[_0x2fd73b(0x1e5)][_0x2fd73b(0x207)](_0x56c0ce),this[_0x2fd73b(0x1eb)]=_0x2fd73b(0x1ee);if(_0x3715db===null)this[_0x2fd73b(0x1e5)][_0x2fd73b(0x1d7)](),this[_0x2fd73b(0x1d1)]!==_0x2fd73b(0x203)&&(this[_0x2fd73b(0x1e0)]('close',{'code':_0x192502,'reason':_0x3b0854}),this[_0x2fd73b(0x1eb)]=_0x2fd73b(0x203)),_0x4d00e3();else{let _0x2d64ec=!![];this[_0x2fd73b(0x1e5)][_0x2fd73b(0x1f1)]('data',_0x5988da=>{const _0x5f212a=_0x2fd73b;if(!_0x2d64ec)return;_0x5988da[0x0]===0x88?(this[_0x5f212a(0x1eb)]=_0x5f212a(0x203),this['socket'][_0x5f212a(0x1d7)](),this[_0x5f212a(0x1e0)](_0x5f212a(0x1ff),{'code':_0x192502,'reason':_0x3b0854}),_0x4d00e3()):_0x4309fc(new Error(_0x5f212a(0x1cb)));}),setTimeout(()=>{const _0x14a4d6=_0x2fd73b;_0x2d64ec=![],_0x4309fc(new Error(_0x14a4d6(0x20b))),this[_0x14a4d6(0x1e5)]['end']();},_0x3715db);}});});}get[a11_0x12c6f6(0x1d1)](){const _0x1e1111=a11_0x12c6f6;return this[_0x1e1111(0x1eb)];}['send'](_0x2838e6,_0x4ff2da){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3e432b=a11_0x558b;let _0x2d935b,_0x255013;switch(_0x2838e6){case _0x3e432b(0x1dd):_0x2d935b=Buffer[_0x3e432b(0x1d9)](_0x4ff2da,_0x3e432b(0x1d2)),_0x255013=0x1;break;case _0x3e432b(0x1ec):_0x2d935b=_0x4ff2da,_0x255013=0x2;break;case _0x3e432b(0x1d6):_0x2d935b=_0x4ff2da,_0x255013=0x9;break;case'pong':_0x2d935b=_0x4ff2da,_0x255013=0xa;break;}const _0x1bed6d=[];if(_0x2d935b['length']<0x7e)_0x1bed6d[_0x3e432b(0x1e8)](_0x2d935b[_0x3e432b(0x204)]);else{if(_0x2d935b['length']<0x10000)_0x1bed6d['push'](0x7e,_0x2d935b[_0x3e432b(0x204)]>>0x8&0xff,_0x2d935b[_0x3e432b(0x204)]&0xff);else{_0x1bed6d['push'](0x7f);for(let _0x373781=0x7;_0x373781>=0x0;_0x373781--)_0x1bed6d[_0x3e432b(0x1e8)](_0x2d935b[_0x3e432b(0x204)]>>_0x373781*0x8&0xff);}}const _0x24ee4a=Buffer['concat']([Buffer[_0x3e432b(0x1d9)]([0x80|_0x255013,..._0x1bed6d]),_0x2d935b]);return new Promise((_0x5cb3a4,_0x4fe0ff)=>{const _0x1dcc69=_0x3e432b;this['socket'][_0x1dcc69(0x207)](_0x24ee4a,undefined,_0x3994e0=>{if(_0x3994e0!=undefined)return _0x4fe0ff(_0x3994e0);_0x5cb3a4();});});});}[a11_0x12c6f6(0x1da)](_0x232ad5,_0x2de78e,_0x351ca5){return __awaiter(this,arguments,void 0x0,function*(_0x129db7,_0x2d14bc,_0x130429,_0x5710ad=0x5*0x3e8){const _0x1a05e2=a11_0x558b;if(this[_0x1a05e2(0x1e5)]==undefined||this[_0x1a05e2(0x1d1)]!==_0x1a05e2(0x1f6))throw new Error(_0x1a05e2(0x21a));if([_0x1a05e2(0x1de),_0x1a05e2(0x1f6),'error',_0x1a05e2(0x1ff),'*'][_0x1a05e2(0x1f5)](_0x129db7))throw new Error(_0x1a05e2(0x216));const _0x15f725=new TextEncoder()[_0x1a05e2(0x1cd)](_0x129db7);if(_0x15f725[_0x1a05e2(0x204)]>0xff)throw new Error(_0x1a05e2(0x1db));const _0x5eb5ad=this[_0x1a05e2(0x211)];if(_0x130429!=undefined){this[_0x1a05e2(0x211)]=(this[_0x1a05e2(0x211)]+0x1)%0x100;const _0x15aba9=setTimeout(()=>{const _0x53e635=_0x1a05e2;delete this[_0x53e635(0x20c)][_0x5eb5ad],_0x130429(new Error(_0x53e635(0x1ef)));},_0x5710ad);this[_0x1a05e2(0x20c)][_0x5eb5ad]=_0x1e519c=>{if(!(_0x1e519c instanceof Error))clearTimeout(_0x15aba9);_0x130429(_0x1e519c);};}const _0x151a6d=this[_0x1a05e2(0x1cd)](_0x2d14bc),_0x181931=new Uint8Array(0x2+(_0x130429==undefined?0x0:0x1)+_0x15f725['length']+_0x151a6d[_0x1a05e2(0x204)]);_0x181931[0x0]=_0x130429==undefined?0x2:0x3;if(_0x130429!=undefined)_0x181931[0x1]=_0x5eb5ad;return _0x181931[0x1+(_0x130429!=undefined?0x1:0x0)]=_0x15f725['length'],_0x181931[_0x1a05e2(0x202)](_0x15f725,0x2+(_0x130429!=undefined?0x1:0x0)),_0x181931[_0x1a05e2(0x202)](_0x151a6d,0x2+(_0x130429!=undefined?0x1:0x0)+_0x15f725[_0x1a05e2(0x204)]),this[_0x1a05e2(0x1f9)](_0x1a05e2(0x1ec),_0x181931);});}[a11_0x12c6f6(0x1d0)](_0x5b0915){const _0x2124d0=a11_0x12c6f6;var _0x3f2a6c,_0x3290f9;const _0xf9c12=_0x5b0915[0x0],_0x32c432=(_0xf9c12&0x80)!==0x0,_0x507784=_0xf9c12&0xf,_0xb291a5=_0x5b0915[0x1],_0x4f7f8a=(_0xb291a5&0x80)!==0x0;let _0x1f115f=_0xb291a5&0x7f,_0xe502b6=0x2;if(_0x1f115f===0x7e)_0x1f115f=_0x5b0915[_0x2124d0(0x1df)](_0xe502b6),_0xe502b6+=0x2;else _0x1f115f===0x7f&&(_0x1f115f=Number(_0x5b0915[_0x2124d0(0x217)](_0xe502b6)),_0xe502b6+=0x8);const _0x2259f2=_0x4f7f8a?_0x5b0915['slice'](_0xe502b6,_0xe502b6+0x4):Buffer[_0x2124d0(0x1ce)](0x0);if(_0x4f7f8a)_0xe502b6+=0x4;let _0x2bd06b=_0x5b0915['slice'](_0xe502b6,_0xe502b6+_0x1f115f);if(_0x4f7f8a){const _0xa370fd=Buffer[_0x2124d0(0x1ce)](_0x2bd06b[_0x2124d0(0x204)]);for(let _0x1d2038=0x0;_0x1d2038<_0x2bd06b[_0x2124d0(0x204)];_0x1d2038++)_0xa370fd[_0x1d2038]=_0x2bd06b[_0x1d2038]^_0x2259f2[_0x1d2038%0x4];_0x2bd06b=_0xa370fd;}switch(_0x507784){case 0x1:this['raise']('error',new Error(_0x2124d0(0x213)+_0x2bd06b[_0x2124d0(0x1fb)]('utf-8')));break;case 0x2:{if(this[_0x2124d0(0x1eb)]===_0x2124d0(0x1de)){const _0x196029=this[_0x2124d0(0x1d4)](_0x2bd06b);this['raise'](_0x2124d0(0x1de),_0x196029),this[_0x2124d0(0x1eb)]=_0x2124d0(0x1f6),this[_0x2124d0(0x1f9)](_0x2124d0(0x1ec),Buffer[_0x2124d0(0x1ce)](0x0)),this[_0x2124d0(0x1f8)]();return;}const _0x49e958=_0x2bd06b[0x0];switch(_0x49e958){case 0x0:{_0x2bd06b[0x0]=0x1,this[_0x2124d0(0x1f9)](_0x2124d0(0x1ec),_0x2bd06b);break;}case 0x1:{const _0x529dd1=_0x2bd06b[_0x2124d0(0x21b)](0x1)[_0x2124d0(0x1fb)]('utf-8'),_0x238d02=this[_0x2124d0(0x201)][_0x529dd1];if(_0x238d02==undefined){this[_0x2124d0(0x1e0)](_0x2124d0(0x206),new Error(_0x2124d0(0x1e7)));return;}_0x238d02();break;}case 0x2:case 0x3:{const _0x497843=_0x49e958===0x2?Number[_0x2124d0(0x1fa)]:_0x2bd06b[0x1],_0x29305c=_0x49e958===0x2?0x0:0x1,_0x14b562=_0x2bd06b[0x1+_0x29305c],_0x5f2d05=new TextDecoder()['decode'](_0x2bd06b[_0x2124d0(0x21b)](0x2+_0x29305c,0x2+_0x29305c+_0x14b562));if([_0x2124d0(0x1de),'open','error','close','*'][_0x2124d0(0x1f5)](_0x5f2d05))return;const _0x3245eb=this[_0x2124d0(0x1d4)](_0x2bd06b[_0x2124d0(0x21b)](0x2+_0x29305c+_0x14b562)),_0x5d469f=(_0x3f2a6c=this[_0x2124d0(0x1dc)][_0x5f2d05])!==null&&_0x3f2a6c!==void 0x0?_0x3f2a6c:[];let _0x41ed27=![];for(const _0x2d7af6 of _0x5d469f){const _0xe0b82e=_0x2d7af6[_0x2124d0(0x1e6)](undefined,_0x3245eb);if(!_0x41ed27&&_0xe0b82e!==undefined&&_0x497843!==0x0){_0x41ed27=!![];const _0x4d4d48=Buffer[_0x2124d0(0x1d5)]([Buffer[_0x2124d0(0x1d9)]([0x4,_0x497843]),this['encode'](_0xe0b82e)]);this[_0x2124d0(0x1f9)]('binary',_0x4d4d48);}}const _0x221c70=(_0x3290f9=this[_0x2124d0(0x1dc)]['*'])!==null&&_0x3290f9!==void 0x0?_0x3290f9:[];for(const _0x2eec4f of _0x221c70)_0x2eec4f['call'](undefined,_0x5f2d05,_0x3245eb);if(!_0x41ed27&&_0x49e958===0x3){}break;}case 0x4:{const _0x398751=_0x2bd06b[0x1],_0x45c544=this[_0x2124d0(0x20c)][_0x398751];if(_0x45c544==undefined)return;const _0x948b7c=this['decode'](_0x2bd06b[_0x2124d0(0x21b)](0x2));_0x45c544(_0x948b7c);break;}}break;}case 0x9:this[_0x2124d0(0x1f9)](_0x2124d0(0x1e3),_0x2bd06b);break;case 0xa:break;case 0x8:if(this[_0x2124d0(0x1eb)]===_0x2124d0(0x1ee))return;let _0x4883a6=0x3e8,_0x254fa8='';_0x2bd06b[_0x2124d0(0x204)]>=0x2&&(_0x4883a6=_0x2bd06b[_0x2124d0(0x1df)](0x0),_0x254fa8=_0x2bd06b['slice'](0x2)[_0x2124d0(0x1fb)]('utf-8'));this[_0x2124d0(0x1f0)](_0x4883a6,_0x254fa8,null);break;default:this[_0x2124d0(0x1e0)](_0x2124d0(0x206),new Error('Received\x20message\x20with\x20unsupported\x20opcode:\x20'+_0x507784));}}[a11_0x12c6f6(0x1cd)](_0x430f10){const _0x231dca=a11_0x12c6f6;return Buffer[_0x231dca(0x1d9)](JSON['stringify'](_0x430f10),_0x231dca(0x1d2));}['decode'](_0x397a19){const _0x33e1f7=a11_0x12c6f6;return JSON[_0x33e1f7(0x20d)](_0x397a19['toString'](_0x33e1f7(0x1d2)));}[a11_0x12c6f6(0x1f8)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x125005,_0x80b884)=>{const _0x8f8946=a11_0x558b;if(this[_0x8f8946(0x1eb)]!==_0x8f8946(0x1f6))return;const _0x3e8e36=a11_0x26369b[_0x8f8946(0x1cf)](),_0x30cabd=setTimeout(()=>{const _0x59cebc=_0x8f8946;delete this[_0x59cebc(0x201)][_0x3e8e36];if(![_0x59cebc(0x1ee),_0x59cebc(0x203)][_0x59cebc(0x1f5)](this[_0x59cebc(0x1d1)]))this[_0x59cebc(0x1f0)](0x3e8,'',null);_0x125005(![]);},this['pingTimeout']);this[_0x8f8946(0x201)][_0x3e8e36]=()=>{const _0x3938b3=_0x8f8946;delete this[_0x3938b3(0x201)][_0x3e8e36],clearTimeout(_0x30cabd),_0x125005(!![]),setTimeout(()=>{const _0x3cf2a9=_0x3938b3;if(this[_0x3cf2a9(0x1eb)]!==_0x3cf2a9(0x1f6))return;this[_0x3cf2a9(0x1f8)]();},this[_0x3938b3(0x210)]);},this[_0x8f8946(0x1f9)](_0x8f8946(0x1ec),Buffer[_0x8f8946(0x1d5)]([Buffer[_0x8f8946(0x1d9)]([0x0]),Buffer['from'](_0x3e8e36)]));});});}['on'](_0x52292c,_0x10b69b){const _0x33d517=a11_0x12c6f6;if(this[_0x33d517(0x1dc)][_0x52292c]==undefined)this['handlers'][_0x52292c]=[];this[_0x33d517(0x1dc)][_0x52292c][_0x33d517(0x1e8)](_0x10b69b);}[a11_0x12c6f6(0x20a)](_0x32e092,_0x509da4){const _0x2eb7bf=a11_0x12c6f6;if(_0x509da4==undefined){this[_0x2eb7bf(0x1dc)][_0x32e092]=[];return;}const _0x1b3bd5=this[_0x2eb7bf(0x1dc)][_0x32e092],_0x1e7c96=(_0x1b3bd5!==null&&_0x1b3bd5!==void 0x0?_0x1b3bd5:[])['findIndex'](_0x2e0a53=>_0x2e0a53===_0x509da4);if(_0x1e7c96===-0x1)throw new Error(_0x2eb7bf(0x20e)+_0x32e092+_0x2eb7bf(0x219));_0x1b3bd5['splice'](_0x1e7c96,0x1);}['raise'](_0x41ad9f,_0x2979f8){const _0x48830a=a11_0x12c6f6;var _0x24f719,_0x5b05e8;const _0x378795=(_0x24f719=this[_0x48830a(0x1dc)][_0x41ad9f])!==null&&_0x24f719!==void 0x0?_0x24f719:[];for(const _0x3cd9a of _0x378795)_0x3cd9a(_0x2979f8);const _0x59f393=(_0x5b05e8=this[_0x48830a(0x1dc)]['*'])!==null&&_0x5b05e8!==void 0x0?_0x5b05e8:[];for(const _0x1b9165 of _0x59f393)_0x1b9165(_0x41ad9f,_0x2979f8);}static['fromUpgradeRequest'](_0x22be7b,_0x333b1e){const _0x1422a7=a11_0x12c6f6,_0x300885=_0x22be7b[_0x1422a7(0x1e4)][_0x1422a7(0x218)];if(_0x300885==undefined)return _0x333b1e['destroy'](),null;const _0x3740c7=a11_0x26369b[_0x1422a7(0x1e9)](_0x1422a7(0x215));_0x3740c7['update'](_0x300885+_0x1422a7(0x1f3));const _0x28debb=_0x3740c7['digest']('base64'),_0x2116b8=[_0x1422a7(0x1e1),_0x1422a7(0x205),_0x1422a7(0x1fd),'Sec-WebSocket-Accept:\x20'+_0x28debb];return _0x333b1e[_0x1422a7(0x207)](_0x2116b8['join']('\x0d\x0a')+_0x1422a7(0x209)),new Socket(_0x333b1e);}}