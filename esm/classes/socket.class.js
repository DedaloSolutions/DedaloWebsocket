const a11_0x682ce2=a11_0x55a3;(function(_0x2fb96b,_0x3056e){const _0x1a1cfc=a11_0x55a3,_0x48bdfe=_0x2fb96b();while(!![]){try{const _0x20e76c=-parseInt(_0x1a1cfc(0x123))/0x1*(parseInt(_0x1a1cfc(0x106))/0x2)+-parseInt(_0x1a1cfc(0xf0))/0x3+-parseInt(_0x1a1cfc(0x137))/0x4+parseInt(_0x1a1cfc(0x110))/0x5+parseInt(_0x1a1cfc(0xf1))/0x6+parseInt(_0x1a1cfc(0x11a))/0x7+parseInt(_0x1a1cfc(0x13e))/0x8;if(_0x20e76c===_0x3056e)break;else _0x48bdfe['push'](_0x48bdfe['shift']());}catch(_0x115b58){_0x48bdfe['push'](_0x48bdfe['shift']());}}}(a11_0x261b,0x4a9bb));var __awaiter=this&&this[a11_0x682ce2(0xe9)]||function(_0x50189e,_0x551529,_0x3054e7,_0xad5dda){function _0x4969ee(_0x16b1f3){return _0x16b1f3 instanceof _0x3054e7?_0x16b1f3:new _0x3054e7(function(_0xe200c6){_0xe200c6(_0x16b1f3);});}return new(_0x3054e7||(_0x3054e7=Promise))(function(_0x2e7fe6,_0x168cd5){const _0x12b6ae=a11_0x55a3;function _0x40f80e(_0x381381){const _0x47a7b7=a11_0x55a3;try{_0x121977(_0xad5dda[_0x47a7b7(0x13a)](_0x381381));}catch(_0x368b5c){_0x168cd5(_0x368b5c);}}function _0x325f72(_0x596ed2){const _0x3436f1=a11_0x55a3;try{_0x121977(_0xad5dda[_0x3436f1(0x11d)](_0x596ed2));}catch(_0x5595e5){_0x168cd5(_0x5595e5);}}function _0x121977(_0x32aee3){const _0x3e5411=a11_0x55a3;_0x32aee3[_0x3e5411(0x101)]?_0x2e7fe6(_0x32aee3['value']):_0x4969ee(_0x32aee3[_0x3e5411(0xe8)])[_0x3e5411(0x102)](_0x40f80e,_0x325f72);}_0x121977((_0xad5dda=_0xad5dda[_0x12b6ae(0x13d)](_0x50189e,_0x551529||[]))[_0x12b6ae(0x13a)]());});};function a11_0x261b(){const _0x4a11fb=['open','sha1','value','__awaiter','error','Sec-WebSocket-Accept:\x20','join','socket','from','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','1640121hQBdYN','2221440sStrtJ','toString','pingId','push','findIndex','Upgrade:\x20websocket','fromUpgradeRequest','closing','Connection:\x20Upgrade','_status','writeUInt8','HTTP/1.1\x20101\x20Switching\x20Protocols',',\x20that\x20requires\x20a\x20response.','createHash','ping','destroy','done','then','\x0d\x0a\x0d\x0a','close','writeUInt16BE','2GNNkzM','utf-8','Received\x20message\x20with\x20unsupported\x20opcode:\x20','pingTimeout','text','includes','pingRequests','Timeout','raise','send','2431025wWmAss','The\x20websocket\x20is\x20already\x20disconnected','base64','status','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','requestId','pingInterval','\x20but\x20to\x20pending\x20request\x20was\x20found','checkHeartbeat','No\x20handler\x20returns\x20a\x20value\x20for\x20event\x20','2732121mJmjWP','copy','handlers','throw','call','off','readUInt16BE','update','decode','472335RHJrUD','readBigUInt64BE','digest','closed','data','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','encode','handshake','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','alloc','pendingRequests','write','length','Received\x20emit\x20from\x20client\x20for\x20a\x20reserved\x20event:\x20','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','drain','concat','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','Received\x20a\x20response\x20for\x20id\x20','receive','684284YmffAq','stringify','binary','next','readUInt8','parse','apply','1991680kycAXz','subarray','pong'];a11_0x261b=function(){return _0x4a11fb;};return a11_0x261b();}function a11_0x55a3(_0x42ad4b,_0x24ddc8){const _0x261b61=a11_0x261b();return a11_0x55a3=function(_0x55a366,_0x2078d4){_0x55a366=_0x55a366-0xe7;let _0x1007fd=_0x261b61[_0x55a366];return _0x1007fd;},a11_0x55a3(_0x42ad4b,_0x24ddc8);}import a11_0x51a094 from'crypto';export default class Socket{constructor(_0x2d27c7){const _0x2604f7=a11_0x682ce2;this['socket']=_0x2d27c7,this[_0x2604f7(0xfa)]='handshake',this[_0x2604f7(0x116)]=0xa*0x3e8,this[_0x2604f7(0x109)]=0x9*0x3e8,this[_0x2604f7(0x10c)]={},this[_0x2604f7(0xf3)]=0x1,this['requestId']=0x1,this[_0x2604f7(0x12d)]={},this['handlers']={},this['socket']['on'](_0x2604f7(0x127),_0xdb1ebb=>this[_0x2604f7(0x136)](_0xdb1ebb)),this['socket']['on'](_0x2604f7(0xea),_0x83ac9a=>this['raise']('error',_0x83ac9a)),this[_0x2604f7(0x10f)](_0x2604f7(0x139),this[_0x2604f7(0x129)]({'pingInterval':this[_0x2604f7(0x116)]})),this[_0x2604f7(0x118)]();}['disconnect'](){return __awaiter(this,arguments,void 0x0,function*(_0x1b6421=0x3e8,_0xe74a09='',_0x1a4ba0=0x1388){return new Promise((_0x750073,_0x146e0e)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x307098=a11_0x55a3;if(this[_0x307098(0xfa)]===_0x307098(0xf8)||this['_status']===_0x307098(0x126))return _0x146e0e(new Error(_0x307098(0x111)));const _0x3b0383=Buffer['from'](_0xe74a09,_0x307098(0x107)),_0x34aa47=Buffer[_0x307098(0x12c)](0x2+_0x3b0383[_0x307098(0x12f)]);_0x34aa47[_0x307098(0x105)](_0x1b6421,0x0),_0x3b0383[_0x307098(0x11b)](_0x34aa47,0x2);const _0x178961=_0x34aa47['length'],_0x515d78=_0x178961<0x7e?_0x178961:_0x178961<0x10000?0x7e:0x7f,_0x1c7793=_0x515d78===0x7e?Buffer[_0x307098(0xee)]([0x88,0x7e,_0x178961>>0x8&0xff,_0x178961&0xff]):_0x515d78===0x7f?Buffer[_0x307098(0xee)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x178961>>0x8&0xff,_0x178961&0xff]):Buffer[_0x307098(0xee)]([0x88,_0x178961]),_0x3a4e22=Buffer[_0x307098(0x133)]([_0x1c7793,_0x34aa47]);this[_0x307098(0xed)][_0x307098(0x12e)](_0x3a4e22),this[_0x307098(0xfa)]='closing',this[_0x307098(0xed)]['once'](_0x307098(0x127),_0x5eb832=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x23d0ce=_0x307098;if(this[_0x23d0ce(0xfa)]==='closed')return;_0x5eb832[0x0]===0x88?(this[_0x23d0ce(0x104)](_0x1b6421,_0xe74a09),_0x750073()):_0x146e0e(new Error(_0x23d0ce(0xef)));})),_0x1a4ba0>0x0?setTimeout(()=>{this['close'](_0x1b6421,_0xe74a09),_0x146e0e(new Error('Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.'));},_0x1a4ba0):(this['close'](_0x1b6421,_0xe74a09),_0x750073());}));});}['close'](){return __awaiter(this,arguments,void 0x0,function*(_0x48b417=0x3e8,_0x15091e=''){const _0x37f0ec=a11_0x55a3;if(this[_0x37f0ec(0xfa)]===_0x37f0ec(0x126))return;this['_status']=_0x37f0ec(0x126),yield new Promise(_0x1e3e4c=>this[_0x37f0ec(0xed)]['end'](()=>_0x1e3e4c())),this['raise'](_0x37f0ec(0x104),{'code':_0x48b417,'reason':_0x15091e});});}get[a11_0x682ce2(0x113)](){return this['_status'];}['checkHeartbeat'](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x306582,_0x2833ae)=>{const _0x1acc04=a11_0x55a3;if(this[_0x1acc04(0xfa)]!==_0x1acc04(0x141))return;const _0x1c5083=this['pingId'];this[_0x1acc04(0xf3)]=(this[_0x1acc04(0xf3)]+0x1)%0x100;const _0x10885a=setTimeout(()=>{const _0x428914=_0x1acc04;delete this[_0x428914(0x10c)][_0x1c5083],this['close'](),_0x306582(![]);},this['pingTimeout']);this[_0x1acc04(0x10c)][_0x1c5083]=()=>{const _0x5a30c2=_0x1acc04;delete this[_0x5a30c2(0x10c)][_0x1c5083],clearTimeout(_0x10885a),_0x306582(!![]),setTimeout(()=>{const _0x1ae76c=_0x5a30c2;if(this[_0x1ae76c(0xfa)]!==_0x1ae76c(0x141))return;this[_0x1ae76c(0x118)]();},this[_0x5a30c2(0x116)]);};const _0x1d9b3b=Buffer[_0x1acc04(0x12c)](0x2);_0x1d9b3b[_0x1acc04(0xfb)](0x0,0x0),_0x1d9b3b[_0x1acc04(0xfb)](_0x1c5083,0x1),this[_0x1acc04(0x10f)](_0x1acc04(0x139),_0x1d9b3b);});});}[a11_0x682ce2(0x136)](_0xa634e8){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1ad95a=a11_0x55a3;var _0x5248fa;if(this['_status']===_0x1ad95a(0x126))return;const _0x5553dd=_0xa634e8[0x0],_0x79df8a=(_0x5553dd&0x80)!==0x0,_0x3fdabf=_0x5553dd&0xf,_0x236507=_0xa634e8[0x1],_0x39a26d=(_0x236507&0x80)!==0x0;let _0x5f3715=_0x236507&0x7f,_0x53cfc2=0x2;if(_0x5f3715===0x7e)_0x5f3715=_0xa634e8[_0x1ad95a(0x120)](_0x53cfc2),_0x53cfc2+=0x2;else _0x5f3715===0x7f&&(_0x5f3715=Number(_0xa634e8[_0x1ad95a(0x124)](_0x53cfc2)),_0x53cfc2+=0x8);const _0x5ead12=_0x39a26d?_0xa634e8['subarray'](_0x53cfc2,_0x53cfc2+0x4):Buffer[_0x1ad95a(0x12c)](0x0);if(_0x39a26d)_0x53cfc2+=0x4;let _0x472f1f=_0xa634e8[_0x1ad95a(0x13f)](_0x53cfc2,_0x53cfc2+_0x5f3715);if(_0x39a26d){const _0x5642b8=Buffer[_0x1ad95a(0x12c)](_0x472f1f[_0x1ad95a(0x12f)]);for(let _0x2745b2=0x0;_0x2745b2<_0x472f1f[_0x1ad95a(0x12f)];_0x2745b2++)_0x5642b8[_0x2745b2]=_0x472f1f[_0x2745b2]^_0x5ead12[_0x2745b2%0x4];_0x472f1f=_0x5642b8;}switch(_0x3fdabf){case 0x1:this['raise']('error',new Error('Received\x20non-standard\x20text\x20message:\x20'+_0x472f1f[_0x1ad95a(0xf2)](_0x1ad95a(0x107))));break;case 0x2:{if(this['_status']===_0x1ad95a(0x12a)){const _0x2f1bec=this['decode'](_0x472f1f);this[_0x1ad95a(0x10e)](_0x1ad95a(0x12a),_0x2f1bec),this['_status']=_0x1ad95a(0x141);return;}const _0x5c60ae=_0x472f1f[_0x1ad95a(0x13b)](0x0);switch(_0x5c60ae){case 0x0:{const _0x450c76=_0x472f1f[_0x1ad95a(0x13f)](0x1),_0x5af2ab=Buffer[_0x1ad95a(0x12c)](0x1+_0x450c76['length']);_0x5af2ab[_0x1ad95a(0xfb)](0x1,0x0),_0x450c76[_0x1ad95a(0x11b)](_0x5af2ab,0x1),this['send']('binary',_0x5af2ab);break;}case 0x1:{const _0x71a7c3=_0x472f1f[_0x1ad95a(0x13b)](0x1),_0x2844ce=this['pingRequests'][_0x71a7c3];if(_0x2844ce==undefined){this['raise']('error',new Error('Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping'));break;}_0x2844ce();break;}case 0x2:{const _0xc34585=_0x472f1f[_0x1ad95a(0x13b)](0x1),_0x50da90=_0x472f1f[_0x1ad95a(0x13b)](0x2),_0x585cea=_0x472f1f[_0x1ad95a(0x13f)](0x3,0x3+_0x50da90)[_0x1ad95a(0xf2)]('utf-8');if([_0x1ad95a(0x12a),_0x1ad95a(0x141),'error','close','*'][_0x1ad95a(0x10b)](_0x585cea)){this[_0x1ad95a(0x10e)](_0x1ad95a(0xea),new Error(_0x1ad95a(0x130)+_0x585cea));break;}const _0x33f13e=_0x472f1f[_0x1ad95a(0x13f)](0x3+_0x50da90),_0x58f41d=this[_0x1ad95a(0x122)](_0x33f13e),_0x4132b4=(_0x5248fa=this[_0x1ad95a(0x11c)][_0x585cea])!==null&&_0x5248fa!==void 0x0?_0x5248fa:[];let _0x59f7c9;for(const _0x3070ad of _0x4132b4){const _0x397faa=yield _0x3070ad['call'](undefined,_0x58f41d);if(_0x59f7c9===undefined)_0x59f7c9=_0x397faa;}if(_0xc34585!==0x0){if(_0x59f7c9===undefined)this[_0x1ad95a(0x10e)](_0x1ad95a(0xea),new Error(_0x1ad95a(0x119)+_0x585cea+_0x1ad95a(0xfd)));const _0x3aad64=this['encode'](_0x59f7c9!==null&&_0x59f7c9!==void 0x0?_0x59f7c9:null),_0x579aa5=Buffer['alloc'](0x2+_0x3aad64[_0x1ad95a(0x12f)]);_0x579aa5[_0x1ad95a(0xfb)](0x3,0x0),_0x579aa5['writeUInt8'](_0xc34585,0x1),_0x3aad64[_0x1ad95a(0x11b)](_0x579aa5,0x2),yield this[_0x1ad95a(0x10f)](_0x1ad95a(0x139),_0x579aa5);}break;}case 0x3:{const _0x58a807=_0x472f1f[_0x1ad95a(0x13b)](0x1),_0x43536f=this['pendingRequests'][_0x58a807];if(_0x43536f==undefined){this[_0x1ad95a(0x10e)](_0x1ad95a(0xea),new Error(_0x1ad95a(0x135)+_0x58a807+_0x1ad95a(0x117)));break;}const _0x3fa539=this['decode'](_0x472f1f['subarray'](0x2));_0x43536f(_0x3fa539);break;}}break;}case 0x9:{this[_0x1ad95a(0x10f)](_0x1ad95a(0x140),_0x472f1f);break;}case 0xa:{break;}case 0x8:{if(this[_0x1ad95a(0xfa)]==='closing')return;let _0x42065a=0x3e8,_0x284575='';_0x472f1f['length']>=0x2&&(_0x42065a=_0x472f1f['readUInt16BE'](0x0),_0x284575=_0x472f1f['slice'](0x2)[_0x1ad95a(0xf2)](_0x1ad95a(0x107)));this['disconnect'](_0x42065a,_0x284575,0x0);break;}default:this[_0x1ad95a(0x10e)]('error',new Error(_0x1ad95a(0x108)+_0x3fdabf));}if(_0xa634e8['length']>_0x53cfc2+_0x5f3715)this['receive'](_0xa634e8[_0x1ad95a(0x13f)](_0x53cfc2+_0x5f3715));});}['send'](_0x19b0be,_0x568627){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1cfad2=a11_0x55a3;let _0x3f55ca,_0xffa589;switch(_0x19b0be){case _0x1cfad2(0x10a):_0x3f55ca=Buffer[_0x1cfad2(0xee)](_0x568627,'utf-8'),_0xffa589=0x1;break;case'binary':_0x3f55ca=_0x568627,_0xffa589=0x2;break;case _0x1cfad2(0xff):_0x3f55ca=_0x568627,_0xffa589=0x9;break;case _0x1cfad2(0x140):_0x3f55ca=_0x568627,_0xffa589=0xa;break;}const _0x208357=[];if(_0x3f55ca[_0x1cfad2(0x12f)]<0x7e)_0x208357[_0x1cfad2(0xf4)](_0x3f55ca[_0x1cfad2(0x12f)]);else{if(_0x3f55ca[_0x1cfad2(0x12f)]<0x10000)_0x208357[_0x1cfad2(0xf4)](0x7e,_0x3f55ca[_0x1cfad2(0x12f)]>>0x8&0xff,_0x3f55ca[_0x1cfad2(0x12f)]&0xff);else{_0x208357[_0x1cfad2(0xf4)](0x7f);for(let _0x43ca07=0x7;_0x43ca07>=0x0;_0x43ca07--)_0x208357[_0x1cfad2(0xf4)](_0x3f55ca[_0x1cfad2(0x12f)]>>_0x43ca07*0x8&0xff);}}const _0xc7d58a=Buffer[_0x1cfad2(0x133)]([Buffer[_0x1cfad2(0xee)]([0x80|_0xffa589,..._0x208357]),_0x3f55ca]);return new Promise((_0x5349a1,_0x78bade)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x2bbf00=_0x1cfad2,_0x2ff68b=this['socket'][_0x2bbf00(0x12e)](_0xc7d58a,undefined,_0x3c6ec2=>{if(_0x3c6ec2==undefined)return;_0x78bade(_0x3c6ec2);});if(!_0x2ff68b)yield new Promise(_0x54e9f4=>this[_0x2bbf00(0xed)]['once'](_0x2bbf00(0x132),_0x54e9f4));_0x5349a1();}));});}[a11_0x682ce2(0x129)](_0x5e4525){const _0x363f1e=a11_0x682ce2;return Buffer[_0x363f1e(0xee)](JSON[_0x363f1e(0x138)](_0x5e4525),'utf-8');}[a11_0x682ce2(0x122)](_0x3aa6c0){const _0x47a60c=a11_0x682ce2;return JSON[_0x47a60c(0x13c)](_0x3aa6c0['toString'](_0x47a60c(0x107)));}['emit'](_0x4ee5de,_0x868db2,_0x4e7412){return __awaiter(this,arguments,void 0x0,function*(_0x1ab732,_0x5bd422,_0x423358,_0x6a2bff=0x5*0x3e8){const _0x4e6894=a11_0x55a3;if(this['socket']==undefined||this[_0x4e6894(0x113)]!==_0x4e6894(0x141))throw new Error('The\x20websocket\x20is\x20not\x20connected');if([_0x4e6894(0x12a),_0x4e6894(0x141),'error',_0x4e6894(0x104),'*'][_0x4e6894(0x10b)](_0x1ab732))throw new Error(_0x4e6894(0x114));const _0x35c894=Buffer[_0x4e6894(0xee)](_0x1ab732,_0x4e6894(0x107));if(_0x35c894[_0x4e6894(0x12f)]>0xff)throw new Error(_0x4e6894(0x12b));const _0xd99141=_0x423358==undefined?0x0:this[_0x4e6894(0x115)];if(_0x423358!=undefined){this[_0x4e6894(0x115)]=(this[_0x4e6894(0x115)]+0x1)%0x100||0x1;const _0x5f3a41=setTimeout(()=>{const _0x173b68=_0x4e6894;delete this[_0x173b68(0x12d)][_0xd99141],_0x423358[_0x173b68(0x11e)](undefined,new Error(_0x173b68(0x10d)));},_0x6a2bff);this['pendingRequests'][_0xd99141]=_0x44e6f5=>{const _0x36c186=_0x4e6894;clearTimeout(_0x5f3a41),_0x423358[_0x36c186(0x11e)](undefined,_0x44e6f5);};}const _0x32df4c=this[_0x4e6894(0x129)](_0x5bd422),_0x1cc12c=Buffer[_0x4e6894(0x12c)](0x3+_0x35c894['length']+_0x32df4c['length']);return _0x1cc12c[_0x4e6894(0xfb)](0x2,0x0),_0x1cc12c[_0x4e6894(0xfb)](_0xd99141,0x1),_0x1cc12c[_0x4e6894(0xfb)](_0x35c894[_0x4e6894(0x12f)],0x2),_0x35c894[_0x4e6894(0x11b)](_0x1cc12c,0x3),_0x32df4c['copy'](_0x1cc12c,0x3+_0x35c894[_0x4e6894(0x12f)]),this['send'](_0x4e6894(0x139),_0x1cc12c);});}['on'](_0x49b634,_0xbcf439){const _0x33b1e1=a11_0x682ce2;if(this[_0x33b1e1(0x11c)][_0x49b634]==undefined)this[_0x33b1e1(0x11c)][_0x49b634]=[];this[_0x33b1e1(0x11c)][_0x49b634][_0x33b1e1(0xf4)](_0xbcf439);}[a11_0x682ce2(0x11f)](_0x56efbd,_0xa467a9){const _0x4de567=a11_0x682ce2;if(_0xa467a9==undefined){this[_0x4de567(0x11c)][_0x56efbd]=[];return;}const _0x336d6a=this[_0x4de567(0x11c)][_0x56efbd],_0xd63ef0=(_0x336d6a!==null&&_0x336d6a!==void 0x0?_0x336d6a:[])[_0x4de567(0xf5)](_0x3baf2b=>_0x3baf2b===_0xa467a9);if(_0xd63ef0===-0x1)throw new Error(_0x4de567(0x128)+_0x56efbd+_0x4de567(0x131));_0x336d6a['splice'](_0xd63ef0,0x1);}[a11_0x682ce2(0x10e)](_0x1b7b73,_0x44c07e){const _0x4ea95e=a11_0x682ce2;var _0x3e5e92;const _0x27eefc=(_0x3e5e92=this[_0x4ea95e(0x11c)][_0x1b7b73])!==null&&_0x3e5e92!==void 0x0?_0x3e5e92:[];for(const _0x5d757a of _0x27eefc)_0x5d757a(_0x44c07e);}static[a11_0x682ce2(0xf7)](_0x316738,_0x1b719e){const _0x552462=a11_0x682ce2,_0x71b6f3=_0x316738['headers']['sec-websocket-key'];if(_0x71b6f3==undefined)return _0x1b719e[_0x552462(0x100)](),null;const _0xd09282=a11_0x51a094[_0x552462(0xfe)](_0x552462(0xe7))[_0x552462(0x121)](_0x71b6f3+_0x552462(0x134))[_0x552462(0x125)](_0x552462(0x112)),_0x28084f=[_0x552462(0xfc),_0x552462(0xf6),_0x552462(0xf9),_0x552462(0xeb)+_0xd09282];return _0x1b719e[_0x552462(0x12e)](_0x28084f[_0x552462(0xec)]('\x0d\x0a')+_0x552462(0x103)),new Socket(_0x1b719e);}}