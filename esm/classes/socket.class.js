const a9_0x52d430=a9_0x4a1d;(function(_0x13fc9a,_0x434079){const _0xb87a78=a9_0x4a1d,_0x1eb344=_0x13fc9a();while(!![]){try{const _0x3b5dc5=parseInt(_0xb87a78(0x1d9))/0x1*(parseInt(_0xb87a78(0x1bd))/0x2)+parseInt(_0xb87a78(0x1c7))/0x3+parseInt(_0xb87a78(0x1d3))/0x4+parseInt(_0xb87a78(0x1cd))/0x5+-parseInt(_0xb87a78(0x201))/0x6+parseInt(_0xb87a78(0x1b9))/0x7*(-parseInt(_0xb87a78(0x1f4))/0x8)+parseInt(_0xb87a78(0x1e4))/0x9;if(_0x3b5dc5===_0x434079)break;else _0x1eb344['push'](_0x1eb344['shift']());}catch(_0x2789e1){_0x1eb344['push'](_0x1eb344['shift']());}}}(a9_0x244a,0x1d913));var __awaiter=this&&this['__awaiter']||function(_0x1b9b34,_0x1c7cce,_0x3e534c,_0x10213a){function _0x46f79e(_0x468f98){return _0x468f98 instanceof _0x3e534c?_0x468f98:new _0x3e534c(function(_0x27a960){_0x27a960(_0x468f98);});}return new(_0x3e534c||(_0x3e534c=Promise))(function(_0x2e498f,_0x2c1f31){const _0x57eb5f=a9_0x4a1d;function _0x17804d(_0x91a983){const _0x335cc4=a9_0x4a1d;try{_0x45732d(_0x10213a[_0x335cc4(0x1c3)](_0x91a983));}catch(_0x1b138f){_0x2c1f31(_0x1b138f);}}function _0xde441d(_0x5f4833){try{_0x45732d(_0x10213a['throw'](_0x5f4833));}catch(_0x12ed43){_0x2c1f31(_0x12ed43);}}function _0x45732d(_0x32d866){_0x32d866['done']?_0x2e498f(_0x32d866['value']):_0x46f79e(_0x32d866['value'])['then'](_0x17804d,_0xde441d);}_0x45732d((_0x10213a=_0x10213a['apply'](_0x1b9b34,_0x1c7cce||[]))[_0x57eb5f(0x1c3)]());});};import a9_0x573cca from'crypto';function a9_0x244a(){const _0x2d79f7=['The\x20websocket\x20is\x20not\x20connected','Timeout','3202OWXJDB','encode','randomUUID','base64','join','raise','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','pingInterval','closed','off','write','592398ksZYYB','concat','pingRequests','toString','emit','end','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','\x0d\x0a\x0d\x0a','Received\x20a\x20response\x20for\x20the\x20id\x20','open','utf-8','handshake','fromUpgradeRequest','copy','Upgrade:\x20websocket','56JhpRRl','call','binary','HTTP/1.1\x20101\x20Switching\x20Protocols','readUInt8','closing','Received\x20message\x20with\x20unsupported\x20opcode:\x20','pong','writeUInt16BE','error','from','ping','checkHeartbeat','746160sRnNAA','socket','slice','Sec-WebSocket-Accept:\x20','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','length','parse','sha1','splice','105091OOCTqc','readUInt16BE','handlers','pendingRequests','40xKfVLw','alloc','update','stringify','destroy','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','next','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','includes','once','174072NVLgoS','data','push','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','requestId','status','294740Pyowvo','disconnect','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','sec-websocket-key','send','headers','414896SJHdRC','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','close','decode'];a9_0x244a=function(){return _0x2d79f7;};return a9_0x244a();}function a9_0x4a1d(_0x339b92,_0x55c605){const _0x244ad4=a9_0x244a();return a9_0x4a1d=function(_0x4a1d39,_0x303b28){_0x4a1d39=_0x4a1d39-0x1b4;let _0x3a5463=_0x244ad4[_0x4a1d39];return _0x3a5463;},a9_0x4a1d(_0x339b92,_0x55c605);}export default class Socket{constructor(_0x1819cf){const _0x1fec3c=a9_0x4a1d;this['socket']=_0x1819cf,this['status']=_0x1fec3c(0x1f0),this[_0x1fec3c(0x1e0)]=0x5*0x3e8,this['pingTimeout']=0x2*0x3e8,this['pingRequests']={},this[_0x1fec3c(0x1cb)]=0x1,this[_0x1fec3c(0x1bc)]={},this[_0x1fec3c(0x1c8)]={},this[_0x1fec3c(0x1bb)]={},this[_0x1fec3c(0x202)]['on']('data',_0x50b747=>this['handle'](_0x50b747)),this[_0x1fec3c(0x202)]['on']('error',_0xd36e2=>this['raise'](_0x1fec3c(0x1fd),_0xd36e2)),this['socket']['on'](_0x1fec3c(0x1d5),()=>{}),this['checkHeartbeat']();const _0x21a9f1=this[_0x1fec3c(0x1da)]({'pingInterval':this['pingInterval']});this[_0x1fec3c(0x1d1)](_0x1fec3c(0x1f6),_0x21a9f1);}[a9_0x52d430(0x1ce)](){return __awaiter(this,arguments,void 0x0,function*(_0x1c517f=0x3e8,_0x4ee0a1='',_0x32edf6=0x1388){return new Promise((_0x299584,_0x2632bf)=>{const _0x18cab4=a9_0x4a1d,_0x28655b=Buffer[_0x18cab4(0x1fe)](_0x4ee0a1,_0x18cab4(0x1ef)),_0x5dd655=Buffer['alloc'](0x2+_0x28655b['length']);_0x5dd655[_0x18cab4(0x1fc)](_0x1c517f,0x0),_0x28655b[_0x18cab4(0x1f2)](_0x5dd655,0x2);const _0x25b612=_0x5dd655[_0x18cab4(0x1b5)],_0x12b086=_0x25b612<0x7e?_0x25b612:_0x25b612<0x10000?0x7e:0x7f,_0x2fc118=_0x12b086===0x7e?Buffer[_0x18cab4(0x1fe)]([0x88,0x7e,_0x25b612>>0x8&0xff,_0x25b612&0xff]):_0x12b086===0x7f?Buffer['from']([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x25b612>>0x8&0xff,_0x25b612&0xff]):Buffer[_0x18cab4(0x1fe)]([0x88,_0x25b612]),_0xfc8357=Buffer[_0x18cab4(0x1e5)]([_0x2fc118,_0x5dd655]);this['socket']['write'](_0xfc8357),this[_0x18cab4(0x1cc)]=_0x18cab4(0x1f9);if(_0x32edf6===null)this[_0x18cab4(0x1cc)]=_0x18cab4(0x1e1),this[_0x18cab4(0x202)]['end'](),this['raise'](_0x18cab4(0x1d5),{'code':_0x1c517f,'reason':_0x4ee0a1}),_0x299584();else{let _0x2affc7=!![];this[_0x18cab4(0x202)][_0x18cab4(0x1c6)]('data',_0x13c6f5=>{const _0xd00447=_0x18cab4;if(!_0x2affc7)return;_0x13c6f5[0x0]===0x88?(this['status']=_0xd00447(0x1e1),this[_0xd00447(0x202)]['end'](),this['raise']('close',{'code':_0x1c517f,'reason':_0x4ee0a1}),_0x299584()):_0x2632bf(new Error(_0xd00447(0x1b4)));}),setTimeout(()=>{const _0x5720a4=_0x18cab4;_0x2affc7=![],_0x2632bf(new Error(_0x5720a4(0x1c4))),this[_0x5720a4(0x202)][_0x5720a4(0x1e9)]();},_0x32edf6);}});});}['send'](_0x26927b,_0x3e40fa){const _0x268502=a9_0x52d430;let _0x47d69b,_0x139f3b;switch(_0x26927b){case'text':_0x47d69b=Buffer[_0x268502(0x1fe)](_0x3e40fa,_0x268502(0x1ef)),_0x139f3b=0x1;break;case _0x268502(0x1f6):_0x47d69b=_0x3e40fa,_0x139f3b=0x2;break;case _0x268502(0x1ff):_0x47d69b=_0x3e40fa,_0x139f3b=0x9;break;case'pong':_0x47d69b=_0x3e40fa,_0x139f3b=0xa;break;}const _0x24fd55=[];if(_0x47d69b[_0x268502(0x1b5)]<0x7e)_0x24fd55['push'](_0x47d69b[_0x268502(0x1b5)]);else{if(_0x47d69b[_0x268502(0x1b5)]<0x10000)_0x24fd55[_0x268502(0x1c9)](0x7e,_0x47d69b[_0x268502(0x1b5)]>>0x8&0xff,_0x47d69b[_0x268502(0x1b5)]&0xff);else{_0x24fd55[_0x268502(0x1c9)](0x7f);for(let _0x3640b6=0x7;_0x3640b6>=0x0;_0x3640b6--)_0x24fd55[_0x268502(0x1c9)](_0x47d69b[_0x268502(0x1b5)]>>_0x3640b6*0x8&0xff);}}const _0x2cb584=Buffer[_0x268502(0x1e5)]([Buffer[_0x268502(0x1fe)]([0x80|_0x139f3b,..._0x24fd55]),_0x47d69b]);this[_0x268502(0x202)][_0x268502(0x1e3)](_0x2cb584);}[a9_0x52d430(0x1e8)](_0x28b92e,_0x564236,_0x4defda,_0x582a15=0x32*0x3e8){const _0x2e8cc1=a9_0x52d430;if(this[_0x2e8cc1(0x202)]==undefined||this[_0x2e8cc1(0x1cc)]!==_0x2e8cc1(0x1ee))throw new Error(_0x2e8cc1(0x1d7));if(['handshake',_0x2e8cc1(0x1ee),'error',_0x2e8cc1(0x1d5)][_0x2e8cc1(0x1c5)](_0x28b92e))throw new Error(_0x2e8cc1(0x1eb));const _0x57f343=_0x4defda==undefined?0x0:this[_0x2e8cc1(0x1cb)],_0x3e3599=Buffer[_0x2e8cc1(0x1fe)](_0x28b92e,_0x2e8cc1(0x1ef));if(_0x3e3599['length']>0xff)throw new Error(_0x2e8cc1(0x1c2));if(_0x4defda!=undefined){this[_0x2e8cc1(0x1cb)]=(this[_0x2e8cc1(0x1cb)]+0x1)%0x80||0x1;const _0x287f9b=setTimeout(()=>{const _0x19355b=_0x2e8cc1;delete this[_0x19355b(0x1bc)][_0x57f343],_0x4defda(new Error(_0x19355b(0x1d8)));},_0x582a15);this['pendingRequests'][_0x57f343]=_0x5b2bb1=>{if(!(_0x5b2bb1 instanceof Error))clearTimeout(_0x287f9b);_0x4defda(_0x5b2bb1);};}const _0x15bd39=Buffer[_0x2e8cc1(0x1e5)]([Buffer[_0x2e8cc1(0x1fe)]([_0x57f343|0x80,_0x3e3599['length']]),_0x3e3599,this[_0x2e8cc1(0x1da)](_0x564236)]);this[_0x2e8cc1(0x1d1)](_0x2e8cc1(0x1f6),_0x15bd39);}['handle'](_0x166cfb){const _0x281ee0=a9_0x52d430;var _0x1675bb;const _0x2db020=_0x166cfb[0x0],_0x337d99=(_0x2db020&0x80)!==0x0,_0x497703=_0x2db020&0xf,_0x219ead=_0x166cfb[0x1],_0x1e8c73=(_0x219ead&0x80)!==0x0;let _0xfa90a7=_0x219ead&0x7f,_0x1a0758=0x2;if(_0xfa90a7===0x7e)_0xfa90a7=_0x166cfb[_0x281ee0(0x1ba)](_0x1a0758),_0x1a0758+=0x2;else _0xfa90a7===0x7f&&(_0xfa90a7=Number(_0x166cfb['readBigUInt64BE'](_0x1a0758)),_0x1a0758+=0x8);const _0x1ac1b8=_0x1e8c73?_0x166cfb[_0x281ee0(0x203)](_0x1a0758,_0x1a0758+0x4):Buffer[_0x281ee0(0x1be)](0x0);if(_0x1e8c73)_0x1a0758+=0x4;let _0x4af744=_0x166cfb['slice'](_0x1a0758,_0x1a0758+_0xfa90a7);if(_0x1e8c73){const _0x103463=Buffer[_0x281ee0(0x1be)](_0x4af744['length']);for(let _0x429c0f=0x0;_0x429c0f<_0x4af744[_0x281ee0(0x1b5)];_0x429c0f++)_0x103463[_0x429c0f]=_0x4af744[_0x429c0f]^_0x1ac1b8[_0x429c0f%0x4];_0x4af744=_0x103463;}switch(_0x497703){case 0x1:this[_0x281ee0(0x1de)](_0x281ee0(0x1fd),new Error('Received\x20non-standard\x20text\x20message:\x20'+_0x4af744[_0x281ee0(0x1e7)]('utf-8')));break;case 0x2:{if(this[_0x281ee0(0x1cc)]===_0x281ee0(0x1f0)){const _0x495e76=this[_0x281ee0(0x1d6)](_0x4af744);this[_0x281ee0(0x1de)](_0x281ee0(0x1f0),_0x495e76),this[_0x281ee0(0x1cc)]=_0x281ee0(0x1ee),this[_0x281ee0(0x1d1)]('binary',Buffer['alloc'](0x0));return;}const _0x335ae0=_0x4af744[_0x281ee0(0x1f8)](0x0),_0x5cbad5=_0x335ae0&0x7f,_0x4a4bac=(_0x335ae0&0x80)!==0x0;if(_0x4a4bac){const _0x750ad3=_0x4af744['readUInt8'](0x1),_0xfa0a11=_0x4af744['slice'](0x2,0x2+_0x750ad3)['toString'](_0x281ee0(0x1ef));if([_0x281ee0(0x1f0),'open',_0x281ee0(0x1fd),'close'][_0x281ee0(0x1c5)](_0xfa0a11)){this[_0x281ee0(0x1de)](_0x281ee0(0x1fd),new Error('Received\x20a\x20request\x20with\x20eventName\x20'+_0xfa0a11+';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?'));return;}const _0x40ae76=this['decode'](_0x4af744['slice'](0x2+_0x750ad3)),_0x14c822=(_0x1675bb=this[_0x281ee0(0x1bb)][_0xfa0a11])!==null&&_0x1675bb!==void 0x0?_0x1675bb:[];let _0x53e850=![];for(const _0x298c5c of _0x14c822){const _0x45e603=_0x298c5c['call'](undefined,_0x40ae76);if(!_0x53e850&&_0x45e603!==undefined&&_0x5cbad5!==0x0){_0x53e850=!![];const _0x194306=Buffer['concat']([Buffer[_0x281ee0(0x1fe)]([_0x5cbad5&0x7f]),this['encode'](_0x45e603)]);this[_0x281ee0(0x1d1)](_0x281ee0(0x1f6),_0x194306);}}if(!_0x53e850&&_0x5cbad5!==0x0)this[_0x281ee0(0x1de)]('error',new Error(_0x281ee0(0x1df)+_0xfa0a11+'\x20but\x20no\x20handler\x20return\x20a\x20result'));return;}const _0x3b9c55=this[_0x281ee0(0x1bc)][_0x5cbad5];if(_0x3b9c55==undefined){this[_0x281ee0(0x1de)]('error',new Error(_0x281ee0(0x1ed)+_0x5cbad5+'\x20but\x20no\x20pending\x20request\x20was\x20found'));return;}const _0x4125c1=this['decode'](_0x4af744['slice'](0x1));_0x3b9c55[_0x281ee0(0x1f5)](undefined,_0x4125c1);break;}case 0x9:this[_0x281ee0(0x1d1)](_0x281ee0(0x1fb),_0x4af744);break;case 0xa:const _0x5b16dc=_0x4af744[_0x281ee0(0x1e7)]('utf-8'),_0x162704=this[_0x281ee0(0x1e6)][_0x5b16dc];if(_0x162704==undefined){this[_0x281ee0(0x1de)](_0x281ee0(0x1fd),new Error(_0x281ee0(0x1ea)));return;}_0x162704();break;case 0x8:if(this['status']===_0x281ee0(0x1f9))return;let _0xc74b1d=0x3e8,_0xd7841e='';_0x4af744[_0x281ee0(0x1b5)]>=0x2&&(_0xc74b1d=_0x4af744['readUInt16BE'](0x0),_0xd7841e=_0x4af744[_0x281ee0(0x203)](0x2)[_0x281ee0(0x1e7)](_0x281ee0(0x1ef)));this['disconnect'](_0xc74b1d,_0xd7841e,null);break;default:this[_0x281ee0(0x1de)](_0x281ee0(0x1fd),new Error(_0x281ee0(0x1fa)+_0x497703));}}[a9_0x52d430(0x1da)](_0x2a5a8e){const _0x5de4ad=a9_0x52d430;return Buffer[_0x5de4ad(0x1fe)](JSON[_0x5de4ad(0x1c0)](_0x2a5a8e),'utf-8');}[a9_0x52d430(0x1d6)](_0x5e8206){const _0x356b93=a9_0x52d430;return JSON[_0x356b93(0x1b6)](_0x5e8206[_0x356b93(0x1e7)](_0x356b93(0x1ef)));}[a9_0x52d430(0x200)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0xc0879,_0x4fe71a)=>{const _0x170315=a9_0x4a1d,_0x2c691c=a9_0x573cca[_0x170315(0x1db)](),_0x35a76d=setTimeout(()=>{const _0x462d4c=_0x170315;delete this[_0x462d4c(0x1e6)][_0x2c691c],this[_0x462d4c(0x1ce)](0x3e8,'',null),_0xc0879(![]);},this['pingTimeout']);this['pingRequests'][_0x2c691c]=()=>{const _0x5313fa=_0x170315;delete this[_0x5313fa(0x1e6)][_0x2c691c],clearTimeout(_0x35a76d),_0xc0879(!![]),setTimeout(()=>{const _0x129f5a=_0x5313fa;if(this[_0x129f5a(0x1cc)]!==_0x129f5a(0x1ee))return;this[_0x129f5a(0x200)]();},this[_0x5313fa(0x1e0)]);},this[_0x170315(0x1d1)]('ping',Buffer[_0x170315(0x1fe)](_0x2c691c));});});}['on'](_0x3d505e,_0x546132){const _0x5d8be4=a9_0x52d430;if(this[_0x5d8be4(0x1bb)][_0x3d505e]==undefined)this[_0x5d8be4(0x1bb)][_0x3d505e]=[];this[_0x5d8be4(0x1bb)][_0x3d505e][_0x5d8be4(0x1c9)](_0x546132);}[a9_0x52d430(0x1e2)](_0x1a462e,_0x30f4c9){const _0x6486aa=a9_0x52d430;if(_0x30f4c9==undefined){this[_0x6486aa(0x1bb)][_0x1a462e]=[];return;}const _0x25a324=this[_0x6486aa(0x1bb)][_0x1a462e],_0x29c552=(_0x25a324!==null&&_0x25a324!==void 0x0?_0x25a324:[])['findIndex'](_0x7b5e44=>_0x7b5e44===_0x30f4c9);if(_0x29c552===-0x1)throw new Error(_0x6486aa(0x1cf)+_0x1a462e+_0x6486aa(0x1ca));_0x25a324[_0x6486aa(0x1b8)](_0x29c552,0x1);}[a9_0x52d430(0x1de)](_0x4d07a9,_0x485f8a){const _0x40eaca=a9_0x52d430;var _0x49bf16;const _0x194db2=(_0x49bf16=this[_0x40eaca(0x1bb)][_0x4d07a9])!==null&&_0x49bf16!==void 0x0?_0x49bf16:[];for(const _0x339ff8 of _0x194db2){_0x339ff8(_0x485f8a);}}static[a9_0x52d430(0x1f1)](_0x4155c3,_0x4d4e9c){const _0x3acc14=a9_0x52d430,_0x50b424=_0x4155c3[_0x3acc14(0x1d2)][_0x3acc14(0x1d0)];if(_0x50b424==undefined)return _0x4d4e9c[_0x3acc14(0x1c1)](),null;const _0x1bbee9=a9_0x573cca['createHash'](_0x3acc14(0x1b7));_0x1bbee9[_0x3acc14(0x1bf)](_0x50b424+_0x3acc14(0x1d4));const _0x3a318e=_0x1bbee9['digest'](_0x3acc14(0x1dc)),_0x1a470f=[_0x3acc14(0x1f7),_0x3acc14(0x1f3),'Connection:\x20Upgrade',_0x3acc14(0x204)+_0x3a318e];return _0x4d4e9c[_0x3acc14(0x1e3)](_0x1a470f[_0x3acc14(0x1dd)]('\x0d\x0a')+_0x3acc14(0x1ec)),new Socket(_0x4d4e9c);}}