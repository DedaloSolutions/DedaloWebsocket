const a11_0x24579e=a11_0x6961;function a11_0x6961(_0x20cba9,_0x2de778){const _0x2a5c0a=a11_0x2a5c();return a11_0x6961=function(_0x69617a,_0x3959d1){_0x69617a=_0x69617a-0x15c;let _0x1a0b9f=_0x2a5c0a[_0x69617a];return _0x1a0b9f;},a11_0x6961(_0x20cba9,_0x2de778);}function a11_0x2a5c(){const _0xdb49fc=['Upgrade:\x20websocket','binary','then','utf-8','handlers','853308PdsfOv','destroy','base64','slice','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','handshake','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','decode','digest','copy','Received\x20a\x20response\x20for\x20the\x20id\x20','from','concat','data','__awaiter','pingInterval','socket',';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?','checkHeartbeat','2027778bACMhs','open','11308420IUgxjB','length','pingRequests','splice','Received\x20message\x20with\x20unsupported\x20opcode:\x20','once','end','close','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','The\x20websocket\x20is\x20not\x20connected','push','toString','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','update','throw','headers','Timeout','next','closed','raise','\x20but\x20no\x20handler\x20return\x20a\x20result','3342908Xwmtyt','8SxbCXR','value','stringify','includes','\x0d\x0a\x0d\x0a','done','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping','disconnect','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','apply','4DRtbNi','2085740LtEYuT','fromUpgradeRequest','text','Received\x20non-standard\x20text\x20message:\x20','closing','Sec-WebSocket-Accept:\x20','requestId','createHash','7gsNjDg','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','call','Connection:\x20Upgrade','alloc','emit','ping','readUInt16BE','pong','status','195717onlLTD','readBigUInt64BE','1046349gzowBu','error','handle','writeUInt16BE','encode','pendingRequests','write','readUInt8','send'];a11_0x2a5c=function(){return _0xdb49fc;};return a11_0x2a5c();}(function(_0x1c3d90,_0x5ee834){const _0x31861e=a11_0x6961,_0x3a4f6d=_0x1c3d90();while(!![]){try{const _0x5a1e9a=-parseInt(_0x31861e(0x17f))/0x1+-parseInt(_0x31861e(0x15c))/0x2*(-parseInt(_0x31861e(0x16f))/0x3)+-parseInt(_0x31861e(0x1a9))/0x4+parseInt(_0x31861e(0x15d))/0x5+parseInt(_0x31861e(0x192))/0x6*(parseInt(_0x31861e(0x165))/0x7)+-parseInt(_0x31861e(0x1aa))/0x8*(-parseInt(_0x31861e(0x171))/0x9)+parseInt(_0x31861e(0x194))/0xa;if(_0x5a1e9a===_0x5ee834)break;else _0x3a4f6d['push'](_0x3a4f6d['shift']());}catch(_0x13ea9d){_0x3a4f6d['push'](_0x3a4f6d['shift']());}}}(a11_0x2a5c,0x6c509));var __awaiter=this&&this[a11_0x24579e(0x18d)]||function(_0x21d906,_0x5b7fe1,_0x58a806,_0x354d7c){function _0x118824(_0x28ac96){return _0x28ac96 instanceof _0x58a806?_0x28ac96:new _0x58a806(function(_0xfbccd5){_0xfbccd5(_0x28ac96);});}return new(_0x58a806||(_0x58a806=Promise))(function(_0xc6cc06,_0x2cdd1e){const _0xd20832=a11_0x6961;function _0x43f730(_0x169419){try{_0x2e477f(_0x354d7c['next'](_0x169419));}catch(_0x56938d){_0x2cdd1e(_0x56938d);}}function _0x1ea7a4(_0x563aaf){const _0x5e12a5=a11_0x6961;try{_0x2e477f(_0x354d7c[_0x5e12a5(0x1a2)](_0x563aaf));}catch(_0xc206bf){_0x2cdd1e(_0xc206bf);}}function _0x2e477f(_0x53f535){const _0x3e7b00=a11_0x6961;_0x53f535[_0x3e7b00(0x1af)]?_0xc6cc06(_0x53f535[_0x3e7b00(0x1ab)]):_0x118824(_0x53f535[_0x3e7b00(0x1ab)])[_0x3e7b00(0x17c)](_0x43f730,_0x1ea7a4);}_0x2e477f((_0x354d7c=_0x354d7c[_0xd20832(0x1b3)](_0x21d906,_0x5b7fe1||[]))[_0xd20832(0x1a5)]());});};import a11_0x17aec7 from'crypto';export default class Socket{constructor(_0x45c16a){const _0x11e680=a11_0x24579e;this[_0x11e680(0x18f)]=_0x45c16a,this[_0x11e680(0x16e)]=_0x11e680(0x184),this['pingInterval']=0x5*0x3e8,this['pingTimeout']=0x2*0x3e8,this[_0x11e680(0x196)]={},this[_0x11e680(0x163)]=0x1,this[_0x11e680(0x176)]={},this[_0x11e680(0x18c)]={},this[_0x11e680(0x17e)]={},this[_0x11e680(0x18f)]['on'](_0x11e680(0x18c),_0x1da58c=>this['handle'](_0x1da58c)),this[_0x11e680(0x18f)]['on'](_0x11e680(0x172),_0x725359=>this['raise'](_0x11e680(0x172),_0x725359)),this['socket']['on'](_0x11e680(0x19b),()=>{}),this['checkHeartbeat']();const _0x3d14d2=this[_0x11e680(0x175)]({'pingInterval':this[_0x11e680(0x18e)]});this[_0x11e680(0x179)](_0x11e680(0x17b),_0x3d14d2);}[a11_0x24579e(0x1b1)](){return __awaiter(this,arguments,void 0x0,function*(_0x23c80f=0x3e8,_0x39f730='',_0x21899a=0x1388){return new Promise((_0x4dcd4b,_0x45693d)=>{const _0x4aae60=a11_0x6961,_0x150cdf=Buffer[_0x4aae60(0x18a)](_0x39f730,'utf-8'),_0x1818d4=Buffer[_0x4aae60(0x169)](0x2+_0x150cdf[_0x4aae60(0x195)]);_0x1818d4[_0x4aae60(0x174)](_0x23c80f,0x0),_0x150cdf[_0x4aae60(0x188)](_0x1818d4,0x2);const _0x1973c0=_0x1818d4[_0x4aae60(0x195)],_0x414836=_0x1973c0<0x7e?_0x1973c0:_0x1973c0<0x10000?0x7e:0x7f,_0x361f7e=_0x414836===0x7e?Buffer[_0x4aae60(0x18a)]([0x88,0x7e,_0x1973c0>>0x8&0xff,_0x1973c0&0xff]):_0x414836===0x7f?Buffer['from']([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x1973c0>>0x8&0xff,_0x1973c0&0xff]):Buffer['from']([0x88,_0x1973c0]),_0x5cf209=Buffer[_0x4aae60(0x18b)]([_0x361f7e,_0x1818d4]);this['socket'][_0x4aae60(0x177)](_0x5cf209),this[_0x4aae60(0x16e)]='closing';if(_0x21899a===null)this[_0x4aae60(0x16e)]=_0x4aae60(0x1a6),this[_0x4aae60(0x18f)]['end'](),this[_0x4aae60(0x1a7)](_0x4aae60(0x19b),{'code':_0x23c80f,'reason':_0x39f730}),_0x4dcd4b();else{let _0x319048=!![];this[_0x4aae60(0x18f)][_0x4aae60(0x199)](_0x4aae60(0x18c),_0x50d18a=>{const _0x4610cd=_0x4aae60;if(!_0x319048)return;_0x50d18a[0x0]===0x88?(this['status']='closed',this[_0x4610cd(0x18f)][_0x4610cd(0x19a)](),this['raise']('close',{'code':_0x23c80f,'reason':_0x39f730}),_0x4dcd4b()):_0x45693d(new Error('Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.'));}),setTimeout(()=>{const _0x109ff2=_0x4aae60;_0x319048=![],_0x45693d(new Error(_0x109ff2(0x19c))),this[_0x109ff2(0x18f)][_0x109ff2(0x19a)]();},_0x21899a);}});});}['send'](_0x3d6e25,_0x5e2ebb){const _0xd45ee8=a11_0x24579e;let _0x3e4159,_0x3f847b;switch(_0x3d6e25){case _0xd45ee8(0x15f):_0x3e4159=Buffer[_0xd45ee8(0x18a)](_0x5e2ebb,_0xd45ee8(0x17d)),_0x3f847b=0x1;break;case'binary':_0x3e4159=_0x5e2ebb,_0x3f847b=0x2;break;case _0xd45ee8(0x16b):_0x3e4159=_0x5e2ebb,_0x3f847b=0x9;break;case'pong':_0x3e4159=_0x5e2ebb,_0x3f847b=0xa;break;}const _0x363259=[];if(_0x3e4159['length']<0x7e)_0x363259['push'](_0x3e4159[_0xd45ee8(0x195)]);else{if(_0x3e4159[_0xd45ee8(0x195)]<0x10000)_0x363259[_0xd45ee8(0x19e)](0x7e,_0x3e4159['length']>>0x8&0xff,_0x3e4159[_0xd45ee8(0x195)]&0xff);else{_0x363259[_0xd45ee8(0x19e)](0x7f);for(let _0xea1e07=0x7;_0xea1e07>=0x0;_0xea1e07--)_0x363259['push'](_0x3e4159[_0xd45ee8(0x195)]>>_0xea1e07*0x8&0xff);}}const _0x4c802c=Buffer['concat']([Buffer['from']([0x80|_0x3f847b,..._0x363259]),_0x3e4159]);this[_0xd45ee8(0x18f)][_0xd45ee8(0x177)](_0x4c802c);}[a11_0x24579e(0x16a)](_0x71f2da,_0x4e9a79,_0x4e64a1,_0x469a38=0x32*0x3e8){const _0x3d1390=a11_0x24579e;if(this[_0x3d1390(0x18f)]==undefined||this[_0x3d1390(0x16e)]!==_0x3d1390(0x193))throw new Error(_0x3d1390(0x19d));if(['handshake',_0x3d1390(0x193),'error',_0x3d1390(0x19b)][_0x3d1390(0x1ad)](_0x71f2da))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close');const _0x1d5334=_0x4e64a1==undefined?0x0:this[_0x3d1390(0x163)],_0x5cd740=Buffer[_0x3d1390(0x18a)](_0x71f2da,'utf-8');if(_0x5cd740['length']>0xff)throw new Error(_0x3d1390(0x183));if(_0x4e64a1!=undefined){this['requestId']=(this[_0x3d1390(0x163)]+0x1)%0x80||0x1;const _0x5e72b7=setTimeout(()=>{const _0xdfb67f=_0x3d1390;delete this[_0xdfb67f(0x176)][_0x1d5334],_0x4e64a1(new Error(_0xdfb67f(0x1a4)));},_0x469a38);this['pendingRequests'][_0x1d5334]=_0xd0096f=>{if(!(_0xd0096f instanceof Error))clearTimeout(_0x5e72b7);_0x4e64a1(_0xd0096f);};}const _0x167495=Buffer[_0x3d1390(0x18b)]([Buffer['from']([_0x1d5334|0x80,_0x5cd740[_0x3d1390(0x195)]]),_0x5cd740,this[_0x3d1390(0x175)](_0x4e9a79)]);this[_0x3d1390(0x179)](_0x3d1390(0x17b),_0x167495);}[a11_0x24579e(0x173)](_0x511636){const _0x280187=a11_0x24579e;var _0x3da5c4,_0x4ccbd7;const _0x463bdf=_0x511636[0x0],_0x2c0375=(_0x463bdf&0x80)!==0x0,_0x3ba57b=_0x463bdf&0xf,_0x258e26=_0x511636[0x1],_0xfd755f=(_0x258e26&0x80)!==0x0;let _0x5566c6=_0x258e26&0x7f,_0x2f8b74=0x2;if(_0x5566c6===0x7e)_0x5566c6=_0x511636[_0x280187(0x16c)](_0x2f8b74),_0x2f8b74+=0x2;else _0x5566c6===0x7f&&(_0x5566c6=Number(_0x511636[_0x280187(0x170)](_0x2f8b74)),_0x2f8b74+=0x8);const _0x51c345=_0xfd755f?_0x511636['slice'](_0x2f8b74,_0x2f8b74+0x4):Buffer[_0x280187(0x169)](0x0);if(_0xfd755f)_0x2f8b74+=0x4;let _0x5a8e1e=_0x511636['slice'](_0x2f8b74,_0x2f8b74+_0x5566c6);if(_0xfd755f){const _0x128857=Buffer[_0x280187(0x169)](_0x5a8e1e[_0x280187(0x195)]);for(let _0x49b086=0x0;_0x49b086<_0x5a8e1e['length'];_0x49b086++)_0x128857[_0x49b086]=_0x5a8e1e[_0x49b086]^_0x51c345[_0x49b086%0x4];_0x5a8e1e=_0x128857;}switch(_0x3ba57b){case 0x1:this[_0x280187(0x1a7)](_0x280187(0x172),new Error(_0x280187(0x160)+_0x5a8e1e[_0x280187(0x19f)](_0x280187(0x17d))));break;case 0x2:{if(this['status']===_0x280187(0x184)){const _0x3be774=this[_0x280187(0x186)](_0x5a8e1e);this[_0x280187(0x1a7)](_0x280187(0x184),_0x3be774),this[_0x280187(0x16e)]='open',this['send'](_0x280187(0x17b),Buffer['alloc'](0x0));return;}const _0x2e58ee=_0x5a8e1e[_0x280187(0x178)](0x0),_0x574486=_0x2e58ee&0x7f,_0x57e70f=(_0x2e58ee&0x80)!==0x0;if(_0x57e70f){const _0x618cd2=_0x5a8e1e[_0x280187(0x178)](0x1),_0x454483=_0x5a8e1e[_0x280187(0x182)](0x2,0x2+_0x618cd2)[_0x280187(0x19f)](_0x280187(0x17d));if([_0x280187(0x184),_0x280187(0x193),_0x280187(0x172),_0x280187(0x19b),'*']['includes'](_0x454483)){this[_0x280187(0x1a7)]('error',new Error('Received\x20a\x20request\x20with\x20eventName\x20'+_0x454483+_0x280187(0x190)));return;}const _0x513146=this[_0x280187(0x186)](_0x5a8e1e[_0x280187(0x182)](0x2+_0x618cd2)),_0x59cad9=(_0x3da5c4=this['handlers'][_0x454483])!==null&&_0x3da5c4!==void 0x0?_0x3da5c4:[];let _0x45d5a8=![];for(const _0xb1c91a of _0x59cad9){const _0x3c7e92=_0xb1c91a[_0x280187(0x167)](undefined,_0x513146);if(!_0x45d5a8&&_0x3c7e92!==undefined&&_0x574486!==0x0){_0x45d5a8=!![];const _0x244139=Buffer['concat']([Buffer['from']([_0x574486&0x7f]),this[_0x280187(0x175)](_0x3c7e92)]);this['send'](_0x280187(0x17b),_0x244139);}}const _0x2744ef=(_0x4ccbd7=this['handlers']['*'])!==null&&_0x4ccbd7!==void 0x0?_0x4ccbd7:[];for(const _0x4c0bd7 of _0x2744ef)_0x4c0bd7[_0x280187(0x167)](undefined,_0x454483,_0x513146);if(!_0x45d5a8&&_0x574486!==0x0)this['raise'](_0x280187(0x172),new Error(_0x280187(0x1a0)+_0x454483+_0x280187(0x1a8)));return;}const _0x142b44=this[_0x280187(0x176)][_0x574486];if(_0x142b44==undefined){this[_0x280187(0x1a7)](_0x280187(0x172),new Error(_0x280187(0x189)+_0x574486+'\x20but\x20no\x20pending\x20request\x20was\x20found'));return;}const _0x106de1=this[_0x280187(0x186)](_0x5a8e1e[_0x280187(0x182)](0x1));_0x142b44[_0x280187(0x167)](undefined,_0x106de1);break;}case 0x9:this[_0x280187(0x179)](_0x280187(0x16d),_0x5a8e1e);break;case 0xa:const _0x1bbeac=_0x5a8e1e[_0x280187(0x19f)](_0x280187(0x17d)),_0xcc8030=this[_0x280187(0x196)][_0x1bbeac];if(_0xcc8030==undefined){this[_0x280187(0x1a7)]('error',new Error(_0x280187(0x1b0)));return;}_0xcc8030();break;case 0x8:if(this[_0x280187(0x16e)]===_0x280187(0x161))return;let _0x1d217c=0x3e8,_0x4f64e2='';_0x5a8e1e[_0x280187(0x195)]>=0x2&&(_0x1d217c=_0x5a8e1e[_0x280187(0x16c)](0x0),_0x4f64e2=_0x5a8e1e['slice'](0x2)['toString']('utf-8'));this[_0x280187(0x1b1)](_0x1d217c,_0x4f64e2,null);break;default:this['raise'](_0x280187(0x172),new Error(_0x280187(0x198)+_0x3ba57b));}}['encode'](_0x1f5776){const _0x2ea8d1=a11_0x24579e;return Buffer[_0x2ea8d1(0x18a)](JSON[_0x2ea8d1(0x1ac)](_0x1f5776),_0x2ea8d1(0x17d));}[a11_0x24579e(0x186)](_0x406795){const _0x59906f=a11_0x24579e;return JSON['parse'](_0x406795[_0x59906f(0x19f)](_0x59906f(0x17d)));}[a11_0x24579e(0x191)](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0xd1b277,_0x16f8fe)=>{const _0x2c1538=a11_0x6961,_0x72866e=a11_0x17aec7['randomUUID'](),_0x5b7c90=setTimeout(()=>{const _0x4efe52=a11_0x6961;delete this[_0x4efe52(0x196)][_0x72866e],this[_0x4efe52(0x1b1)](0x3e8,'',null),_0xd1b277(![]);},this['pingTimeout']);this[_0x2c1538(0x196)][_0x72866e]=()=>{delete this['pingRequests'][_0x72866e],clearTimeout(_0x5b7c90),_0xd1b277(!![]),setTimeout(()=>{const _0xb37be5=a11_0x6961;if(this[_0xb37be5(0x16e)]!==_0xb37be5(0x193))return;this[_0xb37be5(0x191)]();},this['pingInterval']);},this[_0x2c1538(0x179)](_0x2c1538(0x16b),Buffer[_0x2c1538(0x18a)](_0x72866e));});});}['on'](_0x35da99,_0x5cda99){const _0x120638=a11_0x24579e;if(this['handlers'][_0x35da99]==undefined)this[_0x120638(0x17e)][_0x35da99]=[];this[_0x120638(0x17e)][_0x35da99][_0x120638(0x19e)](_0x5cda99);}['off'](_0x314f61,_0x3aae2f){const _0x6874ec=a11_0x24579e;if(_0x3aae2f==undefined){this[_0x6874ec(0x17e)][_0x314f61]=[];return;}const _0x92a1ab=this['handlers'][_0x314f61],_0x1c6c0a=(_0x92a1ab!==null&&_0x92a1ab!==void 0x0?_0x92a1ab:[])['findIndex'](_0x37949b=>_0x37949b===_0x3aae2f);if(_0x1c6c0a===-0x1)throw new Error(_0x6874ec(0x1b2)+_0x314f61+_0x6874ec(0x166));_0x92a1ab[_0x6874ec(0x197)](_0x1c6c0a,0x1);}['raise'](_0x4e846d,_0x5485ff){const _0x408996=a11_0x24579e;var _0xc01862,_0x78ddec;const _0x9a7473=(_0xc01862=this[_0x408996(0x17e)][_0x4e846d])!==null&&_0xc01862!==void 0x0?_0xc01862:[];for(const _0x56b291 of _0x9a7473)_0x56b291(_0x5485ff);const _0x4e291d=(_0x78ddec=this['handlers']['*'])!==null&&_0x78ddec!==void 0x0?_0x78ddec:[];for(const _0x2099fb of _0x4e291d)_0x2099fb(_0x4e846d,_0x5485ff);}static[a11_0x24579e(0x15e)](_0x256e41,_0x26ff2f){const _0x14adb0=a11_0x24579e,_0x5e191d=_0x256e41[_0x14adb0(0x1a3)]['sec-websocket-key'];if(_0x5e191d==undefined)return _0x26ff2f[_0x14adb0(0x180)](),null;const _0x4e2b54=a11_0x17aec7[_0x14adb0(0x164)]('sha1');_0x4e2b54[_0x14adb0(0x1a1)](_0x5e191d+_0x14adb0(0x185));const _0x23a8da=_0x4e2b54[_0x14adb0(0x187)](_0x14adb0(0x181)),_0x485f07=['HTTP/1.1\x20101\x20Switching\x20Protocols',_0x14adb0(0x17a),_0x14adb0(0x168),_0x14adb0(0x162)+_0x23a8da];return _0x26ff2f[_0x14adb0(0x177)](_0x485f07['join']('\x0d\x0a')+_0x14adb0(0x1ae)),new Socket(_0x26ff2f);}}