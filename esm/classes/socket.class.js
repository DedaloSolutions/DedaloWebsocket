const a9_0x254430=a9_0x2c72;(function(_0x586ef5,_0x2a8a00){const _0x1e7154=a9_0x2c72,_0x3bd8ce=_0x586ef5();while(!![]){try{const _0x237136=-parseInt(_0x1e7154(0x1fb))/0x1+parseInt(_0x1e7154(0x1f9))/0x2+parseInt(_0x1e7154(0x1d2))/0x3+parseInt(_0x1e7154(0x1d5))/0x4*(parseInt(_0x1e7154(0x1b2))/0x5)+parseInt(_0x1e7154(0x1bf))/0x6+parseInt(_0x1e7154(0x204))/0x7*(-parseInt(_0x1e7154(0x1f0))/0x8)+-parseInt(_0x1e7154(0x1d3))/0x9;if(_0x237136===_0x2a8a00)break;else _0x3bd8ce['push'](_0x3bd8ce['shift']());}catch(_0x1320b3){_0x3bd8ce['push'](_0x3bd8ce['shift']());}}}(a9_0x1d81,0x407f2));var __awaiter=this&&this[a9_0x254430(0x1e4)]||function(_0x33006b,_0x36f5a8,_0x1a1ae3,_0x1286ea){function _0x46e3aa(_0x8fc175){return _0x8fc175 instanceof _0x1a1ae3?_0x8fc175:new _0x1a1ae3(function(_0x1fe7fd){_0x1fe7fd(_0x8fc175);});}return new(_0x1a1ae3||(_0x1a1ae3=Promise))(function(_0x40979b,_0x1789b6){const _0xc5f6a=a9_0x2c72;function _0x10ac40(_0x582c9e){const _0x24d9fd=a9_0x2c72;try{_0x558b26(_0x1286ea[_0x24d9fd(0x1d8)](_0x582c9e));}catch(_0x42fc97){_0x1789b6(_0x42fc97);}}function _0x131dba(_0x466610){const _0x201ea8=a9_0x2c72;try{_0x558b26(_0x1286ea[_0x201ea8(0x1b5)](_0x466610));}catch(_0x18cfd6){_0x1789b6(_0x18cfd6);}}function _0x558b26(_0x2c12aa){const _0x28c667=a9_0x2c72;_0x2c12aa[_0x28c667(0x205)]?_0x40979b(_0x2c12aa[_0x28c667(0x1cf)]):_0x46e3aa(_0x2c12aa[_0x28c667(0x1cf)])[_0x28c667(0x1e8)](_0x10ac40,_0x131dba);}_0x558b26((_0x1286ea=_0x1286ea[_0xc5f6a(0x1fc)](_0x33006b,_0x36f5a8||[]))[_0xc5f6a(0x1d8)]());});};function a9_0x2c72(_0xa1fef2,_0x3c9975){const _0x1d81f4=a9_0x1d81();return a9_0x2c72=function(_0x2c72f0,_0x38cbcc){_0x2c72f0=_0x2c72f0-0x1af;let _0x2d5210=_0x1d81f4[_0x2c72f0];return _0x2d5210;},a9_0x2c72(_0xa1fef2,_0x3c9975);}import a9_0x476e6d from'crypto';function a9_0x1d81(){const _0x1674b8=['The\x20websocket\x20is\x20not\x20connected','594789NlhCwN','4321476njRBLC','writeUInt16BE','7884rEspkK','binary','toString','next','write','Received\x20non-standard\x20text\x20message:\x20','send','slice','parse','Received\x20a\x20request\x20with\x20eventName\x20','Upgrade:\x20websocket','pingTimeout','close','258EAFA5-E914-47DA-95CA-C5AB0DC85B11','Failed\x20to\x20receive\x20valid\x20close\x20frame\x20from\x20server.','__awaiter','handlers','handle','createHash','then','status','Sec-WebSocket-Accept:\x20','ping','\x20but\x20no\x20pending\x20request\x20was\x20found','splice','encode','Timeout\x20waiting\x20for\x20close\x20frame\x20acknowledgment.','888FjqOBI','data','concat','raise','pingRequests','disconnect','closing','handshake',';\x20This\x20is\x20non-standard:\x20someone\x20is\x20trying\x20to\x20hack\x20the\x20protocol?','671374zMzcJO','decode','229869wMvbZO','apply','Received\x20a\x20request\x20with\x20callback\x20for\x20the\x20event\x20','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handskake,\x20open,\x20error\x20or\x20close','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','call','update','from','alloc','10836cyZvhO','done','utf-8','socket','pong','requestId','1095cbfFpy','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','pingInterval','throw','Timeout','end','error','join','Received\x20a\x20response\x20for\x20the\x20id\x20','length','findIndex','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','base64','1082640vFcVaq','pendingRequests','checkHeartbeat','stringify','Connection:\x20Upgrade','readUInt16BE','open','push','\x0d\x0a\x0d\x0a','destroy','readUInt8','digest','closed','randomUUID','includes','locals','value','Received\x20a\x20pong,\x20but\x20it\x20doesn\x27t\x20match\x20any\x20ping'];a9_0x1d81=function(){return _0x1674b8;};return a9_0x1d81();}export default class Socket{constructor(_0x66792d){const _0x7c0f73=a9_0x254430;this[_0x7c0f73(0x1af)]=_0x66792d,this['status']=_0x7c0f73(0x1f7),this['pingInterval']=0x5*0x3e8,this['pingTimeout']=0x2*0x3e8,this[_0x7c0f73(0x1f4)]={},this[_0x7c0f73(0x1b1)]=0x1,this[_0x7c0f73(0x1c0)]={},this[_0x7c0f73(0x1ce)]={},this['handlers']={},this['socket']['on'](_0x7c0f73(0x1f1),_0x3c8ded=>this[_0x7c0f73(0x1e6)](_0x3c8ded)),this[_0x7c0f73(0x1af)]['on'](_0x7c0f73(0x1b8),_0x4437c7=>this['raise'](_0x7c0f73(0x1b8),_0x4437c7)),this[_0x7c0f73(0x1af)]['on'](_0x7c0f73(0x1e1),()=>{}),this[_0x7c0f73(0x1c1)]();const _0x3668b0=this[_0x7c0f73(0x1ee)]({'pingInterval':this[_0x7c0f73(0x1b4)]});this[_0x7c0f73(0x1db)]('binary',_0x3668b0);}[a9_0x254430(0x1f5)](){return __awaiter(this,arguments,void 0x0,function*(_0x45c680=0x3e8,_0x34f434='',_0x3c11ad=0x1388){return new Promise((_0x596ec1,_0xb03248)=>{const _0x4e7960=a9_0x2c72,_0x6c6bc9=Buffer[_0x4e7960(0x202)](_0x34f434,_0x4e7960(0x206)),_0x55b4ea=Buffer[_0x4e7960(0x203)](0x2+_0x6c6bc9[_0x4e7960(0x1bb)]);_0x55b4ea[_0x4e7960(0x1d4)](_0x45c680,0x0),_0x6c6bc9['copy'](_0x55b4ea,0x2);const _0x3e93c5=_0x55b4ea['length'],_0x544497=_0x3e93c5<0x7e?_0x3e93c5:_0x3e93c5<0x10000?0x7e:0x7f,_0x112993=_0x544497===0x7e?Buffer[_0x4e7960(0x202)]([0x88,0x7e,_0x3e93c5>>0x8&0xff,_0x3e93c5&0xff]):_0x544497===0x7f?Buffer[_0x4e7960(0x202)]([0x88,0x7f,0x0,0x0,0x0,0x0,0x0,0x0,_0x3e93c5>>0x8&0xff,_0x3e93c5&0xff]):Buffer['from']([0x88,_0x3e93c5]),_0x4ad19d=Buffer['concat']([_0x112993,_0x55b4ea]);this[_0x4e7960(0x1af)]['write'](_0x4ad19d),this[_0x4e7960(0x1e9)]=_0x4e7960(0x1f6);if(_0x3c11ad===null)this['status']=_0x4e7960(0x1cb),this[_0x4e7960(0x1af)][_0x4e7960(0x1b7)](),this[_0x4e7960(0x1f3)](_0x4e7960(0x1e1),{'code':_0x45c680,'reason':_0x34f434}),_0x596ec1();else{let _0x4d318b=!![];this[_0x4e7960(0x1af)]['once'](_0x4e7960(0x1f1),_0x1549a9=>{const _0x404898=_0x4e7960;if(!_0x4d318b)return;_0x1549a9[0x0]===0x88?(this[_0x404898(0x1e9)]=_0x404898(0x1cb),this[_0x404898(0x1af)][_0x404898(0x1b7)](),this[_0x404898(0x1f3)]('close',{'code':_0x45c680,'reason':_0x34f434}),_0x596ec1()):_0xb03248(new Error(_0x404898(0x1e3)));}),setTimeout(()=>{const _0x312ffa=_0x4e7960;_0x4d318b=![],_0xb03248(new Error(_0x312ffa(0x1ef))),this[_0x312ffa(0x1af)]['end']();},_0x3c11ad);}});});}[a9_0x254430(0x1db)](_0x1c9e7c,_0x2eabe0){const _0x483c2a=a9_0x254430;let _0x4a3d12,_0x568597;switch(_0x1c9e7c){case'text':_0x4a3d12=Buffer[_0x483c2a(0x202)](_0x2eabe0,_0x483c2a(0x206)),_0x568597=0x1;break;case _0x483c2a(0x1d6):_0x4a3d12=_0x2eabe0,_0x568597=0x2;break;case _0x483c2a(0x1eb):_0x4a3d12=_0x2eabe0,_0x568597=0x9;break;case _0x483c2a(0x1b0):_0x4a3d12=_0x2eabe0,_0x568597=0xa;break;}const _0x5e8d52=[];if(_0x4a3d12[_0x483c2a(0x1bb)]<0x7e)_0x5e8d52[_0x483c2a(0x1c6)](_0x4a3d12[_0x483c2a(0x1bb)]);else{if(_0x4a3d12[_0x483c2a(0x1bb)]<0x10000)_0x5e8d52['push'](0x7e,_0x4a3d12[_0x483c2a(0x1bb)]>>0x8&0xff,_0x4a3d12[_0x483c2a(0x1bb)]&0xff);else{_0x5e8d52['push'](0x7f);for(let _0x13b371=0x7;_0x13b371>=0x0;_0x13b371--)_0x5e8d52[_0x483c2a(0x1c6)](_0x4a3d12[_0x483c2a(0x1bb)]>>_0x13b371*0x8&0xff);}}const _0x3d1da9=Buffer[_0x483c2a(0x1f2)]([Buffer['from']([0x80|_0x568597,..._0x5e8d52]),_0x4a3d12]);this['socket']['write'](_0x3d1da9);}['emit'](_0x98f4b4,_0x3cf171,_0x1106c2,_0x91ced7=0x32*0x3e8){const _0x541d59=a9_0x254430;if(this[_0x541d59(0x1af)]==undefined||this['status']!==_0x541d59(0x1c5))throw new Error(_0x541d59(0x1d1));if(['handshake',_0x541d59(0x1c5),'error',_0x541d59(0x1e1)][_0x541d59(0x1cd)](_0x98f4b4))throw new Error(_0x541d59(0x1fe));const _0x36ddbd=_0x1106c2==undefined?0x0:this[_0x541d59(0x1b1)],_0x4879ec=Buffer[_0x541d59(0x202)](_0x98f4b4,'utf-8');if(_0x4879ec['length']>0xff)throw new Error(_0x541d59(0x1ff));if(_0x1106c2!=undefined){this[_0x541d59(0x1b1)]=(this[_0x541d59(0x1b1)]+0x1)%0x80||0x1;const _0x47b0b0=setTimeout(()=>{const _0x414299=_0x541d59;delete this[_0x414299(0x1c0)][_0x36ddbd],_0x1106c2(new Error(_0x414299(0x1b6)));},_0x91ced7);this[_0x541d59(0x1c0)][_0x36ddbd]=_0x2d7feb=>{if(!(_0x2d7feb instanceof Error))clearTimeout(_0x47b0b0);_0x1106c2(_0x2d7feb);};}const _0x387b30=Buffer[_0x541d59(0x1f2)]([Buffer[_0x541d59(0x202)]([_0x36ddbd|0x80,_0x4879ec[_0x541d59(0x1bb)]]),_0x4879ec,this[_0x541d59(0x1ee)](_0x3cf171)]);this['send']('binary',_0x387b30);}[a9_0x254430(0x1e6)](_0x4af424){const _0x11c868=a9_0x254430;var _0x41709a;const _0x4c09e9=_0x4af424[0x0],_0x586584=(_0x4c09e9&0x80)!==0x0,_0x3dbe49=_0x4c09e9&0xf,_0x11d73d=_0x4af424[0x1],_0xa24096=(_0x11d73d&0x80)!==0x0;let _0xfbc91d=_0x11d73d&0x7f,_0x354db2=0x2;if(_0xfbc91d===0x7e)_0xfbc91d=_0x4af424[_0x11c868(0x1c4)](_0x354db2),_0x354db2+=0x2;else _0xfbc91d===0x7f&&(_0xfbc91d=Number(_0x4af424['readBigUInt64BE'](_0x354db2)),_0x354db2+=0x8);const _0x3cc083=_0xa24096?_0x4af424['slice'](_0x354db2,_0x354db2+0x4):Buffer['alloc'](0x0);if(_0xa24096)_0x354db2+=0x4;let _0xe9f6a6=_0x4af424[_0x11c868(0x1dc)](_0x354db2,_0x354db2+_0xfbc91d);if(_0xa24096){const _0x2b0261=Buffer[_0x11c868(0x203)](_0xe9f6a6[_0x11c868(0x1bb)]);for(let _0x18e097=0x0;_0x18e097<_0xe9f6a6['length'];_0x18e097++)_0x2b0261[_0x18e097]=_0xe9f6a6[_0x18e097]^_0x3cc083[_0x18e097%0x4];_0xe9f6a6=_0x2b0261;}switch(_0x3dbe49){case 0x1:this[_0x11c868(0x1f3)]('error',new Error(_0x11c868(0x1da)+_0xe9f6a6[_0x11c868(0x1d7)](_0x11c868(0x206))));break;case 0x2:{if(this[_0x11c868(0x1e9)]===_0x11c868(0x1f7)){const _0x22c28b=this[_0x11c868(0x1fa)](_0xe9f6a6);this[_0x11c868(0x1f3)]('handshake',_0x22c28b),this['status']='open',this[_0x11c868(0x1db)](_0x11c868(0x1d6),Buffer['alloc'](0x0));return;}const _0x259e1e=_0xe9f6a6[_0x11c868(0x1c9)](0x0),_0x375bb3=_0x259e1e&0x7f,_0x409348=(_0x259e1e&0x80)!==0x0;if(_0x409348){const _0xaa2a89=_0xe9f6a6['readUInt8'](0x1),_0x5c699e=_0xe9f6a6[_0x11c868(0x1dc)](0x2,0x2+_0xaa2a89)['toString'](_0x11c868(0x206));if([_0x11c868(0x1f7),_0x11c868(0x1c5),_0x11c868(0x1b8),_0x11c868(0x1e1)]['includes'](_0x5c699e)){this[_0x11c868(0x1f3)](_0x11c868(0x1b8),new Error(_0x11c868(0x1de)+_0x5c699e+_0x11c868(0x1f8)));return;}const _0x3dc4ed=this[_0x11c868(0x1fa)](_0xe9f6a6[_0x11c868(0x1dc)](0x2+_0xaa2a89)),_0x139cf5=(_0x41709a=this['handlers'][_0x5c699e])!==null&&_0x41709a!==void 0x0?_0x41709a:[];let _0x404a66=![];for(const _0x388686 of _0x139cf5){const _0x47bed1=_0x388686[_0x11c868(0x200)](undefined,_0x3dc4ed);if(!_0x404a66&&_0x47bed1!==undefined&&_0x375bb3!==0x0){_0x404a66=!![];const _0x372593=Buffer[_0x11c868(0x1f2)]([Buffer[_0x11c868(0x202)]([_0x375bb3&0x7f]),this[_0x11c868(0x1ee)](_0x47bed1)]);this[_0x11c868(0x1db)](_0x11c868(0x1d6),_0x372593);}}if(!_0x404a66&&_0x375bb3!==0x0)this[_0x11c868(0x1f3)]('error',new Error(_0x11c868(0x1fd)+_0x5c699e+'\x20but\x20no\x20handler\x20return\x20a\x20result'));return;}const _0x326e55=this[_0x11c868(0x1c0)][_0x375bb3];if(_0x326e55==undefined){this[_0x11c868(0x1f3)](_0x11c868(0x1b8),new Error(_0x11c868(0x1ba)+_0x375bb3+_0x11c868(0x1ec)));return;}const _0x354ebb=this['decode'](_0xe9f6a6[_0x11c868(0x1dc)](0x1));_0x326e55[_0x11c868(0x200)](undefined,_0x354ebb);break;}case 0x9:this[_0x11c868(0x1db)]('pong',_0xe9f6a6);break;case 0xa:const _0x25f3a9=_0xe9f6a6[_0x11c868(0x1d7)](_0x11c868(0x206)),_0x3dffa6=this[_0x11c868(0x1f4)][_0x25f3a9];if(_0x3dffa6==undefined){this['raise'](_0x11c868(0x1b8),new Error(_0x11c868(0x1d0)));return;}_0x3dffa6();break;case 0x8:if(this[_0x11c868(0x1e9)]==='closing')return;let _0x27ced7=0x3e8,_0x39c07f='';_0xe9f6a6['length']>=0x2&&(_0x27ced7=_0xe9f6a6[_0x11c868(0x1c4)](0x0),_0x39c07f=_0xe9f6a6[_0x11c868(0x1dc)](0x2)[_0x11c868(0x1d7)]('utf-8'));this[_0x11c868(0x1f5)](_0x27ced7,_0x39c07f,null);break;default:this['raise']('error',new Error('Received\x20message\x20with\x20unsupported\x20opcode:\x20'+_0x3dbe49));}}[a9_0x254430(0x1ee)](_0x15fb47){const _0x5da517=a9_0x254430;return Buffer[_0x5da517(0x202)](JSON[_0x5da517(0x1c2)](_0x15fb47),_0x5da517(0x206));}[a9_0x254430(0x1fa)](_0x170970){const _0xdfd645=a9_0x254430;return JSON[_0xdfd645(0x1dd)](_0x170970[_0xdfd645(0x1d7)](_0xdfd645(0x206)));}['checkHeartbeat'](){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x5c6c83,_0x19dbc1)=>{const _0x3298e0=a9_0x2c72,_0x2079ee=a9_0x476e6d[_0x3298e0(0x1cc)](),_0x4e003a=setTimeout(()=>{const _0xf96269=_0x3298e0;delete this[_0xf96269(0x1f4)][_0x2079ee],this[_0xf96269(0x1f5)](0x3e8,'',null),_0x5c6c83(![]);},this[_0x3298e0(0x1e0)]);this[_0x3298e0(0x1f4)][_0x2079ee]=()=>{const _0xa18f05=_0x3298e0;delete this[_0xa18f05(0x1f4)][_0x2079ee],clearTimeout(_0x4e003a),_0x5c6c83(!![]),setTimeout(()=>{const _0x4802cc=_0xa18f05;if(this['status']!==_0x4802cc(0x1c5))return;this[_0x4802cc(0x1c1)]();},this['pingInterval']);},this[_0x3298e0(0x1db)](_0x3298e0(0x1eb),Buffer[_0x3298e0(0x202)](_0x2079ee));});});}['on'](_0x522cd8,_0x573d1c){const _0x557ac2=a9_0x254430;if(this[_0x557ac2(0x1e5)][_0x522cd8]==undefined)this['handlers'][_0x522cd8]=[];this[_0x557ac2(0x1e5)][_0x522cd8][_0x557ac2(0x1c6)](_0x573d1c);}['off'](_0x3e306c,_0x40ace3){const _0x20d326=a9_0x254430;if(_0x40ace3==undefined){this['handlers'][_0x3e306c]=[];return;}const _0x56c639=this['handlers'][_0x3e306c],_0x400750=(_0x56c639!==null&&_0x56c639!==void 0x0?_0x56c639:[])[_0x20d326(0x1bc)](_0x525e9c=>_0x525e9c===_0x40ace3);if(_0x400750===-0x1)throw new Error(_0x20d326(0x1b3)+_0x3e306c+_0x20d326(0x1bd));_0x56c639[_0x20d326(0x1ed)](_0x400750,0x1);}[a9_0x254430(0x1f3)](_0x27798b,_0x1d11da){const _0x2728b4=a9_0x254430;var _0x94cb53;const _0x3d23f0=(_0x94cb53=this[_0x2728b4(0x1e5)][_0x27798b])!==null&&_0x94cb53!==void 0x0?_0x94cb53:[];for(const _0x41652d of _0x3d23f0){_0x41652d(_0x1d11da);}}static['fromUpgradeRequest'](_0x3c6bce,_0x2982e4){const _0x2b1995=a9_0x254430,_0x2c38f7=_0x3c6bce['headers']['sec-websocket-key'];if(_0x2c38f7==undefined)return _0x2982e4[_0x2b1995(0x1c8)](),null;const _0x7ead54=a9_0x476e6d[_0x2b1995(0x1e7)]('sha1');_0x7ead54[_0x2b1995(0x201)](_0x2c38f7+_0x2b1995(0x1e2));const _0x3052cc=_0x7ead54[_0x2b1995(0x1ca)](_0x2b1995(0x1be)),_0x2557a6=['HTTP/1.1\x20101\x20Switching\x20Protocols',_0x2b1995(0x1df),_0x2b1995(0x1c3),_0x2b1995(0x1ea)+_0x3052cc];return _0x2982e4[_0x2b1995(0x1d9)](_0x2557a6[_0x2b1995(0x1b9)]('\x0d\x0a')+_0x2b1995(0x1c7)),new Socket(_0x2982e4);}}