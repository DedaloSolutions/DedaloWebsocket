const a9_0x21971e=a9_0x2d74;function a9_0x2d74(_0x55460d,_0x1fe570){const _0x1de3c4=a9_0x1de3();return a9_0x2d74=function(_0x2d748a,_0x1459da){_0x2d748a=_0x2d748a-0x15c;let _0x2822e5=_0x1de3c4[_0x2d748a];return _0x2822e5;},a9_0x2d74(_0x55460d,_0x1fe570);}(function(_0x2e32be,_0xd35ed6){const _0x4163b6=a9_0x2d74,_0xf22c0d=_0x2e32be();while(!![]){try{const _0x392ca4=-parseInt(_0x4163b6(0x173))/0x1*(parseInt(_0x4163b6(0x175))/0x2)+-parseInt(_0x4163b6(0x162))/0x3+-parseInt(_0x4163b6(0x164))/0x4+parseInt(_0x4163b6(0x15e))/0x5*(-parseInt(_0x4163b6(0x16d))/0x6)+-parseInt(_0x4163b6(0x15c))/0x7*(parseInt(_0x4163b6(0x171))/0x8)+-parseInt(_0x4163b6(0x172))/0x9+parseInt(_0x4163b6(0x160))/0xa*(parseInt(_0x4163b6(0x16e))/0xb);if(_0x392ca4===_0xd35ed6)break;else _0xf22c0d['push'](_0xf22c0d['shift']());}catch(_0x571b74){_0xf22c0d['push'](_0xf22c0d['shift']());}}}(a9_0x1de3,0xf15be));import a9_0x45688d from'crypto';function a9_0x1de3(){const _0xf98bec=['close','505SubcYL','listen','855310TVErLq','findIndex','2206524nIVUJW','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','7244452vzWVwi','splice','randomUUID','push','connection','handlers','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','raise','call','16962vZxqSI','1111qdrNny','sockets','handshake','496328jCmOYV','12587895uqApdf','289cOcnKH','fromUpgradeRequest','12070vTLmAH','189KJiTff'];a9_0x1de3=function(){return _0xf98bec;};return a9_0x1de3();}import a9_0x477df2 from'./socket.class';export default class Server{constructor(){const _0x3a9756=a9_0x2d74;this[_0x3a9756(0x16f)]={},this['handlers']={};}[a9_0x21971e(0x15f)](_0x49dd5f){_0x49dd5f['on']('upgrade',(_0x1021bb,_0x1b16f1)=>{const _0xf7e767=a9_0x2d74,_0x5a71a3=a9_0x477df2[_0xf7e767(0x174)](_0x1021bb,_0x1b16f1),_0x51fac1=a9_0x45688d[_0xf7e767(0x166)]();if(_0x5a71a3===null)return;this[_0xf7e767(0x16f)][_0x51fac1]=_0x5a71a3,_0x5a71a3['on'](_0xf7e767(0x170),_0x25d1a0=>{const _0x18f56c=_0xf7e767;this['raise'](_0x18f56c(0x168),[_0x51fac1,_0x5a71a3,_0x25d1a0]);}),_0x5a71a3['on'](_0xf7e767(0x15d),()=>{delete this['sockets'][_0x51fac1];});});}['on'](_0x66d15b,_0x228a4a){const _0x368e4b=a9_0x21971e;if(this[_0x368e4b(0x169)][_0x66d15b]==undefined)this[_0x368e4b(0x169)][_0x66d15b]=[];this[_0x368e4b(0x169)][_0x66d15b][_0x368e4b(0x167)](_0x228a4a);}['off'](_0x5c580a,_0x1c8d23){const _0x51659c=a9_0x21971e;if(_0x1c8d23==undefined){this['handlers'][_0x5c580a]=[];return;}const _0x3d019c=this[_0x51659c(0x169)][_0x5c580a],_0x408ca0=(_0x3d019c!==null&&_0x3d019c!==void 0x0?_0x3d019c:[])[_0x51659c(0x161)](_0x4f8794=>_0x4f8794===_0x1c8d23);if(_0x408ca0===-0x1)throw new Error(_0x51659c(0x163)+_0x5c580a+_0x51659c(0x16a));_0x3d019c[_0x51659c(0x165)](_0x408ca0,0x1);}[a9_0x21971e(0x16b)](_0x39b39f,[_0x519a7f,_0x6c938b,_0xf7c003]){const _0x4b6f05=a9_0x21971e;var _0x6a463f;const _0x3d23f7=(_0x6a463f=this[_0x4b6f05(0x169)][_0x39b39f])!==null&&_0x6a463f!==void 0x0?_0x6a463f:[];for(const _0x5b1a20 of _0x3d23f7){_0x5b1a20[_0x4b6f05(0x16c)](undefined,...[_0x519a7f,_0x6c938b,_0xf7c003]);}}}