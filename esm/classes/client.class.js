const a7_0x4dd81c=a7_0x1b17;(function(_0x28f14c,_0x4ccaba){const _0xf4b8b8=a7_0x1b17,_0x2f6c94=_0x28f14c();while(!![]){try{const _0x2efccf=parseInt(_0xf4b8b8(0x130))/0x1+-parseInt(_0xf4b8b8(0x10d))/0x2+-parseInt(_0xf4b8b8(0x123))/0x3*(-parseInt(_0xf4b8b8(0x128))/0x4)+-parseInt(_0xf4b8b8(0xf2))/0x5+parseInt(_0xf4b8b8(0x10f))/0x6+parseInt(_0xf4b8b8(0x11e))/0x7+parseInt(_0xf4b8b8(0x102))/0x8;if(_0x2efccf===_0x4ccaba)break;else _0x2f6c94['push'](_0x2f6c94['shift']());}catch(_0x5ea3c0){_0x2f6c94['push'](_0x2f6c94['shift']());}}}(a7_0x1b5e,0x74c1d));var __awaiter=this&&this[a7_0x4dd81c(0x12a)]||function(_0x396f86,_0x4b954d,_0x16c058,_0x19521a){function _0x3cf425(_0x44e661){return _0x44e661 instanceof _0x16c058?_0x44e661:new _0x16c058(function(_0x2d13c4){_0x2d13c4(_0x44e661);});}return new(_0x16c058||(_0x16c058=Promise))(function(_0x2fae8d,_0x50f178){const _0x1e4559=a7_0x1b17;function _0xf9ca0b(_0x2aa246){const _0x42d4ea=a7_0x1b17;try{_0x352606(_0x19521a[_0x42d4ea(0x100)](_0x2aa246));}catch(_0x1c3902){_0x50f178(_0x1c3902);}}function _0x1fe909(_0x4cbf8f){const _0x367571=a7_0x1b17;try{_0x352606(_0x19521a[_0x367571(0xfc)](_0x4cbf8f));}catch(_0x2bce00){_0x50f178(_0x2bce00);}}function _0x352606(_0x25364e){const _0x34cdbe=a7_0x1b17;_0x25364e[_0x34cdbe(0xf0)]?_0x2fae8d(_0x25364e[_0x34cdbe(0x121)]):_0x3cf425(_0x25364e['value'])[_0x34cdbe(0x133)](_0xf9ca0b,_0x1fe909);}_0x352606((_0x19521a=_0x19521a[_0x1e4559(0x120)](_0x396f86,_0x4b954d||[]))[_0x1e4559(0x100)]());});};function a7_0x1b17(_0xe5cc78,_0x431735){const _0x1b5ec6=a7_0x1b5e();return a7_0x1b17=function(_0x1b1764,_0x49a1b3){_0x1b1764=_0x1b1764-0xef;let _0x2bb00f=_0x1b5ec6[_0x1b1764];return _0x2bb00f;},a7_0x1b17(_0xe5cc78,_0x431735);}function a7_0x1b5e(){const _0x2738a2=['Timeout','waiting','68xopsqX','removeAllListeners','__awaiter','handshakeData','addEventListener','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','socket','handshakeStatus','574263pulgZx','readyState','CONNECTING','then','utf-8','ping','done','status','2122750AhmhUj','concat','encode','heartbeatTimeout','sent-info','OPEN','reconnectTimeout','handshake','requestId','push','throw','url','from','decode','next','open','2437248vSwVVf','connect','removeEventListener','send','stringify','error','isArray','heartbeatInterval','close','off','checkHeartbeat','1808172ufJgAf','parse','2632032eBepKl','toString','handlers','readUInt8','closed','completed','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','length','connecting','call','emit','slice','raise','includes','alloc','660009ymDXvW','pendingRequests','apply','value','disconnect','69705ISXAbj','handle','message'];a7_0x1b5e=function(){return _0x2738a2;};return a7_0x1b5e();}import a7_0x4e55cd from'ws';export default class Client{constructor(){const _0x140054=a7_0x4dd81c;this['heartbeatInterval']=0x5*0x3e8+0x1f4,this[_0x140054(0xf8)]=null,this[_0x140054(0x12f)]=_0x140054(0x127),this['requestId']=0x1,this[_0x140054(0x11f)]={},this['handlers']={},this[_0x140054(0x10c)]=()=>{const _0x5f0ec0=_0x140054;if(this['heartbeatTimeout']!=undefined)clearTimeout(this[_0x5f0ec0(0xf5)]);this['heartbeatTimeout']=setTimeout(()=>{const _0x314a33=_0x5f0ec0;var _0xbe9949;if(this['socket']!=undefined&&this[_0x314a33(0x12e)][_0x314a33(0x131)]!==a7_0x4e55cd[_0x314a33(0xf7)])return;(_0xbe9949=this['socket'])===null||_0xbe9949===void 0x0?void 0x0:_0xbe9949[_0x314a33(0x10a)]();},this['heartbeatInterval']);};}[a7_0x4dd81c(0x103)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x504f89,allowReject:_0x31eacc,handshakeData:_0x523cf2,reconnectTimeout:_0x2107d9}={}){return new Promise((_0x494962,_0xda2329)=>{const _0x346b1d=a7_0x1b17;if(this[_0x346b1d(0x12e)]!=undefined&&this[_0x346b1d(0x12e)][_0x346b1d(0x131)]===a7_0x4e55cd[_0x346b1d(0xf7)]){if(_0x31eacc!==!![])_0xda2329(new Error('The\x20websocket\x20is\x20already\x20connected'));else _0x494962();}this[_0x346b1d(0x12e)]!=undefined&&(this[_0x346b1d(0x12e)][_0x346b1d(0x129)](),this['socket'][_0x346b1d(0x10b)](_0x346b1d(0xef),this[_0x346b1d(0x10c)]),this[_0x346b1d(0x12f)]=_0x346b1d(0x127));if(this['url']==undefined&&_0x504f89==undefined)_0xda2329(new Error('No\x20url\x20specified'));this[_0x346b1d(0xfd)]=_0x504f89||this[_0x346b1d(0xfd)];if(_0x2107d9!==undefined)this[_0x346b1d(0xf8)]=_0x2107d9;if(_0x523cf2!==undefined)this[_0x346b1d(0x12b)]=_0x523cf2;this[_0x346b1d(0x12e)]=new a7_0x4e55cd(this[_0x346b1d(0xfd)]),this['socket'][_0x346b1d(0x12c)](_0x346b1d(0x101),this[_0x346b1d(0x10c)]),this[_0x346b1d(0x12e)]['addEventListener'](_0x346b1d(0x125),this['checkHeartbeat']),this['socket']['on'](_0x346b1d(0xef),_0x5a5f75=>{const _0x4a1db2=_0x346b1d;var _0x296864;(_0x296864=this[_0x4a1db2(0x12e)])===null||_0x296864===void 0x0?void 0x0:_0x296864['pong'](_0x5a5f75),this['checkHeartbeat']();}),this['socket'][_0x346b1d(0x12c)](_0x346b1d(0x10a),()=>{const _0x585ec1=_0x346b1d;if(this[_0x585ec1(0xf5)]!=undefined)clearTimeout(this[_0x585ec1(0xf5)]);});if(this['reconnectTimeout']!=undefined)this[_0x346b1d(0x12e)][_0x346b1d(0x12c)]('close',()=>{const _0x15f0e3=_0x346b1d;setTimeout(()=>this[_0x15f0e3(0x103)](),this[_0x15f0e3(0xf8)]);});this['socket'][_0x346b1d(0x12c)](_0x346b1d(0x125),_0x47c5c4=>this['handle'](_0x47c5c4)),this[_0x346b1d(0x12e)][_0x346b1d(0x12c)](_0x346b1d(0x101),_0x5cdede=>this[_0x346b1d(0x11b)](_0x346b1d(0x101),_0x5cdede)),this[_0x346b1d(0x12e)][_0x346b1d(0x12c)](_0x346b1d(0x107),_0x13530d=>this['raise']('error',_0x13530d)),this[_0x346b1d(0x12e)][_0x346b1d(0x12c)](_0x346b1d(0x10a),_0x240aee=>this['raise'](_0x346b1d(0x10a),_0x240aee));const _0x2a9220=()=>{_0x494962(),_0xbecf25();},_0x2b136f=_0x38d2a5=>{_0x31eacc?_0xda2329(_0x38d2a5):_0x494962(),_0xbecf25();};this['socket'][_0x346b1d(0x12c)](_0x346b1d(0x101),_0x2a9220,{'once':!![]}),this[_0x346b1d(0x12e)][_0x346b1d(0x12c)]('error',_0x2b136f,{'once':!![]});const _0xbecf25=()=>{const _0x56315c=_0x346b1d;var _0x424675,_0x6a298c;(_0x424675=this[_0x56315c(0x12e)])===null||_0x424675===void 0x0?void 0x0:_0x424675[_0x56315c(0x104)](_0x56315c(0x101),_0x2a9220),(_0x6a298c=this['socket'])===null||_0x6a298c===void 0x0?void 0x0:_0x6a298c['removeEventListener'](_0x56315c(0x107),_0x2b136f);};});});}[a7_0x4dd81c(0x122)](_0x46c554,_0xbd86ea){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x183355,_0x54a89b)=>{const _0x37e1b4=a7_0x1b17;if(this[_0x37e1b4(0x12e)]==undefined||this[_0x37e1b4(0x12e)][_0x37e1b4(0x131)]===a7_0x4e55cd['CLOSING']||this['socket'][_0x37e1b4(0x131)]===a7_0x4e55cd['CLOSED'])return _0x54a89b(new Error('The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection'));this[_0x37e1b4(0x12e)][_0x37e1b4(0x10a)](_0x46c554,_0xbd86ea);const _0x40015c=()=>{_0x183355(),_0x152667();},_0x2a28c6=_0x3899c9=>{_0x54a89b(_0x3899c9),_0x152667();};this[_0x37e1b4(0x12e)]['addEventListener'](_0x37e1b4(0x10a),_0x40015c,{'once':!![]}),this[_0x37e1b4(0x12e)][_0x37e1b4(0x12c)](_0x37e1b4(0x107),_0x2a28c6,{'once':!![]});const _0x152667=()=>{const _0x3ba769=_0x37e1b4;var _0x56932e,_0x615083;(_0x56932e=this['socket'])===null||_0x56932e===void 0x0?void 0x0:_0x56932e[_0x3ba769(0x104)](_0x3ba769(0x10a),_0x40015c),(_0x615083=this[_0x3ba769(0x12e)])===null||_0x615083===void 0x0?void 0x0:_0x615083[_0x3ba769(0x104)](_0x3ba769(0x107),_0x2a28c6);};});});}get['status'](){const _0x557450=a7_0x4dd81c;var _0x57f468;switch((_0x57f468=this[_0x557450(0x12e)])===null||_0x57f468===void 0x0?void 0x0:_0x57f468[_0x557450(0x131)]){case a7_0x4e55cd[_0x557450(0x132)]:return _0x557450(0x117);case a7_0x4e55cd[_0x557450(0xf7)]:return this[_0x557450(0x12f)]===_0x557450(0x114)?'open':'handshake';case a7_0x4e55cd['CLOSING']:return'closing';case a7_0x4e55cd['CLOSED']:default:return _0x557450(0x113);}}[a7_0x4dd81c(0x119)](_0xa9357c,_0x51b75b,_0x1a3529,_0x5e17c8=0x5*0x3e8){const _0x1f656f=a7_0x4dd81c;if(this['socket']==undefined||this[_0x1f656f(0xf1)]!=='open')throw new Error('The\x20websocket\x20is\x20not\x20connected');if([_0x1f656f(0xf9),_0x1f656f(0x101),_0x1f656f(0x107),_0x1f656f(0x10a)][_0x1f656f(0x11c)](_0xa9357c))throw new Error('Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close');const _0x468043=_0x1a3529==undefined?0x0:this[_0x1f656f(0xfa)],_0x1b8fe6=Buffer[_0x1f656f(0xfe)](_0xa9357c,_0x1f656f(0x134));if(_0x1b8fe6[_0x1f656f(0x116)]>0xff)throw new Error('Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)');if(_0x1a3529!=undefined){this['requestId']=(this['requestId']+0x1)%0x80||0x1;const _0x14970b=setTimeout(()=>{const _0x24befd=_0x1f656f;delete this['pendingRequests'][_0x468043],_0x1a3529(new Error(_0x24befd(0x126)));},_0x5e17c8);this[_0x1f656f(0x11f)][_0x468043]=_0x23247e=>{if(!(_0x23247e instanceof Error))clearTimeout(_0x14970b);_0x1a3529(_0x23247e);};}const _0x3da290=Buffer[_0x1f656f(0xf3)]([Buffer['from']([_0x468043|0x80,_0x1b8fe6[_0x1f656f(0x116)]]),_0x1b8fe6,this['encode'](_0x51b75b)]);this['socket'][_0x1f656f(0x105)](_0x3da290);}[a7_0x4dd81c(0x124)]({data:_0x544ee0}){const _0x589d5f=a7_0x4dd81c;var _0x4531b4,_0x19d909;let _0x1f194d=Buffer[_0x589d5f(0x11d)](0x0);if(_0x544ee0 instanceof Buffer)_0x1f194d=_0x544ee0;if(typeof _0x544ee0==='string')_0x1f194d=Buffer[_0x589d5f(0xfe)](_0x544ee0,_0x589d5f(0x134));if(_0x544ee0 instanceof ArrayBuffer)_0x1f194d=Buffer[_0x589d5f(0xfe)](_0x544ee0);if(Array[_0x589d5f(0x108)](_0x544ee0))_0x1f194d=Buffer[_0x589d5f(0xf3)](_0x544ee0);if(this[_0x589d5f(0x12f)]===_0x589d5f(0x127)){const {pingInterval:_0x361514}=this[_0x589d5f(0xff)](_0x1f194d);this[_0x589d5f(0x109)]=_0x361514+0x1f4;const _0x4b69f5=this[_0x589d5f(0xf4)](this['handshakeData']===undefined?null:this[_0x589d5f(0x12b)]);(_0x4531b4=this[_0x589d5f(0x12e)])===null||_0x4531b4===void 0x0?void 0x0:_0x4531b4[_0x589d5f(0x105)](_0x4b69f5),this[_0x589d5f(0x12f)]=_0x589d5f(0xf6);return;}else{if(this['handshakeStatus']===_0x589d5f(0xf6)){this['handshakeStatus']='completed';return;}}const _0x1a76b1=_0x1f194d[_0x589d5f(0x112)](0x0),_0x35e19a=_0x1a76b1&0x7f,_0x5a6f7d=(_0x1a76b1&0x80)!==0x0;if(_0x5a6f7d){const _0x4f5cf6=_0x1f194d[_0x589d5f(0x112)](0x1),_0x3723a7=_0x1f194d[_0x589d5f(0x11a)](0x2,0x2+_0x4f5cf6)[_0x589d5f(0x110)](_0x589d5f(0x134));if([_0x589d5f(0xf9),_0x589d5f(0x101),_0x589d5f(0x107),_0x589d5f(0x10a)][_0x589d5f(0x11c)](_0x3723a7))return;const _0x169e7f=this[_0x589d5f(0xff)](_0x1f194d['slice'](0x2+_0x4f5cf6)),_0x2cb817=(_0x19d909=this['handlers'][_0x3723a7])!==null&&_0x19d909!==void 0x0?_0x19d909:[];let _0x1aa5e2=![];const _0x26ba0c=_0x334274=>{const _0x575373=_0x589d5f;var _0x580ed3;if(_0x35e19a===0x0&&_0x1aa5e2)return;if(_0x334274===undefined)return;const _0xc75b96=Buffer['concat']([Buffer[_0x575373(0xfe)]([_0x35e19a&0x7f]),this[_0x575373(0xf4)](_0x334274)]);(_0x580ed3=this['socket'])===null||_0x580ed3===void 0x0?void 0x0:_0x580ed3[_0x575373(0x105)](_0xc75b96),_0x1aa5e2=!![];};for(const _0x35bb2e of _0x2cb817)_0x35bb2e[_0x589d5f(0x118)](undefined,_0x169e7f,_0x26ba0c);if(!_0x1aa5e2&&_0x35e19a!==0x0){}return;}const _0x1f523f=this[_0x589d5f(0x11f)][_0x35e19a];if(_0x1f523f==undefined)return;const _0x506d56=this[_0x589d5f(0xff)](_0x1f194d[_0x589d5f(0x11a)](0x1));_0x1f523f(_0x506d56);}[a7_0x4dd81c(0xf4)](_0x26e260){const _0x100207=a7_0x4dd81c;return Buffer[_0x100207(0xfe)](JSON[_0x100207(0x106)](_0x26e260),_0x100207(0x134));}['decode'](_0x5700b9){const _0x56a843=a7_0x4dd81c;return JSON[_0x56a843(0x10e)](_0x5700b9['toString'](_0x56a843(0x134)));}['on'](_0x475cd7,_0x1c5575){const _0xecb8e0=a7_0x4dd81c;if(this[_0xecb8e0(0x111)][_0x475cd7]==undefined)this[_0xecb8e0(0x111)][_0x475cd7]=[];this[_0xecb8e0(0x111)][_0x475cd7][_0xecb8e0(0xfb)](_0x1c5575);}[a7_0x4dd81c(0x10b)](_0x28d238,_0x511af8){const _0x360d39=a7_0x4dd81c;if(_0x511af8==undefined){delete this[_0x360d39(0x111)][_0x28d238];return;}const _0x1c1db2=this['handlers'][_0x28d238],_0x1396fc=(_0x1c1db2!==null&&_0x1c1db2!==void 0x0?_0x1c1db2:[])['findIndex'](_0xe00cf8=>_0xe00cf8===_0x511af8);if(_0x1396fc===-0x1)throw new Error(_0x360d39(0x12d)+_0x28d238+_0x360d39(0x115));_0x1c1db2['splice'](_0x1396fc,0x1);}[a7_0x4dd81c(0x11b)](_0x491f74,_0x4caad2){const _0x5923fd=a7_0x4dd81c;var _0x5c8470;const _0x47f0ae=(_0x5c8470=this[_0x5923fd(0x111)][_0x491f74])!==null&&_0x5c8470!==void 0x0?_0x5c8470:[];for(const _0x31f828 of _0x47f0ae)_0x31f828(_0x4caad2);}}