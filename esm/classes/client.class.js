const a8_0xdc99a3=a8_0x44f1;function a8_0x44f1(_0xad0c1f,_0x56557){const _0x4c088c=a8_0x4c08();return a8_0x44f1=function(_0x44f1f8,_0x874532){_0x44f1f8=_0x44f1f8-0x156;let _0x30804a=_0x4c088c[_0x44f1f8];return _0x30804a;},a8_0x44f1(_0xad0c1f,_0x56557);}(function(_0x4be244,_0x2a469c){const _0x1cde01=a8_0x44f1,_0x2ef471=_0x4be244();while(!![]){try{const _0x32b83a=-parseInt(_0x1cde01(0x16f))/0x1*(parseInt(_0x1cde01(0x199))/0x2)+parseInt(_0x1cde01(0x184))/0x3+-parseInt(_0x1cde01(0x15d))/0x4+-parseInt(_0x1cde01(0x16c))/0x5+parseInt(_0x1cde01(0x195))/0x6+parseInt(_0x1cde01(0x180))/0x7*(parseInt(_0x1cde01(0x194))/0x8)+parseInt(_0x1cde01(0x177))/0x9;if(_0x32b83a===_0x2a469c)break;else _0x2ef471['push'](_0x2ef471['shift']());}catch(_0x2dbf61){_0x2ef471['push'](_0x2ef471['shift']());}}}(a8_0x4c08,0x2aac8));function a8_0x4c08(){const _0x200f14=['slice','The\x20websocket\x20is\x20already\x20connected','completed','open','handshakeStatus','\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found','handle','next','status','CLOSING','from','427245MEVhlX','readyState','error','1zbdjZO','send','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error,\x20close\x20or\x20\x22*\x22','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','sent-info','waiting','pendingRequests','heartbeatInterval','21726aASSWs','Timeout','reconnectTimeout','close','value','throw','decode','stringify','closed','854721QJtYdB','apply','handlers','ping','936222oKnzIQ','removeEventListener','message','OPEN','disconnect','connect','encode','removeAllListeners','isArray','push','connecting','utf-8','handshake','readUInt8','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','emit','16bEMYwQ','598830NoPhRn','toString','length','call','206106lzsqHX','done','heartbeatTimeout','requestId','CLOSED','addEventListener','socket','Attempted\x20to\x20remove\x20an\x20handler\x20for\x20','concat','url','handshakeData','1180820XCJkdp','checkHeartbeat','CONNECTING','raise'];a8_0x4c08=function(){return _0x200f14;};return a8_0x4c08();}var __awaiter=this&&this['__awaiter']||function(_0x5d0167,_0x2e5010,_0x570ad5,_0x2cbb72){function _0x4f3393(_0x222a27){return _0x222a27 instanceof _0x570ad5?_0x222a27:new _0x570ad5(function(_0x9e8870){_0x9e8870(_0x222a27);});}return new(_0x570ad5||(_0x570ad5=Promise))(function(_0x4f4234,_0x528d5e){const _0x2a61d3=a8_0x44f1;function _0x39868d(_0x3c1d6c){const _0x4607fe=a8_0x44f1;try{_0x211495(_0x2cbb72[_0x4607fe(0x168)](_0x3c1d6c));}catch(_0xfdc2c2){_0x528d5e(_0xfdc2c2);}}function _0x51c49b(_0x129e25){const _0x519adc=a8_0x44f1;try{_0x211495(_0x2cbb72[_0x519adc(0x17c)](_0x129e25));}catch(_0x10e2e5){_0x528d5e(_0x10e2e5);}}function _0x211495(_0x5f302a){const _0x57e623=a8_0x44f1;_0x5f302a[_0x57e623(0x19a)]?_0x4f4234(_0x5f302a[_0x57e623(0x17b)]):_0x4f3393(_0x5f302a[_0x57e623(0x17b)])['then'](_0x39868d,_0x51c49b);}_0x211495((_0x2cbb72=_0x2cbb72[_0x2a61d3(0x181)](_0x5d0167,_0x2e5010||[]))[_0x2a61d3(0x168)]());});};import a8_0x26b75c from'ws';export default class Client{constructor(){const _0x127fb3=a8_0x44f1;this['heartbeatInterval']=0x5*0x3e8+0x1f4,this[_0x127fb3(0x179)]=null,this[_0x127fb3(0x165)]=_0x127fb3(0x174),this['requestId']=0x1,this[_0x127fb3(0x175)]={},this['handlers']={},this[_0x127fb3(0x15e)]=()=>{const _0x174950=_0x127fb3;if(this[_0x174950(0x19b)]!=undefined)clearTimeout(this['heartbeatTimeout']);this['heartbeatTimeout']=setTimeout(()=>{const _0x1ba60c=_0x174950;var _0x4049f6;if(this['socket']!=undefined&&this[_0x1ba60c(0x158)][_0x1ba60c(0x16d)]!==a8_0x26b75c[_0x1ba60c(0x187)])return;(_0x4049f6=this['socket'])===null||_0x4049f6===void 0x0?void 0x0:_0x4049f6['close']();},this[_0x174950(0x176)]);};}['connect'](){return __awaiter(this,arguments,void 0x0,function*({url:_0x173bf6,allowReject:_0x4a4c0e,handshakeData:_0x394052,reconnectTimeout:_0x2ac0eb}={}){return new Promise((_0x344858,_0x5b396b)=>{const _0x1a567f=a8_0x44f1;if(this[_0x1a567f(0x158)]!=undefined&&this[_0x1a567f(0x158)][_0x1a567f(0x16d)]===a8_0x26b75c[_0x1a567f(0x187)]){if(_0x4a4c0e!==!![])_0x5b396b(new Error(_0x1a567f(0x162)));else _0x344858();}this[_0x1a567f(0x158)]!=undefined&&(this['socket'][_0x1a567f(0x18b)](),this[_0x1a567f(0x158)]['off'](_0x1a567f(0x183),this['checkHeartbeat']),this[_0x1a567f(0x165)]=_0x1a567f(0x174));if(this[_0x1a567f(0x15b)]==undefined&&_0x173bf6==undefined)_0x5b396b(new Error('No\x20url\x20specified'));this[_0x1a567f(0x15b)]=_0x173bf6||this['url'];if(_0x2ac0eb!==undefined)this[_0x1a567f(0x179)]=_0x2ac0eb;if(_0x394052!==undefined)this[_0x1a567f(0x15c)]=_0x394052;this[_0x1a567f(0x158)]=new a8_0x26b75c(this[_0x1a567f(0x15b)]),this['socket']['addEventListener'](_0x1a567f(0x164),this['checkHeartbeat']),this[_0x1a567f(0x158)][_0x1a567f(0x157)]('message',this[_0x1a567f(0x15e)]),this[_0x1a567f(0x158)]['on'](_0x1a567f(0x183),_0x12bc4c=>{const _0x814d6e=_0x1a567f;var _0x2baa02;(_0x2baa02=this[_0x814d6e(0x158)])===null||_0x2baa02===void 0x0?void 0x0:_0x2baa02['pong'](_0x12bc4c),this[_0x814d6e(0x15e)]();}),this[_0x1a567f(0x158)][_0x1a567f(0x157)](_0x1a567f(0x17a),()=>{if(this['heartbeatTimeout']!=undefined)clearTimeout(this['heartbeatTimeout']);});if(this[_0x1a567f(0x179)]!=undefined)this[_0x1a567f(0x158)][_0x1a567f(0x157)](_0x1a567f(0x17a),()=>{const _0x51e971=_0x1a567f;setTimeout(()=>this[_0x51e971(0x189)](),this['reconnectTimeout']);});this[_0x1a567f(0x158)][_0x1a567f(0x157)](_0x1a567f(0x186),_0x5e7f0b=>this[_0x1a567f(0x167)](_0x5e7f0b)),this[_0x1a567f(0x158)][_0x1a567f(0x157)](_0x1a567f(0x164),_0x119744=>this['raise'](_0x1a567f(0x164),_0x119744)),this[_0x1a567f(0x158)][_0x1a567f(0x157)]('error',_0x6c70cb=>this[_0x1a567f(0x160)]('error',_0x6c70cb)),this[_0x1a567f(0x158)][_0x1a567f(0x157)](_0x1a567f(0x17a),_0x395fc7=>this['raise'](_0x1a567f(0x17a),_0x395fc7));const _0x34d5ab=()=>{_0x344858(),_0x4cdadc();},_0x501221=_0x2f5b4d=>{_0x4a4c0e?_0x5b396b(_0x2f5b4d):_0x344858(),_0x4cdadc();};this['socket'][_0x1a567f(0x157)](_0x1a567f(0x164),_0x34d5ab,{'once':!![]}),this[_0x1a567f(0x158)]['addEventListener'](_0x1a567f(0x16e),_0x501221,{'once':!![]});const _0x4cdadc=()=>{const _0x5d9f0d=_0x1a567f;var _0x4178a3,_0x4fc850;(_0x4178a3=this[_0x5d9f0d(0x158)])===null||_0x4178a3===void 0x0?void 0x0:_0x4178a3[_0x5d9f0d(0x185)](_0x5d9f0d(0x164),_0x34d5ab),(_0x4fc850=this['socket'])===null||_0x4fc850===void 0x0?void 0x0:_0x4fc850[_0x5d9f0d(0x185)](_0x5d9f0d(0x16e),_0x501221);};});});}[a8_0xdc99a3(0x188)](_0x2b9b7e,_0x4cbfb3){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x2b6157,_0x4bca64)=>{const _0x416cc3=a8_0x44f1;if(this[_0x416cc3(0x158)]==undefined||this[_0x416cc3(0x158)][_0x416cc3(0x16d)]===a8_0x26b75c[_0x416cc3(0x16a)]||this['socket'][_0x416cc3(0x16d)]===a8_0x26b75c['CLOSED'])return _0x4bca64(new Error(_0x416cc3(0x172)));this[_0x416cc3(0x158)]['close'](_0x2b9b7e,_0x4cbfb3);const _0x23b903=()=>{_0x2b6157(),_0x58803e();},_0x17f7b0=_0x2364a2=>{_0x4bca64(_0x2364a2),_0x58803e();};this[_0x416cc3(0x158)][_0x416cc3(0x157)](_0x416cc3(0x17a),_0x23b903,{'once':!![]}),this[_0x416cc3(0x158)][_0x416cc3(0x157)](_0x416cc3(0x16e),_0x17f7b0,{'once':!![]});const _0x58803e=()=>{const _0xc865fc=_0x416cc3;var _0x166a8a,_0x150104;(_0x166a8a=this[_0xc865fc(0x158)])===null||_0x166a8a===void 0x0?void 0x0:_0x166a8a['removeEventListener'](_0xc865fc(0x17a),_0x23b903),(_0x150104=this['socket'])===null||_0x150104===void 0x0?void 0x0:_0x150104[_0xc865fc(0x185)](_0xc865fc(0x16e),_0x17f7b0);};});});}get[a8_0xdc99a3(0x169)](){const _0x1568f1=a8_0xdc99a3;var _0x133304;switch((_0x133304=this[_0x1568f1(0x158)])===null||_0x133304===void 0x0?void 0x0:_0x133304[_0x1568f1(0x16d)]){case a8_0x26b75c[_0x1568f1(0x15f)]:return _0x1568f1(0x18e);case a8_0x26b75c['OPEN']:return this[_0x1568f1(0x165)]==='completed'?'open':_0x1568f1(0x190);case a8_0x26b75c[_0x1568f1(0x16a)]:return'closing';case a8_0x26b75c[_0x1568f1(0x156)]:default:return _0x1568f1(0x17f);}}[a8_0xdc99a3(0x193)](_0x4b3780,_0x376be3,_0xbc0372,_0x17623c=0x5*0x3e8){const _0xb94bd3=a8_0xdc99a3;if(this[_0xb94bd3(0x158)]==undefined||this[_0xb94bd3(0x169)]!==_0xb94bd3(0x164))throw new Error('The\x20websocket\x20is\x20not\x20connected');if([_0xb94bd3(0x190),_0xb94bd3(0x164),_0xb94bd3(0x16e),_0xb94bd3(0x17a),'*']['includes'](_0x4b3780))throw new Error(_0xb94bd3(0x171));const _0x2ec3b0=_0xbc0372==undefined?0x0:this['requestId'],_0x2f06b8=Buffer[_0xb94bd3(0x16b)](_0x4b3780,_0xb94bd3(0x18f));if(_0x2f06b8[_0xb94bd3(0x197)]>0xff)throw new Error(_0xb94bd3(0x192));if(_0xbc0372!=undefined){this[_0xb94bd3(0x19c)]=(this['requestId']+0x1)%0x80||0x1;const _0x3af4de=setTimeout(()=>{const _0x37e3f6=_0xb94bd3;delete this['pendingRequests'][_0x2ec3b0],_0xbc0372(new Error(_0x37e3f6(0x178)));},_0x17623c);this[_0xb94bd3(0x175)][_0x2ec3b0]=_0x43cecc=>{if(!(_0x43cecc instanceof Error))clearTimeout(_0x3af4de);_0xbc0372(_0x43cecc);};}const _0x19049a=Buffer[_0xb94bd3(0x15a)]([Buffer[_0xb94bd3(0x16b)]([_0x2ec3b0|0x80,_0x2f06b8[_0xb94bd3(0x197)]]),_0x2f06b8,this[_0xb94bd3(0x18a)](_0x376be3)]);this['socket'][_0xb94bd3(0x170)](_0x19049a);}['handle']({data:_0x433e42}){const _0x1b761d=a8_0xdc99a3;var _0x5ef624,_0x340d09,_0x1a6572;let _0x2baa1a=Buffer['alloc'](0x0);if(_0x433e42 instanceof Buffer)_0x2baa1a=_0x433e42;if(typeof _0x433e42==='string')_0x2baa1a=Buffer[_0x1b761d(0x16b)](_0x433e42,'utf-8');if(_0x433e42 instanceof ArrayBuffer)_0x2baa1a=Buffer['from'](_0x433e42);if(Array[_0x1b761d(0x18c)](_0x433e42))_0x2baa1a=Buffer[_0x1b761d(0x15a)](_0x433e42);if(this[_0x1b761d(0x165)]===_0x1b761d(0x174)){const {pingInterval:_0x4a666d}=this[_0x1b761d(0x17d)](_0x2baa1a);this['heartbeatInterval']=_0x4a666d+0x1f4;const _0x17b402=this[_0x1b761d(0x18a)](this['handshakeData']===undefined?null:this[_0x1b761d(0x15c)]);(_0x5ef624=this[_0x1b761d(0x158)])===null||_0x5ef624===void 0x0?void 0x0:_0x5ef624[_0x1b761d(0x170)](_0x17b402),this[_0x1b761d(0x165)]=_0x1b761d(0x173);return;}else{if(this[_0x1b761d(0x165)]==='sent-info'){this[_0x1b761d(0x165)]=_0x1b761d(0x163);return;}}const _0x3e87f5=_0x2baa1a[_0x1b761d(0x191)](0x0),_0x52a60d=_0x3e87f5&0x7f,_0x1f9d20=(_0x3e87f5&0x80)!==0x0;if(_0x1f9d20){const _0xe1013f=_0x2baa1a[_0x1b761d(0x191)](0x1),_0x537d78=_0x2baa1a['slice'](0x2,0x2+_0xe1013f)[_0x1b761d(0x196)]('utf-8');if(['handshake','open',_0x1b761d(0x16e),_0x1b761d(0x17a),'*']['includes'](_0x537d78))return;const _0x451b86=this[_0x1b761d(0x17d)](_0x2baa1a[_0x1b761d(0x161)](0x2+_0xe1013f)),_0x2bef4e=(_0x340d09=this[_0x1b761d(0x182)][_0x537d78])!==null&&_0x340d09!==void 0x0?_0x340d09:[];let _0x43b003=![];const _0x97168d=_0x535003=>{const _0x58bb4c=_0x1b761d;var _0x2ac635;if(_0x52a60d===0x0&&_0x43b003)return;if(_0x535003===undefined)return;const _0x44e4aa=Buffer['concat']([Buffer['from']([_0x52a60d&0x7f]),this[_0x58bb4c(0x18a)](_0x535003)]);(_0x2ac635=this[_0x58bb4c(0x158)])===null||_0x2ac635===void 0x0?void 0x0:_0x2ac635[_0x58bb4c(0x170)](_0x44e4aa),_0x43b003=!![];};for(const _0xea60c6 of _0x2bef4e)_0xea60c6[_0x1b761d(0x198)](undefined,_0x451b86,_0x97168d);const _0x5a8024=(_0x1a6572=this[_0x1b761d(0x182)]['*'])!==null&&_0x1a6572!==void 0x0?_0x1a6572:[];for(const _0x67fe7b of _0x5a8024)_0x67fe7b[_0x1b761d(0x198)](undefined,_0x537d78,_0x451b86);if(!_0x43b003&&_0x52a60d!==0x0){}return;}const _0x5f5bb6=this[_0x1b761d(0x175)][_0x52a60d];if(_0x5f5bb6==undefined)return;const _0x5df73c=this['decode'](_0x2baa1a[_0x1b761d(0x161)](0x1));_0x5f5bb6(_0x5df73c);}['encode'](_0xae5ecf){const _0x25cf62=a8_0xdc99a3;return Buffer[_0x25cf62(0x16b)](JSON[_0x25cf62(0x17e)](_0xae5ecf),_0x25cf62(0x18f));}[a8_0xdc99a3(0x17d)](_0x1b280a){const _0x2cfd10=a8_0xdc99a3;return JSON['parse'](_0x1b280a['toString'](_0x2cfd10(0x18f)));}['on'](_0x7b4346,_0xe9106){const _0xf0eb5=a8_0xdc99a3;if(this['handlers'][_0x7b4346]==undefined)this[_0xf0eb5(0x182)][_0x7b4346]=[];this[_0xf0eb5(0x182)][_0x7b4346][_0xf0eb5(0x18d)](_0xe9106);}['off'](_0x1368a0,_0x448af3){const _0x58f40d=a8_0xdc99a3;if(_0x448af3==undefined){delete this[_0x58f40d(0x182)][_0x1368a0];return;}const _0x35e6cb=this[_0x58f40d(0x182)][_0x1368a0],_0x591c5e=(_0x35e6cb!==null&&_0x35e6cb!==void 0x0?_0x35e6cb:[])['findIndex'](_0xcabf50=>_0xcabf50===_0x448af3);if(_0x591c5e===-0x1)throw new Error(_0x58f40d(0x159)+_0x1368a0+_0x58f40d(0x166));_0x35e6cb['splice'](_0x591c5e,0x1);}[a8_0xdc99a3(0x160)](_0x545f45,_0x51b6bb){const _0xd5e125=a8_0xdc99a3;var _0x6cb2fe,_0x527014;const _0x6cac5d=(_0x6cb2fe=this[_0xd5e125(0x182)][_0x545f45])!==null&&_0x6cb2fe!==void 0x0?_0x6cb2fe:[];for(const _0x27bcaa of _0x6cac5d)_0x27bcaa(_0x51b6bb);const _0xdb27d7=(_0x527014=this['handlers']['*'])!==null&&_0x527014!==void 0x0?_0x527014:[];for(const _0x72cf64 of _0xdb27d7)_0x72cf64(_0x545f45,_0x51b6bb);}}