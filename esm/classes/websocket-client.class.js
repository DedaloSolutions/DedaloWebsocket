const a5_0x11b05a=a5_0xf36e;function a5_0xf36e(_0x1dcf25,_0x44afcc){const _0x145968=a5_0x1459();return a5_0xf36e=function(_0xf36ed1,_0x36f063){_0xf36ed1=_0xf36ed1-0xfe;let _0x456424=_0x145968[_0xf36ed1];return _0x456424;},a5_0xf36e(_0x1dcf25,_0x44afcc);}(function(_0x8bcf56,_0x53ff15){const _0x18c65d=a5_0xf36e,_0x4b4eb1=_0x8bcf56();while(!![]){try{const _0x24be3b=-parseInt(_0x18c65d(0x11d))/0x1*(parseInt(_0x18c65d(0x122))/0x2)+-parseInt(_0x18c65d(0x119))/0x3+parseInt(_0x18c65d(0x13e))/0x4*(-parseInt(_0x18c65d(0x107))/0x5)+-parseInt(_0x18c65d(0x128))/0x6+-parseInt(_0x18c65d(0x135))/0x7+-parseInt(_0x18c65d(0x123))/0x8+parseInt(_0x18c65d(0x10e))/0x9;if(_0x24be3b===_0x53ff15)break;else _0x4b4eb1['push'](_0x4b4eb1['shift']());}catch(_0x5784da){_0x4b4eb1['push'](_0x4b4eb1['shift']());}}}(a5_0x1459,0xec9cc));var __awaiter=this&&this[a5_0x11b05a(0x113)]||function(_0x5436e4,_0x461356,_0x5ca039,_0x4ebac1){function _0x258ef6(_0x351586){return _0x351586 instanceof _0x5ca039?_0x351586:new _0x5ca039(function(_0x3cfd26){_0x3cfd26(_0x351586);});}return new(_0x5ca039||(_0x5ca039=Promise))(function(_0x428d48,_0x457639){const _0xf33512=a5_0xf36e;function _0x36d785(_0xad02a6){try{_0x4ec0a3(_0x4ebac1['next'](_0xad02a6));}catch(_0x3043a2){_0x457639(_0x3043a2);}}function _0xec4ad0(_0x2a44f3){try{_0x4ec0a3(_0x4ebac1['throw'](_0x2a44f3));}catch(_0x27ac8e){_0x457639(_0x27ac8e);}}function _0x4ec0a3(_0x37c332){const _0x5acf7c=a5_0xf36e;_0x37c332['done']?_0x428d48(_0x37c332[_0x5acf7c(0x11a)]):_0x258ef6(_0x37c332[_0x5acf7c(0x11a)])['then'](_0x36d785,_0xec4ad0);}_0x4ec0a3((_0x4ebac1=_0x4ebac1[_0xf33512(0x10f)](_0x5436e4,_0x461356||[]))[_0xf33512(0x139)]());});};function a5_0x1459(){const _0x560aad=['concat','socket','pendingRequests','utf-8','splice','80JPwVBX','message','waiting','CONNECTING','string','The\x20websocket\x20is\x20already\x20connected','handshakeData','25884189SkuCrr','apply','decode','encode','url','__awaiter','stringify','Event\x20name\x20too\x20long\x20(max\x20255\x20bytes)','includes','closed','from','1447740sYHmuc','value','The\x20websocket\x20is\x20not\x20connected','CLOSED','307919kZCxRA','emit','removeEventListener','off','requestId','4gdmenM','2776856nhwKZC','handlers','completed','error','open','108840fFXxby','toString','handshakeStatus','ping','sent-info','reconnectTimeout','readyState','handle','The\x20websocket\x20isn\x27t\x20connected\x20or\x20is\x20already\x20trying\x20to\x20close\x20the\x20connection','OPEN','Cannot\x20emit\x20a\x20class\x20internal\x20event\x20as\x20handshake,\x20open,\x20error\x20or\x20close','CLOSING','raise','697480WMKlQo','heartbeatInterval','checkHeartbeat','close','next','slice','connect','handshake','addEventListener','85888BZnbOz','send','length','heartbeatTimeout','connecting','Timeout','status','push'];a5_0x1459=function(){return _0x560aad;};return a5_0x1459();}import a5_0x471fee from'ws';export default class WebsocketClient{constructor(){const _0x3039a2=a5_0x11b05a;this['heartbeatInterval']=0x5*0x3e8+0x1f4,this[_0x3039a2(0x12d)]=null,this[_0x3039a2(0x12a)]='waiting',this['requestId']=0x1,this[_0x3039a2(0x104)]={},this[_0x3039a2(0x124)]={},this[_0x3039a2(0x137)]=()=>{const _0x1889e8=_0x3039a2;if(this[_0x1889e8(0x141)]!=undefined)clearTimeout(this['heartbeatTimeout']);this['heartbeatTimeout']=setTimeout(()=>{const _0xfbf465=_0x1889e8;var _0x331518;if(this[_0xfbf465(0x103)]!=undefined&&this['socket']['readyState']!==a5_0x471fee[_0xfbf465(0x131)])return;(_0x331518=this['socket'])===null||_0x331518===void 0x0?void 0x0:_0x331518[_0xfbf465(0x138)]();},this[_0x1889e8(0x136)]);};}[a5_0x11b05a(0x13b)](){return __awaiter(this,arguments,void 0x0,function*({url:_0x599825,allowReject:_0x31c982,handshakeData:_0x243691,reconnectTimeout:_0x1b60c8}={}){return new Promise((_0x1c0de6,_0x45b6d6)=>{const _0x149d85=a5_0xf36e;if(this['socket']!=undefined&&this[_0x149d85(0x103)][_0x149d85(0x12e)]===a5_0x471fee[_0x149d85(0x131)]){if(_0x31c982!==!![])_0x45b6d6(new Error(_0x149d85(0x10c)));else _0x1c0de6();}this[_0x149d85(0x103)]!=undefined&&(this[_0x149d85(0x103)]['removeAllListeners'](),this[_0x149d85(0x103)][_0x149d85(0x120)](_0x149d85(0x12b),this[_0x149d85(0x137)]),this['handshakeStatus']=_0x149d85(0x109));if(this[_0x149d85(0x112)]==undefined&&_0x599825==undefined)_0x45b6d6(new Error('No\x20url\x20specified'));this[_0x149d85(0x112)]=_0x599825||this[_0x149d85(0x112)];if(_0x1b60c8!==undefined)this[_0x149d85(0x12d)]=_0x1b60c8;if(_0x243691!==undefined)this['handshakeData']=_0x243691;this[_0x149d85(0x103)]=new a5_0x471fee(this['url']),this[_0x149d85(0x103)]['addEventListener']('open',this['checkHeartbeat']),this[_0x149d85(0x103)][_0x149d85(0x13d)](_0x149d85(0x108),this['checkHeartbeat']),this[_0x149d85(0x103)]['on'](_0x149d85(0x12b),_0x87f4ae=>{const _0x577ec6=_0x149d85;var _0x237c28;(_0x237c28=this[_0x577ec6(0x103)])===null||_0x237c28===void 0x0?void 0x0:_0x237c28['pong'](_0x87f4ae),this[_0x577ec6(0x137)]();}),this['socket'][_0x149d85(0x13d)](_0x149d85(0x138),()=>{const _0x29f4a4=_0x149d85;if(this[_0x29f4a4(0x141)]!=undefined)clearTimeout(this[_0x29f4a4(0x141)]);});if(this[_0x149d85(0x12d)]!=undefined)this[_0x149d85(0x103)]['addEventListener'](_0x149d85(0x138),()=>{const _0x16d465=_0x149d85;setTimeout(()=>this['connect'](),this[_0x16d465(0x12d)]);});this[_0x149d85(0x103)][_0x149d85(0x13d)](_0x149d85(0x108),_0x3af8e3=>this[_0x149d85(0x12f)](_0x3af8e3)),this[_0x149d85(0x103)][_0x149d85(0x13d)](_0x149d85(0x127),_0x1dd885=>this[_0x149d85(0x134)](_0x149d85(0x127),_0x1dd885)),this[_0x149d85(0x103)][_0x149d85(0x13d)]('error',_0x3a2c81=>this[_0x149d85(0x134)](_0x149d85(0x126),_0x3a2c81)),this[_0x149d85(0x103)][_0x149d85(0x13d)]('close',_0x12cf7e=>this[_0x149d85(0x134)](_0x149d85(0x138),_0x12cf7e));const _0x4d8eea=()=>{_0x1c0de6(),_0x9b9b90();},_0x103157=_0x3393c6=>{_0x31c982?_0x45b6d6(_0x3393c6):_0x1c0de6(),_0x9b9b90();};this[_0x149d85(0x103)][_0x149d85(0x13d)](_0x149d85(0x127),_0x4d8eea,{'once':!![]}),this[_0x149d85(0x103)][_0x149d85(0x13d)](_0x149d85(0x126),_0x103157,{'once':!![]});const _0x9b9b90=()=>{const _0x42983e=_0x149d85;var _0x367e34,_0x2f8f3a;(_0x367e34=this['socket'])===null||_0x367e34===void 0x0?void 0x0:_0x367e34['removeEventListener'](_0x42983e(0x127),_0x4d8eea),(_0x2f8f3a=this['socket'])===null||_0x2f8f3a===void 0x0?void 0x0:_0x2f8f3a[_0x42983e(0x11f)](_0x42983e(0x126),_0x103157);};});});}['disconnect'](_0x4d96b4,_0x545258){return __awaiter(this,void 0x0,void 0x0,function*(){return new Promise((_0x3f833d,_0x217abe)=>{const _0x3ab395=a5_0xf36e;if(this['socket']==undefined||this[_0x3ab395(0x103)]['readyState']===a5_0x471fee[_0x3ab395(0x133)]||this[_0x3ab395(0x103)][_0x3ab395(0x12e)]===a5_0x471fee[_0x3ab395(0x11c)])return _0x217abe(new Error(_0x3ab395(0x130)));this['socket'][_0x3ab395(0x138)](_0x4d96b4,_0x545258);const _0x525b69=()=>{_0x3f833d(),_0x39a21b();},_0x2fb762=_0x2dfcdc=>{_0x217abe(_0x2dfcdc),_0x39a21b();};this['socket']['addEventListener']('close',_0x525b69,{'once':!![]}),this['socket'][_0x3ab395(0x13d)](_0x3ab395(0x126),_0x2fb762,{'once':!![]});const _0x39a21b=()=>{const _0x3e2692=_0x3ab395;var _0xfca917,_0x3862e3;(_0xfca917=this['socket'])===null||_0xfca917===void 0x0?void 0x0:_0xfca917['removeEventListener']('close',_0x525b69),(_0x3862e3=this[_0x3e2692(0x103)])===null||_0x3862e3===void 0x0?void 0x0:_0x3862e3[_0x3e2692(0x11f)](_0x3e2692(0x126),_0x2fb762);};});});}get[a5_0x11b05a(0x100)](){const _0x4edb5c=a5_0x11b05a;var _0x56f02c;switch((_0x56f02c=this[_0x4edb5c(0x103)])===null||_0x56f02c===void 0x0?void 0x0:_0x56f02c[_0x4edb5c(0x12e)]){case a5_0x471fee[_0x4edb5c(0x10a)]:return _0x4edb5c(0xfe);case a5_0x471fee[_0x4edb5c(0x131)]:return this['handshakeStatus']===_0x4edb5c(0x125)?'open':_0x4edb5c(0x13c);case a5_0x471fee[_0x4edb5c(0x133)]:return'closing';case a5_0x471fee[_0x4edb5c(0x11c)]:default:return _0x4edb5c(0x117);}}[a5_0x11b05a(0x11e)](_0x4fa33d,_0x2dd0f1,_0x6e293f,_0x327da8=0x5*0x3e8){const _0x1bce80=a5_0x11b05a;if(this[_0x1bce80(0x103)]==undefined||this[_0x1bce80(0x100)]!==_0x1bce80(0x127))throw new Error(_0x1bce80(0x11b));if([_0x1bce80(0x13c),_0x1bce80(0x127),'error',_0x1bce80(0x138)][_0x1bce80(0x116)](_0x4fa33d))throw new Error(_0x1bce80(0x132));const _0x57306f=_0x6e293f==undefined?0x0:this[_0x1bce80(0x121)],_0x20ce9d=Buffer[_0x1bce80(0x118)](_0x4fa33d,'utf-8');if(_0x20ce9d[_0x1bce80(0x140)]>0xff)throw new Error(_0x1bce80(0x115));if(_0x6e293f!=undefined){this[_0x1bce80(0x121)]=(this[_0x1bce80(0x121)]+0x1)%0x80||0x1;const _0x325ef6=setTimeout(()=>{const _0x17b740=_0x1bce80;delete this[_0x17b740(0x104)][_0x57306f],_0x6e293f(new Error(_0x17b740(0xff)));},_0x327da8);this[_0x1bce80(0x104)][_0x57306f]=_0x3c1f41=>{if(!(_0x3c1f41 instanceof Error))clearTimeout(_0x325ef6);_0x6e293f(_0x3c1f41);};}const _0x494114=Buffer[_0x1bce80(0x102)]([Buffer[_0x1bce80(0x118)]([_0x57306f|0x80,_0x20ce9d[_0x1bce80(0x140)]]),_0x20ce9d,this[_0x1bce80(0x111)](_0x2dd0f1)]);this[_0x1bce80(0x103)][_0x1bce80(0x13f)](_0x494114);}[a5_0x11b05a(0x12f)]({data:_0x390bf2}){const _0xc1c644=a5_0x11b05a;var _0x299566,_0xcad74,_0xa9d5a5;let _0xd99e1=Buffer['alloc'](0x0);if(_0x390bf2 instanceof Buffer)_0xd99e1=_0x390bf2;if(typeof _0x390bf2===_0xc1c644(0x10b))_0xd99e1=Buffer['from'](_0x390bf2,_0xc1c644(0x105));if(_0x390bf2 instanceof ArrayBuffer)_0xd99e1=Buffer['from'](_0x390bf2);if(Array['isArray'](_0x390bf2))_0xd99e1=Buffer[_0xc1c644(0x102)](_0x390bf2);if(this[_0xc1c644(0x12a)]===_0xc1c644(0x109)){const {pingInterval:_0x5e4fd6}=this['decode'](_0xd99e1);this[_0xc1c644(0x136)]=_0x5e4fd6+0x1f4;const _0x338edc=this['encode'](this[_0xc1c644(0x10d)]===undefined?null:this['handshakeData']);(_0x299566=this['socket'])===null||_0x299566===void 0x0?void 0x0:_0x299566[_0xc1c644(0x13f)](_0x338edc),this[_0xc1c644(0x12a)]=_0xc1c644(0x12c);return;}else{if(this[_0xc1c644(0x12a)]==='sent-info'){this[_0xc1c644(0x12a)]=_0xc1c644(0x125);return;}}const _0x49b97c=_0xd99e1['readUInt8'](0x0),_0xf22399=_0x49b97c&0x7f,_0x265e86=(_0x49b97c&0x80)!==0x0;if(_0x265e86){const _0xf1aab4=_0xd99e1['readUInt8'](0x1),_0x22c0c7=_0xd99e1['slice'](0x2,0x2+_0xf1aab4)[_0xc1c644(0x129)](_0xc1c644(0x105));if([_0xc1c644(0x13c),_0xc1c644(0x127),_0xc1c644(0x126),_0xc1c644(0x138)][_0xc1c644(0x116)](_0x22c0c7))return;const _0x479fb2=this[_0xc1c644(0x110)](_0xd99e1[_0xc1c644(0x13a)](0x2+_0xf1aab4)),_0x2d479d=(_0xcad74=this[_0xc1c644(0x124)][_0x22c0c7])!==null&&_0xcad74!==void 0x0?_0xcad74:[];let _0x2c921a=![];for(const _0x48d0c6 of _0x2d479d){const _0x33f9e3=_0x48d0c6['call'](undefined,_0x479fb2);if(!_0x2c921a&&_0x33f9e3!==undefined&&_0xf22399!==0x0){_0x2c921a=!![];const _0x128bfe=Buffer['concat']([Buffer['from']([_0xf22399&0x7f]),this[_0xc1c644(0x111)](_0x33f9e3)]);(_0xa9d5a5=this[_0xc1c644(0x103)])===null||_0xa9d5a5===void 0x0?void 0x0:_0xa9d5a5[_0xc1c644(0x13f)](_0x128bfe);}}if(!_0x2c921a&&_0xf22399!==0x0){}return;}const _0xabe553=this[_0xc1c644(0x104)][_0xf22399];if(_0xabe553==undefined)return;const _0x3a6be9=this[_0xc1c644(0x110)](_0xd99e1[_0xc1c644(0x13a)](0x1));_0xabe553(_0x3a6be9);}[a5_0x11b05a(0x111)](_0x396005){const _0x256f56=a5_0x11b05a;return Buffer['from'](JSON[_0x256f56(0x114)](_0x396005),'utf-8');}[a5_0x11b05a(0x110)](_0x2e8150){const _0x120f12=a5_0x11b05a;return JSON['parse'](_0x2e8150[_0x120f12(0x129)](_0x120f12(0x105)));}['on'](_0x496c6a,_0x365d67){const _0x3dfc48=a5_0x11b05a;if(this[_0x3dfc48(0x124)][_0x496c6a]==undefined)this['handlers'][_0x496c6a]=[];this[_0x3dfc48(0x124)][_0x496c6a][_0x3dfc48(0x101)](_0x365d67);}[a5_0x11b05a(0x120)](_0x2fe684,_0x5d4a25){const _0x988fda=a5_0x11b05a;if(_0x5d4a25==undefined){delete this['handlers'][_0x2fe684];return;}const _0x3ddde1=this[_0x988fda(0x124)][_0x2fe684],_0x487fd4=(_0x3ddde1!==null&&_0x3ddde1!==void 0x0?_0x3ddde1:[])['findIndex'](_0x54c9ae=>_0x54c9ae===_0x5d4a25);if(_0x487fd4===-0x1)throw new Error('Attempted\x20to\x20remove\x20an\x20handler\x20for\x20'+_0x2fe684+'\x20event\x20type\x20but\x20it\x20wasn\x27t\x20found');_0x3ddde1[_0x988fda(0x106)](_0x487fd4,0x1);}[a5_0x11b05a(0x134)](_0xd40f3a,_0x3e577d){var _0x544f74;const _0x506e00=(_0x544f74=this['handlers'][_0xd40f3a])!==null&&_0x544f74!==void 0x0?_0x544f74:[];for(const _0x43ae55 of _0x506e00)_0x43ae55(_0x3e577d);}}